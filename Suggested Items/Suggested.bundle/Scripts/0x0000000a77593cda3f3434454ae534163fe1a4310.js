var sfp="precision mediump float;varying vec2 vTexCoord;uniform sampler2D tex0;uniform vec2 tS,u_dir;uniform vec3 cc;uniform float uNT,u_pA,u_pB,u_pC,u_g,u_br,u_con,uRes[2],RA[50],kBW;float rd(vec2 st){return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);}vec3 eB3(sampler2D t,vec2 texUV,vec2 sS,mat3 cM,float h){vec3 cOut=vec3(0.0);const int sC=9;float gW[sC];gW[0]=cM[1][1];gW[1]=cM[1][0];gW[2]=cM[1][2];gW[3]=cM[0][0];gW[4]=cM[0][1];gW[5]=cM[0][2];gW[6]=cM[2][0];gW[7]=cM[2][1];gW[8]=cM[2][2];float gO[sC];gO[0]=h*0.66293;gO[1]=h*2.47904;gO[2]=h*4.46232;gO[3]=h*6.44568;gO[4]=h*8.42917;gO[5]=h*10.41281;gO[6]=h*12.39664;gO[7]=h*14.38070;gO[8]=h*16.36501;for(int i=0;i<sC;i++){vec2 tCO=gO[i]*sS;vec3 col=texture2D(t,texUV+tCO).xyz+texture2D(t,texUV-tCO).xyz;col*=gW[i];cOut+=col;}return cOut;}vec3 gB(sampler2D t,vec2 texUV,vec2 sS){vec3 cOut=vec3(0.0);const int sC=9;float gW[sC];gW[0]=0.10855;gW[1]=0.13135;gW[2]=0.10406;gW[3]=0.07216;gW[4]=0.04380;gW[5]=0.02328;gW[6]=0.01083;gW[7]=0.00441;gW[8]=0.00157;float gO[sC];gO[0]=0.66293;gO[1]=2.47904;gO[2]=4.46232;gO[3]=6.44568;gO[4]=8.42917;gO[5]=10.41281;gO[6]=12.39664;gO[7]=14.38070;gO[8]=16.36501;for(int i=0;i<sC;i++){vec2 tCO=gO[i]*sS;vec3 col=texture2D(t,texUV+tCO).xyz+texture2D(t,texUV-tCO).xyz;col*=gW[i];cOut+=col;}return cOut;}vec3 bC(vec3 v,float b,float c){return(v-0.5)*c+0.5+b;}void main(){vec2 uv=vTexCoord; float rnd=rd(uv*uNT);vec3 tN=rnd*vec3(uv.x*RA[10],uv.y*RA[13],(uv.x+uv.y)*RA[12]);vec2 uvB=0.1*u_dir;vec3 tI=texture2D(tex0,vec2(uv.x,1.-uv.y)).xyz;mat3 m3_e1=0.9*mat3(3.,0.,0.,0.,-1.,-1.,3.5,-3.,-1.),m3_e3=0.9525*mat3(-2.,0.,-0.,0.,-0.,0.,0.,-0.,2.);vec3 tIa=eB3(tex0,vec2(uv.x,1.-uv.y),vec2(1./uRes[0],1./uRes[1]),m3_e1,0.00802);vec3 tIaE3=eB3(tex0,vec2(uv.x,1.-uv.y),vec2(1./uRes[0],1./uRes[1]),m3_e3,0.00802);vec3 cOut;vec3 b1=gB(tex0,vec2(uv.x,1.-uv.y),tS*uvB);vec3 b2=gB(tex0,vec2(uv.x,1.-uv.y),tS*vec2(uvB.x,uvB.x));vec3 b3=gB(tex0,vec2(uv.x,1.-uv.y),tS*vec2((uvB.y+uvB.x)/2.,(uvB.y+uvB.x)/2.));vec3 b5=gB(tex0,vec2(uv.x,1.-uv.y),(1.15+rnd*0.05)*tS*u_dir.yx);vec3 a=cc.r<1.?cc.r*b1:1.5*vec3(cc.r);tI=0.7*(tI+a*(cc.g*tIa+cc.b*tIaE3));tI=0.36*(tI+1.29*(1.*tIa+1.*tIaE3));b1=0.99*(3.*b1+2.*b2-1.*b5)*(.2+tIaE3+tIa); cOut=pow(0.95*(0.75*bC(tI*(b1*u_pA+u_pB)+tN*u_pC+0.903*tN*(0.5+b1),u_br,u_con)),vec3(u_g)); vec3 cOutBW=0.33*vec3(cOut.r+cOut.g+cOut.b); cOut=(1.-kBW*kBW)*cOut+kBW*cOutBW;gl_FragColor=vec4(cOut,1.0);}",sft="precision mediump float;varying vec2 vTexCoord;uniform float u_t,uRnd2[50];float rd(vec2 st){return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);}float nP(in vec2 st){vec2 i=floor(st);vec2 f=fract(st);float a=rd(i);float b=rd(i+vec2(1.0,0.0));float c=rd(i+vec2(0.0,1.0));float d=rd(i+vec2(1.0,1.0));vec2 u=f*f*(3.0-2.0*f);return mix(a,b,u.x)+(c-a)*u.y*(1.0-u.x)+(d-b)*u.x*u.y;}float fbm(in vec2 st){float v=0.0;float a=.52;for(int i=0;i<5;i++){v+=a*nP(st);st*=2.595;a*=.5;}return v;}void main(){vec2 uv=vTexCoord;vec3 c=vec3(fbm(vec2(fbm((5.+uRnd2[10])*sin(uv)+cos(u_t*0.001)),fbm((1.+uRnd2[11])*sin(uv)+cos(u_t*0.001)))*(5.+4.*uRnd2[20])));c=pow(.25+pow(2.5*c,vec3(4.)),vec3(5.));gl_FragColor=vec4(c,1.0);}",sfe="precision mediump float;varying vec2 vTexCoord;uniform sampler2D tex0,texQ,tex02,tex03;uniform vec2 tS,u_dir,cP1;uniform int si;uniform float u_t,uNT,uRes[2],RA[50],RB[50],uSin[2],uScale,uPD,uUVs,zK,zOffX,zOffY,uQK,uEBK,uDK,t02QK,uR,ts1;vec2 uv,uv3,uv4;float rd(vec2 st){return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);}float modm(float x,float y){return x-y*floor(x/y);}vec2 modm(vec2 v,vec2 p){return vec2(v.x-p.x*floor(v.x/p.x),v.y-p.y*floor(v.y/p.y));}int modmi(int x,int y){return x-y*int(floor(float(x)/float(y)));}float circ(vec2 p,float r){return abs(length(p)-r);}vec3 eB3(sampler2D t,vec2 texUV,vec2 sS,mat3 convMat,float hh){vec3 colOut=vec3(0.0);const int sC=9;float gW[sC];gW[0]=convMat[1][1];gW[1]=convMat[1][0];gW[2]=convMat[1][2];gW[3]=convMat[0][0];gW[4]=convMat[0][1];gW[5]=convMat[0][2];gW[6]=convMat[2][0];gW[7]=convMat[2][1];gW[8]=convMat[2][2];float gO0[sC];gO0[0]=0.66293;gO0[1]=2.47904;gO0[2]=4.46232;gO0[3]=6.44568;gO0[4]=8.42917;gO0[5]=10.41281;gO0[6]=12.39664;gO0[7]=14.38070;gO0[8]=16.36501;float gO[sC];gO[0]=hh*0.66293;gO[1]=hh*2.47904;gO[2]=hh*4.46232;gO[3]=hh*6.44568;gO[4]=hh*8.42917;gO[5]=hh*10.41281;gO[6]=hh*12.39664;gO[7]=hh*14.38070;gO[8]=hh*16.36501;gO[0]=hh*0.66293;gO[1]=hh*2.47904;gO[2]=hh*4.46232;gO[3]=hh*6.44568;gO[4]=hh*8.42917;gO[5]=hh*10.41281;gO[6]=hh*12.39664;gO[7]=hh*14.38070;gO[8]=hh*16.36501;for(int i=0;i<sC;i++){vec2 tCO=gO[i]*sS;vec3 col=texture2D(t,texUV+tCO).xyz+texture2D(t,texUV-tCO).xyz;col*=gW[i];colOut+=col;}return colOut;}float q(float a,float k){return float(int(a*k))/k;}vec2 q(vec2 a,float k){return vec2(float(int(a.x*k))/k,float(int(a.y*k))/k);}vec2 q(vec2 a,vec2 k){return vec2(float(int(a.x*k.x))/k.x,float(int(a.y*k.y))/k.y);}vec3 q(vec3 a,float k){return vec3(float(int(a.x*k))/k,float(int(a.y*k))/k,float(int(a.z*k))/k);}float npgv(in vec2 st){vec2 i=floor(st);vec2 f=fract(st);float a=rd(i);float b=rd(i+vec2(1.0,0.0));float c=rd(i+vec2(0.0,1.0));float d=rd(i+vec2(1.0,1.0));vec2 u=f*f*(3.0-2.0*f);return mix(a,b,u.x)+(c-a)*u.y*(1.0-u.x)+(d-b)*u.x*u.y;}float fbm(in vec2 st){float v=0.0;float a=.52;for(int i=0;i<9;i++){v+=a*npgv(st);st*=2.195*(0.5+RA[12]+RA[14]);a*=.5;}return v;}float gss(vec2 v,float sV){return exp(-(dot(v,v))/2./sV/sV)/(sV*2.5066282746310002);}void main(){float xk,yk,dK=uDK;uv=vTexCoord;vec2 uv0=uv;float th=uR;mat2 rotM=mat2(cos(th),-sin(th),sin(th),cos(th));float aR=uRes[1]/uRes[0];vec2 sc=vec2(uRes[1]<uRes[0] ? 1. : 1./aR,(uRes[1]<uRes[0] ? aR : 1.));vec2 center=0.5*sc.xy;uv*=zK;uv.x+=zOffX;uv.y+=zOffY;uv*=sc;uv=rotM*((uv-center))+center;uv/=sc;vec2 uv4=uv;vec3 bypass=vec3(0.);float rnd=0.5*rd(q(uv,1000.)*uNT*0.1);vec2 uvT02=q(uv4,t02QK);float dd=pow(dot(sc,sc),0.5);int doMod=1;vec3 mmk;if(doMod==1 &&(uv.x<0.015 || uv.x>.985)&&(uv.y<0.015 || uv.y>.985)){uv4*=sc;th+=q(uv.x*RB[10]+uv.y*RB[11],1.05*RA[4]);rotM=mat2(cos(th),-sin(th),sin(th),cos(th));uv4=rotM*((uv4-center))+center;uv4/=sc;if((uv.x<0.)&& uv.y<0.)(mmk.x=RB[11],mmk.y=RB[12],mmk.z=RB[13]);else if((uv.x<0.)&& uv.y>1.)(mmk.x=RB[14],mmk.y=RB[15],mmk.z=RB[16]);else if((uv.x>1.)&& uv.y>1.)(mmk.x=RB[17],mmk.y=RB[18],mmk.z=RB[19]);else if((uv.x>1.)&& uv.y<0.)(mmk.x=RB[20],mmk.y=RB[21],mmk.z=RB[22]);uv4*=(1.05+RB[40]+mmk.z+mmk.x);uv4=modm(uv4,vec2(mmk.x+sin(q(uv4.x,RA[3]))+sin(q(uv4.y,RA[4]))*0.01*uSin[1]));uv4+=mmk.y*fract(uv4*mmk.z);}vec3 tQ=texture2D(texQ,vec2(uv4.x,1.-uv4.y)).xyz;vec3 t03=texture2D(tex03,vec2(uv0.x,1.-uv0.y)).xyz;vec3 t02=texture2D(tex02,uvT02).xyz;uv4*=(.5+t02.bb);uv4+=0.25*(t02.b*(0.5-t02.rg+1.*vec2(RB[11],RB[12])*t02.gr));uv4+=0.25*tQ.r*RB[14]*(0.5-tQ.rg);uv4=q(uv4,100.*pow(t02.r+t02.g,4.));dK=uDK*3.*(t02.b*(0.25-t02.g+RA[15]*t02.r+.01*t03.r));vec2 uvFBM=q(uv,100.);vec3 nTex;float kT=6000.;float kFBM=1.1+0.5*abs(cos(u_t*0.00001));vec3 bx=vec3(0.);vec2 uvBx=uv4*sc;uvBx=(q(uvBx,10.)+0.5*q(uvBx,10.))/1.5;bx=0.2+(dd-vec3(circ(uvBx-vec2(cP1.x,1.-cP1.y)*sc,0.1)))/dd;bx=q(bx,30.);bx*=(.05+uQK*pow(1.*1.1365*bx,vec3(2.)));float k9=0.95;uvFBM+=.1012*(vec2(bx.r,bx.r));nTex=vec3(fbm(vec2(fbm(2.44*(uv)+u_t/kT),fbm(2.25*(uv)+u_t/kT))*9.792));bx=pow(k9+bx,vec3(1.))-k9*0.95+0.*0.0001*rnd;float gaussK=pow(gss(q(uv4,40.)-vec2(cP1.x,1.-cP1.y),.15),2.);gaussK=q(gaussK,250.);bx+=vec3(uQK*uQK*(gaussK+0.2));bx=0.5+pow(bx*0.5+0.05,vec3(0.75));vec2 uvFBMq=uv4;float K3=(bx.r*1.*(1.+10.*RA[27])+0.0095*rnd);K3=10.;kT*=100.;uvFBMq.x=float(int(uvFBMq.x*K3))/K3;uvFBMq.y=float(int(uvFBMq.y*K3))/K3;nTex=vec3(fbm(vec2(fbm(3.30044*sin(uvFBMq*0.1)+0.1*u_t/kT),fbm(.0025*sin(uvFBMq*0.1)+0.1*u_t/kT))*9.792));nTex=pow(nTex*2.,vec3(2.0));vec2 fbmUVQ=3.*nTex.rg;bx=(10.)*bx*(0.5+1.*0.0015*rnd);bx=uQK*0.1+pow(1.*bx,vec3(2.5));uv4=q(uv4,(bx+1.*pow(1.*tQ,vec3(1.))).rb);vec3 tI=texture2D(tex0,vec2(uv4.x,1.-uv4.y)).xyz;nTex=(1./bx)*vec3(fbm(vec2(fbm(1.414*(uvFBM)+(u_t*1.05)/kT),fbm(2.235*(uvFBM)+(u_t*1.175)/kT))*9.5));uv4+=dK*kFBM*0.01*nTex.xy;tI=tI*0.33+0.33*texture2D(tex0,vec2(uv4.x,1.-uv4.y)).xyz;nTex=vec3(fbm(vec2(fbm(2.1414*(uvFBM)+(u_t*1.505)/kT),fbm(3.0235*(uvFBM)+(u_t*1.175)/kT))*8.5));nTex=vec3(fbm(vec2(fbm(1.44*sin(uvFBM)+u_t/kT),fbm(2.25*sin(uvFBM)+u_t/kT))*9.792));uv4+=dK*kFBM*0.0025*nTex.xy;tI+=texture2D(tex0,vec2(uv4.x,1.-uv4.y)).xyz;uv4+=dK*kFBM*0.0025*nTex.yx;tI+=texture2D(tex0,vec2(uv4.x,1.-uv4.y)).xyz;uv4+=dK*kFBM*0.0015*nTex.yx;tI+=texture2D(tex0,vec2(uv4.x,1.-uv4.y)).xyz;uv4+=dK*kFBM*0.0015*nTex.yx;tI+=texture2D(tex0,vec2(uv4.x,1.-uv4.y)).xyz;tI/=5.;mat3 m3_e1=0.90*mat3(3.,0.,0.,0.,-1.,-1.,3.5,-3.,-1.),m3_e3=mat3(2.,-2.,-0.,2.,-2.,0.,2.,-2.,0.);vec3 tIa=eB3(tex0,vec2(uv4.x,1.-uv4.y),vec2(1./uRes[0],1./uRes[1]),m3_e1,0.05+.03*RA[20]);vec3 tIaE3=eB3(tex0,vec2(uv4.x,1.-uv4.y),vec2(1./uRes[0],1./uRes[1]),m3_e3,0.05+.03*RA[21]);vec3 tIaE3_03=eB3(tex03,vec2(uv4.x,1.-uv4.y),vec2(1./uRes[0],1./uRes[1]),m3_e3,0.*0.05);tIa+=tIaE3;tIa=0.25*vec3(0.3*tIa.r+0.3*tIa.g+0.3*tIa.b);tI*=(1.+2.*uEBK*tIa)*(1.+2.5*uEBK*tIaE3_03);vec3 cOut=tI;if(RA[33]<0.25){if(modm(uv.x,(0.4+RA[2]))<RA[2])cOut=pow(vec3(1.2)-cOut,vec3(1.1));if(modm(uv.y,(0.4+RA[2]))<RA[3])cOut=pow(vec3(1.2)-cOut,vec3(1.1));}if(si==1){cOut=t02;} else if(si==2){cOut=t03;} else if(si==3){cOut=tQ;}gl_FragColor=vec4(pow((cOut-0.25)*1.1,vec3(1.1)),1.0);}",sv="precision mediump float;varying vec2 vTexCoord;attribute vec3 aPosition;attribute vec2 aTexCoord;void main() {vTexCoord = aTexCoord;vec4 p = vec4(aPosition, 1.0);p.xy = p.xy * 2.0 - 1.;gl_Position = p;}",tD=tokenData,nmR=0,nR={},rGC=0,ringCount=0;let search=new URLSearchParams(window.location.search);var aF,sh,shT0,urlpd=parseFloat(search.get("pd"))||2;class Random{constructor(){this.nmR=0,this.uA=!1;let t=function(t){let e=parseInt(t.substr(0,8),16),s=parseInt(t.substr(8,8),16),r=parseInt(t.substr(16,8),16),i=parseInt(t.substr(24,8),16);return function(){var t=((e|=0)+(s|=0)|0)+(i|=0)|0;return i=i+1|0,e=s^s>>>9,s=(r|=0)+(r<<3)|0,r=(r=r<<21|r>>>11)+t|0,(t>>>0)/4294967296}};this.pA=new t(tD.hash.substr(2,32)),this.pB=new t(tD.hash.substr(34,32));for(let t=0;t<1e6;t+=2)this.pA(),this.pB();this.aA=[],this.aA2=[];for(let t=0;t<50;t++)this.aA.push(this.d());for(let t=0;t<50;t++)this.aA2.push(this.dd())}A(t){return this.aA[t%this.aA.length]}A2(t){return this.aA2[t%this.aA2.length]}d(){return this.nmR++,this.uA=!this.uA,this.uA?this.pA():this.pB()}dd(){return 2*this.d()-1}n(t,e){return t+(e-t)*this.d()}i(t,e){return Math.floor(this.n(t,e+1))}c(t){return t[this.i(0,t.length-1)]}rLD(t,e,s){let r=[];r.push(t),r.push(e);for(let i=0;i<s;i++)r.push(this.n(1.1*t,.9*e));return r.sort((t,e)=>t-e),r}rSg(){return(-1)**this.c([0,1])}rmM(t){return this.n(t[0],t[1])}}var iPKSfull=[];let R=new Random;var Z={};function aOA(t,e,s){return a1=Math.atan2(t.y-s.y,t.x-s.x),a2=Math.atan2(e.y-s.y,e.x-s.x),a1<0&&(a1+=2*PI),a2<0&&(a2+=2*PI),a1>a2?[e,t,!0]:[t,e,!1]}function cBP(t,e,s,r){let i=aOA(t,e,s);a1=Math.atan2(i[0].y-s.y,i[0].x-s.x),a2=Math.atan2(i[1].y-s.y,i[1].x-s.x),a=a2-a1,Math.abs(a)>Math.PI&&(a=2*PI-abs(a)),K=4*Math.tan(a/4)/3;let c=cV(0,-r),n=cV(r*K,-r),h=cV(-r*K,-r),o=cV(0,-r);return h.rotate(a),o.rotate(a),a=PI/2+a1,c.rotate(a).add(s),n.rotate(a).add(s),h.rotate(a).add(s),o.rotate(a).add(s),i[2]?[o,h,n,c]:[c,n,h,o]}function gPcTP(t,e,s,r=Z.n.pkNFk1v){return cV(t.x+(e.x-t.x)*s+R.d()*r,t.y+(e.y-t.y)*s+R.d()*r)}var pltArr={},pltArrO={};function cAp(t,e,s){return color(red(t),green(t),blue(t),s*e)}function gC(t,e=255,s=0,r=.05,i=!0,c=pltArr){let n=c[t[s%t.length]],h=n[s%n.length];return color(red(h)*(1+R.n(-r,r)),green(h)*(1+R.n(-r,r)),blue(h)*(1+R.n(-r,r)),e)}function bP2(t,e){colorMode(HSL,100),pltArrO[e]=[],pltArr[e]=[];let s,r,i,c,n=[];t.map(t=>{c=t[6],r=Array.from({length:c},(e,s)=>t[0]+s*(t[1]-t[0])/c),s=Array.from({length:c},(e,s)=>t[2]+s*(t[3]-t[2])/c),i=Array.from({length:c},(e,s)=>t[4]+s*(t[5]-t[4])/c),r.push(t[1]),s.push(t[3]),i.push(t[5]*(R.d()<.5?1.25:1)),i.map((t,e)=>n.push(color(r[e],s[e],t)))}),pltArrO[e].push(...n),pltArr[e].push(...n),colorMode(RGB)}function uC(){let t,e,s,r;colorMode(HSL,100);let i=R.A(33)*Z.uCN;for(m=0;m<Z.iP.length;m++)for(let c=0;c<pltArr[Z.iP[m]].length;c++)e=R.A(29)<.4?m+c:0,s=R.A(28)<.1?m:0,r=R.A(27)<.1?c:0,t=pltArrO[Z.iP[m]][c],pltArr[Z.iP[m]][c]=color((hue(t)+(-i+ +m+c+10*gtS%(2*i)))%100,saturation(t),lightness(t)+15*sin(e+gtS*R.A(10+s)*R.A2(11+r))**2);colorMode(RGB)}class aRingGroup{constructor(t,e,s,r,i,c,n=!1,h=-1){this.noPKS=!1,this.rGid=rGC++,rgD[this.rGid]=this,this.iC=n,this.parentRGid=h,this.initTheta=3.14*R.d(),this.initR=R.n(.5,1.05)*e,this.cP=t,this.mCP=t,this.oD=e,this.nR=s,this.rgID=r,this.rings=[],this.rgPl=[R.c(Z.rP)];let o,a,u,l,p=[];if(this.mvmt=i,this.moveFn=c,n&&(e*=R.n(.25,.75)),R.d()<.3)u=R.rLD(.1*e,e,s+1);else{(u=[]).push(e*R.n(.01,.1));for(let t=0;t<s;t++)u.push(e*(t+1)/s)}let g,f=R.i(0,10);l=gC([R.c(Object.keys(pltArr))],255,R.i(0,10),.1);for(let e=0;e<s;e++)(p=[]).push(gC(this.rgPl,Z.rCT,e+f)),o="r"+r,a=new aRing(this,e,r,t,e,s,t.x,t.y,u[e+1],u[e],o+"."+e,p,R.n(Z.rLWmM[0],Z.rLWmM[1]),R.n(Z.rLDmM[0],Z.rLDmM[1]),l,Z.rOSW,!1,i,this.moveFn),this.rings.push(a);if(!this.iC){this.nCluster=R.c(Z.rGCNmM),this.clusterRings=[];for(let s=0;s<this.nCluster;s++){let s={};s.radius=R.n(.75,1.2)*this.oD,s.sign=R.rSg(),s.speed=R.c(Z.aPF),g=new aRingGroup(t,e*R.n(.3,.75),R.i(5,12),0,s,mv1,!0,this.rGid),rgClusters.push(g)}}}contains(t){let e=this.cP.dot(t.cP);return(this.oD/2-t.oD/2)**2<e}upRng(t,e){this.mCP=p5.Vector.add(cV(t,e),this.cP)}moveRings(t){this.moveFn(t);for(let e=0;e<this.rings.length;e++)this.iC&&(this.rings[e].cP=rgD[this.parentRGid].mCP),this.rings[e].mvRg(t)}}class aRect{constructor(t,e,s,r,i,c){let n;this.a=t,this.b=e,this.c=s,this.d=r,this.m=Z.supRm*(1+.1*R.d()),this.cP=cV((this.a.x+this.b.x)/2,(this.a.y+this.d.y)/2),this.rL=i,this.numR=c,this.skipDraw=R.d()<Z.baseGridRectDrawSkipProb,this.w=Math.abs(this.b.x-this.a.x),this.h=Math.abs(this.c.y-this.a.y),this.cP=cV((this.a.x+this.b.x+this.c.x+this.d.x)/4,(this.a.y+this.b.y+this.c.y+this.d.y)/4),this.ar=this.w*this.h,this.recNK=Z.supRrecNK,this.innerN=R.c([0,1,1,R.i(0,Z.bgRmaxR)]),this.outline=Z.outline,this.colors=[];let h=R.c(Z.aRectPalette);for(let t=0;t<Z.bgRmaxR;t++)n=gC([h],255,R.i(0,100),0,!0,pltArr),this.colors.push(n)}divide(t,e){let s=this.a,r=this.b,i=this.c,c=this.d,n=t.length>1?R.c(t):t,h=Z.supRnR;return e>0?[new aRect(s,r,cV(i.x,s.y+this.h*n),cV(c.x,r.y+this.h*n),this.rL+1,h),new aRect(cV(i.x,s.y+this.h*n),cV(c.x,r.y+this.h*n),i,c,this.rL+1,h)]:[new aRect(s,cV(s.x+this.w*n,r.y),i,cV(i.x+this.w*n,c.y),this.rL+1,h),new aRect(cV(s.x+this.w*n,r.y),r,cV(i.x+this.w*n,c.y),c,this.rL+1,h)]}}function qt(t,e,s,r,i,c=0,n=[.5]){if(0==s)return[t];if(e>s||e>1&&R.d()<i)return[t];let h=[],o=[];if(1==(o=t.divide(n,r)).length)return[t];for(let t=0;t<o.length;t++){let n=[];n=qt(o[t],e+1,s,-r,i,c),h.push(...n)}return h}class aRing{constructor(t,e,s,r,i,c,n,h,o,a,u,l,p=1,g=.5,f=color(0,0,0,0),v=0,R=!1,m,x){this.rgG=t,this.rGid=e,this.rcGid=s,this.idx=i,this.nr=c,this.aa=.25*(c-i)/c,this.x=n,this.y=h,this.cR=R,this.cP=cV(n,h),this.rOut=o/2,this.rIn=a/2,this.cs=[new aCircle(n,h,a),new aCircle(n,h,o)],this.tC=l,this.rLSW=p,this.oC=f,this.oSW=v,this.oOA=alpha(f)*this.aa*2.1,this.oCA=alpha(l[0])*this.aa*2.1,this.tA=1.3*Z.n.pkOAdj,this.distC=dist(n,h,r.x,r.y),this.mvmt=m,this.mvRg=x,this.mCP=this.cP}upRng(t,e){this.x=t+this.cP.x,this.y=e+this.cP.y,this.mCP=cV(this.x,this.y),this.cs[0].x=this.x,this.cs[0].y=this.y,this.cs[1].x=this.x,this.cs[1].y=this.y}draw(){pg.noStroke(),pg.fill(cAp(this.tC[0],1,255)),this.dsp(1)}dsp(t){let e,s,r,i,c,n,h,o,a=this.rIn,u=Z.grad.rLM?this.rIn+t**1*(this.rOut-a):this.rOut,l=this.x+R.d()*Z.n.pkNFk1v*Z.n.rNFk1,p=this.y+R.d()*Z.n.pkNFk1v*Z.n.rNFk1;e=cBP(cV(l+0,p+-u),cV(l+u,p+0),cV(l,p),u),s=cBP(cV(l+u,p+0),cV(l+0,p+u),cV(l,p),u),r=cBP(cV(l+0,p+u),cV(l+-u,p+0),cV(l,p),u),i=cBP(cV(l+-u,p+0),cV(l+0,p+-u),cV(l,p),u),c=cBP(cV(l+0,p+-a),cV(l+-a,p+0),cV(l,p),a),n=cBP(cV(l+-a,p+0),cV(l+0,p+a),cV(l,p),a),h=cBP(cV(l+0,p+a),cV(l+a,p+0),cV(l,p),a),o=cBP(cV(l+a,p+0),cV(l+0,p+-a),cV(l,p),a),pg.beginShape(),pg.vertex(e[0].x,e[0].y),pg.bezierVertex(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y),pg.bezierVertex(s[1].x,s[1].y,s[2].x,s[2].y,s[3].x,s[3].y),pg.bezierVertex(r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y),pg.bezierVertex(i[1].x,i[1].y,i[2].x,i[2].y,i[3].x,i[3].y),pg.beginContour(),pg.vertex(c[0].x,c[0].y),pg.bezierVertex(c[1].x,c[1].y,c[2].x,c[2].y,c[3].x,c[3].y),pg.bezierVertex(n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y),pg.bezierVertex(h[1].x,h[1].y,h[2].x,h[2].y,h[3].x,h[3].y),pg.bezierVertex(o[1].x,o[1].y,o[2].x,o[2].y,o[3].x,o[3].y),pg.endContour(),pg.endShape(CLOSE)}pKSwR(t){let e=[];var s=[];let r=0,i=[-1,-1,-1,-1],c=0;for(let e=0;e<this.cs.length;e++){let c=this.cs[e],n=[];for(let s=0;s<t.cs.length;s++){let h=t.cs[s],o=c.int(h);null!=o&&(i[e]=1,i[2+s]=1,n.push(o[0]),n.push(o[1]),r+=2)}s.push(n)}if(0==r)return e;if(4==s[0].length&&4==s[1].length){let r=new pKSh(this,t,s[0][0],s[0][2],s[1][2],s[1][0],this.mCP,this.rOut,this.rIn,t.mCP,t.rOut,t.rIn,c++);e.push(r);let i=new pKSh(this,t,s[0][1],s[0][3],s[1][3],s[1][1],this.mCP,this.rOut,this.rIn,t.mCP,t.rOut,t.rIn,c++);e.push(i)}else if(3==s[0].length||3==s[1].length);else if(2==s[0].length&&0==s[1].length);else if(2==s[1].length&&0==s[0].length);else if(4==s[0].length&&0==s[1].length){let r=new pKSh(this,t,s[0][2],s[0][0],s[0][3],s[0][1],this.mCP,this.rOut,this.rOut,t.mCP,t.rOut,t.rIn,c++);r.v=R.n(.6,1),e.push(r)}else if(4==s[1].length&&0==s[0].length){let r=new pKSh(this,t,s[1][2],s[1][0],s[1][3],s[1][1],this.mCP,this.rOut,this.rOut,t.mCP,t.rOut,t.rIn,c++);r.v=R.n(.6,1),e.push(r)}else if(4==s[0].length&&1==s[1].length){let r=new pKSh(this,t,s[0][0],s[0][2],s[0][3],s[0][1],this.mCP,this.rOut,this.rIn,t.mCP,t.rOut,t.rIn,c++);e.push(r)}else if(4==s[1].length&&1==s[0].length){let r=new pKSh(this,t,s[1][0],s[1][2],s[1][3],s[1][1],this.mCP,this.rOut,this.rOut,t.mCP,t.rOut,t.rIn,c++);e.push(r)}return e}}var ringGroups=[],rgClusters=[];function oob(t,e){return t.x<0-2*e||t.x>wW+2*e||t.y<0-2*e||t.y>wH+2*e}class aCircle{constructor(t,e,s){this.x=t,this.y=e,this.r=s/2}int(t){let e=t.x-this.x,s=t.y-this.y,r=e*e+s*s,i=Math.sqrt(r),c=this.r**2,n=t.r**2,h=i>Math.max(this.r,t.r)-2*Math.min(this.r,t.r);if(i<this.r+t.r&&i>abs(this.r-t.r)&&h){let t=c-n+r,i=t*t,h=Math.sqrt(4*c*r-i),o=this.x+(e*t+s*h)/(2*r),a=this.x+(e*t-s*h)/(2*r),u=this.y+(s*t-e*h)/(2*r),l=this.y+(s*t+e*h)/(2*r);return[cV(o,u),cV(a,l)]}return null}}var globalPKSid=0;class pKSh{constructor(t,e,s,r,i,c,n,h,o,a,u,l,p=0,g=1,f=1){this.ringA=t,this.ringB=e,this.pA1B1=s,this.pA1B2=r,this.pA2B1=c,this.pA2B2=i,this.cA=n,this.rA1=h,this.rA2=o,this.cB=a,this.rB1=u,this.rB2=l,this.u=g,this.v=f,this.fC=null,this.lC=null,globalPKSid=(globalPKSid+1)%5e4,this.globalPKSi=globalPKSid,this.aF=int(pPKSta/max(this.ringA.rgG.mvmt.speed,1)**2)/(Z.gtSinc>0?8:1),this.oC=null,this.cP=cV((this.pA1B1.x+this.pA1B2.x+this.pA2B2.x+this.pA2B1.x)/4,(this.pA1B1.y+this.pA1B2.y+this.pA2B2.y+this.pA2B1.y)/4),this.oob=oob(this.cP,max(abs(this.rA1-this.rA2),abs(this.rB1-this.rB2))),this.ntp=0,Z.pksNPp=.075,Z.pksAccP=.7,this.noP=!1,R.d()<Z.pksNPp&&(Z.pksAccP=Z.pksAccP**2,R.d()<Z.pksAccP?this.noP=!0:Z.pksAccP=.7)}sFC(t){this.fC=t,this.oFA=alpha(t)}sLC(t){this.lC=t,this.oLA=alpha(t)}sOC(t){this.oC=t,this.oOA=alpha(t)}draw(t,e){let s;if(this.noP&&paintPKS[t].splice(e,1),aF=this.aF,this.ntp++>=aF-1)return void paintPKS[t].splice(e,1);this.ntp=this.ntp%aF,s=this.ntp>.5*aF?aF-this.ntp:this.ntp,s=(s/=.5*aF)**(this.ntp,1/this.ringA.rgG.mvmt.speed);let r,i,c=this.ntp>.5*aF?s**.5:1;pg.push(),this.ringB.rgG.mvmt.speed<this.ringA.rgG.mvmt.speed?(r=this.ringA.mCP,i=this.cA):(r=this.ringB.mCP,i=this.cB),pg.translate(.1*c*(r.x-i.x),.1*c*(r.y-i.y)),pg.fill(cAp(this.fC,s,255)),pg.noStroke(),this.dsp(s),pg.pop()}dsp(t){let e,s,r,i,c=Z.grad.pkLM?1-t**1:0,n=Z.grad.pkLM?1-t**1:0;c=0,n=0;this.ntp<2?(e=cBP(gPcTP(this.pA1B1,this.cP,0,1),gPcTP(this.pA1B2,this.cP,0,1),cV(this.cA.x+1*R.d(),this.cA.y+1*R.d()),this.rA2+.5*(this.rA1-this.rA2)*0*R.d()*1),s=cBP(gPcTP(this.pA1B2,this.cP,0,1),gPcTP(this.pA2B2,this.cP,0,1),cV(this.cB.x+1*R.d(),this.cB.y+1*R.d()),this.rB1-.5*(this.rB1-this.rB2)*0*R.d()*1),r=cBP(gPcTP(this.pA2B2,this.cP,0,1),gPcTP(this.pA2B1,this.cP,0,1),cV(this.cA.x+1*R.d(),this.cA.y+1*R.d()),this.rA1-.5*(this.rA1-this.rA2)*0*R.d()*1),i=cBP(gPcTP(this.pA2B1,this.cP,0,1),gPcTP(this.pA1B1,this.cP,0,1),cV(this.cB.x+1*R.d(),this.cB.y+1*R.d()),this.rB2+.5*(this.rB1-this.rB2)*0*R.d()*1),this.bC1=e,this.bC2=s,this.bC3=r,this.bC4=i):(e=this.bC1,s=this.bC2,r=this.bC3,i=this.bC4),pg.beginShape(),pg.vertex(e[0].x,e[0].y),pg.bezierVertex(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y),pg.vertex(s[0].x,s[0].y),pg.bezierVertex(s[1].x,s[1].y,s[2].x,s[2].y,s[3].x,s[3].y),pg.vertex(r[0].x,r[0].y),pg.bezierVertex(r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y),pg.vertex(i[0].x,i[0].y),pg.bezierVertex(i[1].x,i[1].y,i[2].x,i[2].y,i[3].x,i[3].y),pg.endShape(CLOSE)}}var sH,sW,fN,oSH,oSW,prevPD,cV,shP1,sG,lc,fboA,fboB,fboE,fboG,wW,wH,ww,hh,pg,rgt,looping=!0,lt=[],hC=!1,globalAspectRatio=1,gtS=0,gtSO=0;function setup(){wW=windowWidth,wH=windowHeight,Z.frameRate=10,Z.recV=!1,cV=createVector,hC=/HeadlessChrome/.test(navigator.userAgent),fN="variacionesdelyo_id_"+tD.tokenId+"_hash_"+tD.hash,pixelDensity(urlpd),origPD=pixelDensity(),prevPD=pixelDensity(),sG=1e3,sW=wW,sH=wH,Z.globalScale=min(sW,sH)/sG,cnv=createCanvas(sW,sH,WEBGL),cnv.id("msrcnv"),ww=sW,hh=sH;let t={colorFormat:"float",preserveDrawingBuffer:!0,alpha:!0,premultipliedAlpha:!0};for(fboA=createFramebuffer(t),fboB=createFramebuffer(t),fboE=createFramebuffer(t),fboG=createFramebuffer(t),sh=createShader(sv,sfe),shT0=createShader(sv,sft),shP1=createShader(sv,sfp),pgH=1024,pgW=pgH*globalAspectRatio,sH=pgH,sW=pgW,pgW=wW,pgH=wH,(pg=createGraphics(pgW,pgH)).translate(.5*(wW-sG*Z.globalScale),.5*(wH-sG*Z.globalScale)),sH=wH,sW=wW,sAP(),R.A(0)<.5?(sR5(0),R.d()<.15&&sR5(1)):(sR5(1),R.d()<.15&&sR5(0));rgt.length>37;)rgt.splice(R.i(1,rgt.length),1);fboA.draw(()=>{let t;push(),translate(-sW/2,-sH/2),background(255),noFill();for(let e=0;e<1e3;e++)t=255*abs(sin(e/100)),strokeWeight(R.n(1,150)),stroke(color(t,t,t,5)),line(R.n(0,sW),R.n(0,sH),-1,R.n(0,sW),R.n(0,sH),-1);pop()}),pg.clear(),fboE.draw(()=>{push(),clear(),background(0);let t,e=Z.nB,s=0;translate(-sW/2,-sH/2),translate(sW/2,sH/2),noStroke();for(let r=0;r<2*e;r++)fill(color((r+frameCount)%(2*e)*255/e/2)),t=sW/e/2*(1+.005*R.d())*Z.bWs[r],rect(.5*-sW+s,(.005*R.d()-.5)*sH,t,sH*(2+.005*R.d())),s+=t;pop()}),lastChangeTime=millis(),pPKSk=32*Z.frameRate/10,pPKSta=32*Z.frameRate/10,pPKStaS=32*Z.frameRate/10,frameRate(Z.frameRate),uRGs(),cIfull(),console.log("\nvariaciones del yo (c) 2024 Marcelo Soria-Rodríguez @msoriaro\nCC BY-NC-SA 4.0\nDeep thanks to JDH for making this possible\nexplore the piece pressing r / double tapping/clicking")}function rURL(){const t=window.location.search,e=new URLSearchParams(t);let s;for(var r of e.entries())null!=(s=r[0].split("."))&&(s.length>1?Z[s[0]][s[1]]=parseFloat(r[1]):Z[s]=parseFloat(r[1]))}function gCSA(t,e,s,r,i,c,n){let h=(gtS+n)%t;s*=t,r*=t;let o=0;return(o=h<(e*=t)/2?2*(h/e)**2:h<e?1-.5*(-2*h/e+2)**2:h<e+s?1:h<e+s+r/2?1-.5*(-2*((h-e-s)/r+1)+2)**2:h<e+s+r?2*(-(h-e-s)/r+1)**2:0)*i}function mv1(t){let e=cV(sin(this.mvmt.sign*this.mvmt.speed*t),cos(this.mvmt.sign*this.mvmt.speed*t)).mult(this.mvmt.radius);this.upRng(e.x,e.y)}function mv2(t){let e=.7*sG*(-.5+gCSA(this.mvmt.speed*Z.oBC,.49,.01,.49,1,.01,cos(.2*gtS)*(5*(1+R.A(30)))*cos(.1*gtS*R.A2(21)))),s=.7*sG*(.5-gCSA(this.mvmt.speed*Z.oBC,.49,.01,.49,1,.01,sin(.2*gtS)*(5*(1+R.A(29)))*sin(.1*gtS*R.A2(20))));this.upRng(e,s)}function sR5(t){let e={radius:0};e.speed=R.c([.25,.5]),e.sign=R.rSg(),oRG=new aRingGroup(cV(sG/2,sG/2),2*sG*R.n(.4,.6),R.c([5,7,9,13,19,31,49]),0,e,mv2),ringGroups.push(oRG),Z.rgFocus=oRG;for(let s=0;s<Z.bgGrid.length;s++){if(Z.bgGrid.length>6&&R.d()<.25)continue;(e={}).radius=R.n(.05,.35)*sG,e.speed=R.c(Z.aPF),e.sign=R.rSg();let r=R.n(0,2*PI),i=R.n(.2,1.2)*ringGroups[0].rings[ringGroups[0].rings.length-1].rOut;oRG=new aRingGroup(0==t?Z.bgGrid[s].cP:p5.Vector.add(ringGroups[0].cP,cV(i*sin(r),i*cos(r))),R.n(.75,1.5)*max(Z.bgGrid[s].w,Z.bgGrid[s].h),R.i(3,1==t?10:7),s+1,e,mv1),ringGroups.push(oRG)}(rgt=[...ringGroups]).push(...rgClusters)}function cIfull(){var t={};iPKSfull=[];let e,s,r=[],i=R.A(83);rgt.sort((t,e)=>e.oD-t.oD);let c=gC(Z.iP,Z.iCT,int(10*R.A(4)),.02,!0);for(let n=0;n<rgt.length;n++)for(let h=n+1;h<rgt.length;h++){if(h===n||null!=t[`${h}-${n}`])continue;e=h,s=n;let o=!1;for(let t=n+1;t<h;t++)rgt[t].contains[rgt[h]]&&(o=!0);if(!o){t[`${h}-${n}`]=1;for(let t=0;t<rgt[e].rings.length;t++){r=[];for(let i=0;i<rgt[s].rings.length;i++){aPKS=rgt[e].rings[t].pKSwR(rgt[s].rings[i]);for(let t=0;t<aPKS.length;t++)r.push(aPKS[t])}if(0==r.length)continue;let n=[];n.push(...r);let o=1+int(R.A(t%100)*n.length);for(let e=0;e<n.length;e++){if(pKS=n[e],null==pKS||null==pKS)continue;let s=!1;(R.d()<10.1||s)&&(i=i**1.25,R.d()<i?s=!0:(s=!1,i=R.A(83))),s||(c=gC(Z.iP,Z.iCT,int((t+h+e)/o),.02,!0)),pKS.sFC(c),iPKSfull.push(pKS)}}}}Z.doCI||iPKSfull.sort((t,e)=>e.rA1-t.rA1)}drawPgBg=function(){let t,e=Z.nB,s=0;pg.push(),pg.translate(sW/2,sH/2),pg.rotate(Z.bRot),pg.translate(-sW/2,-sH/2),pg.noStroke();for(let r=0;r<e;r+=2){t=sW/e*(1+.005*R.d())*Z.bWs[r];for(let e=0;e<10;e++)pg.push(),pg.fill(Z.bCs[r]),pg.translate(sW/2,sH/2),pg.rotate(.1*R.A(10)*e),pg.translate(-sW/2,-sH/2),pg.rect(.5*-sW+s,(.005*R.d()-.5)*sH,t,sH*(2+.005*R.d())),pg.pop();s+=t+sW/e*(1+.005*R.d())*Z.bWs[r+1]}pg.pop()};var iPKSp,ppks,pkPNP,pKSpIdx=0;let pPKSk=32*Z.frameRate/10,pPKSta=32*Z.frameRate/10,pPKStaS=32*Z.frameRate/10,nPKSkArr=4;var paintPKS=[];for(let t=0;t<nPKSkArr;t++)paintPKS.push([]);var pPKSsi=0,pPKSei=0,pPKSaN=0;function dIi3(){let t,e=pPKSk;ppks=0,iPKSp=0,pkPNP=e*pPKStaS,pPKSaN=(pPKSaN+e)%iPKSfull.length;for(let s=0;s<nPKSkArr;s++)t=(pPKSsi+s*int(iPKSfull.length/nPKSkArr))%iPKSfull.length,paintPKS[s].push(...iPKSfull.slice(t,(t+e)%iPKSfull.length));for(pPKSsi=pPKSaN%iPKSfull.length;ppks<pkPNP;){for(let t=0;t<nPKSkArr;t++)if(pKS=paintPKS[t][+ppks],null!=pKS){if(0==pKS.ntp){if(0==pKS.ringA.pKSwR(pKS.ringB).length){paintPKS[t].splice(ppks,1);continue}}pKS.draw(t,+ppks)}ppks++}}function dRi(){for(let t=0;t<rgt.length;t++)for(let e=0;e<rgt[t].rings.length;e++)rgt[t].rings[e].draw()}let vv=[[1.1,2,45],[.15,30.1,25],[.95,8,70]];function shI(t=sh){shader(t);let e=[];for(let t=0;t<2;t++)e.push(sin((2*t+1)*frameCount/100));let s=ringGroups[0].mCP;s=cV(s.x*Z.globalScale+.5*(wW-sG*Z.globalScale),s.y*Z.globalScale+.5*(wH-sG*Z.globalScale));let r=vv[Z.sh.cc],i={tS:[1/sW*Z.sh.shK,1/sH*Z.sh.shK],u_aB:Z.sh.shAB,u_dir:[Z.sh.shBx,Z.sh.shBy],u_t:gtS,uNT:R.n(50,200),u_pA:Z.sh.shBlEqA,u_pB:Z.sh.shBlEqB,u_pC:Z.sh.shBlEqC,u_bw:Z.sh.shBW,u_g:Z.sh.shG,u_br:Z.sh.shBr,u_con:Z.sh.shCon,RA:R.aA,RB:R.aA2,uRes:[wW,wH],uSin:e,zK:Z.zKf,zOffX:Z.zOffX,zOffY:Z.zOffY,cP1:[s.x/wW,s.y/wH],uQK:Z.uQKf,uEBK:Z.uEBK,uDK:Z.uDKf,doP:Z.autoPerform,kBW:Z.sh.kBW,t02QK:Z.t02QK,uR:Z.perfRot,ts1:gCSA(5e3,.2,.2,.2,1,0,0),cc:r,si:Z.si},c=Object.keys(i);for(let e=0;e<c.length;e++)t.setUniform(c[e],i[c[e]])}function dQTtex(){fboG.draw(()=>{clear(),push(),translate(-wW/2,-wH/2);let t=0;for(let e=0;e<8;e++)t+=R.A2(e)*sin(e*gtS/Z.tcF)/(e+1);if(stroke(Z.tcSC),strokeWeight(Z.tcSW*(1+2*t)),Z.zero)fill(255,255,128),rect(0,0,wW,wH);else if(Z.perform){let e=100,s=255,r=255,i=128;background(0);for(let c=0;c<Z.ptG.length;c++)s=e+R.A((c+15+Z.ptCOff)%100)*(255-e),r=e+R.A((2*c+16+Z.ptCOff)%100)*(255-e),i=e+R.A((3*c+17+Z.ptCOff)%100)*(255-e),fill(s,r,i),rect(1*Z.ptG[c].a.x,Z.ptG[c].a.y*(1+.1*t),Z.ptG[c].w*(1+.1*t),1*Z.ptG[c].h)}else{let e,s=Z.bgCP,r=R.n(150,200),i=255-r;if(gtS%Z.tcT<1.05/frameRate()){Z.bgCP=cV(R.n(.1,.9)*wW,R.n(.1,.9)*wH),Z.tcV=[[255,255,0]];for(let t=0;t<3;t++)Z.tcV.push([r+R.A((t+int(gtS/10))%88)*i,r+R.A((10+t+int(gtS/10))%77)*i,r+R.A((20+t+int(gtS/10))%88)*i]);Z.tcV.sort((t,e)=>t[1]-255*R.d())}s=p5.Vector.add(Z.bgCP,cV(sW*(.1*R.A(40)+.1*t)*sin(.1*gtS*R.A2(50))+10*t,sH*(R.A(41)+0)*cos(.1*gtS*R.A2(30))+0));let c,n,h,o=[[0,0],[sW,0],[sW,sH],[0,sH]];for(let t=0;t<4;t++)beginShape(),c=(e=Z.tcV[t])[0],n=e[1],h=e[2],fill(c,n,h),vertex(o[t][0],o[t][1]),vertex(s.x,s.y),vertex(o[(t+1)%4][0],o[(t+1)%4][1]),endShape(CLOSE)}resetShader(),pop()})}function q(t,e){return int(t*e)/e}function dBands(){push(),rotate(2*R.A2(14));let t,e,s=sH/Z.qBandsWs.length,r=0;noStroke();var i=gCSA(Z.bandsCST,.3,.1,.25,1,.01,0);for(let c=0;c<Z.qBandsWs.length;c++){r=0,t=Z.qBandsWs[c].length;for(let n=0;n<Z.qBandsWs[c].length;n++)fill(color(0+Z.bandsNK*(n+1)*i%t*255/t)),e=sW*Z.qBandsWs[c][n]*(1+.001*R.dd()),rect(-sW/2+r,-sH/2+c*s,e,s),r+=e}pop(),resetShader()}var frameStart,frameEnd,FPS,check1=0;function draw(){uC(),Z.fST=Date.now(),gtS=(Date.now()-Z.baseDateTime+gtSO+Z.tsGD+Z.gtSinc*frameCount)*Z.tSK,Z.uDKf=8*gCSA(Z.csUDKT,Z.csAA,Z.csAB,Z.csAC,Z.uDK,.01,Z.csUDKoff),Z.uQKf=constrain((gCSA(Z.csUQKT,Z.csUQKA,Z.csUQKB,Z.csUQKC,1,0,Z.csUQKoff)+.2)*Z.uQK,.5,12),Z.autoPerformCS=gCSA(120,.1,.5,.1,1,.01,100*R.A2(32))<.5,Z.auto&&(Z.autoPerformCS?(Z.autoPerform||perform(),Z.autoPerform=!0,Z.zero=!1):(Z.autoPerform&&(Z.autoPerform=!1,Z.zK=1,Z.zOffX=0,Z.zOffY=0),Z.perform=!1)),Z.doCICS=gCSA(600,.1,.65,.1,1,.01,100*R.A(30))>.5,Z.auto&&(Z.doCI=Z.doCICS),Z.zKf=Z.zK,uRGs(),dQTtex(),ckD(),pg.push(),Z.doCI&&cIfull(),(frameCount<2||Z.doCI)&&drawPgBg(),pg.scale(Z.globalScale),(Z.doCI||frameCount<2)&&dRi(),dIi3(),pg.pop(),fboE.draw(()=>{dBands()}),fboB.draw(()=>{push(),shI(),sh.setUniform("tex0",pg),sh.setUniform("tex02",fboG.color),sh.setUniform("tex03",fboA.color),sh.setUniform("texQ",fboE.color),rect(0,0,sW,sH),resetShader(),pop()}),shI(shP1),shP1.setUniform("tex0",fboB.color),shP1.setUniform("tex02",fboE.color),rect(0,0,sW,sH),resetShader(),Z.fET=Date.now(),chP()}function chP(){if(1!=Z.overridePerformance&&Z.fET-Z.fST>Z.fMT){let t=max(10,int(.8*ringGroups.length));for(;ringGroups.length>t;)ringGroups.splice(R.i(1,ringGroups.length),1)}}function uRGs(){if(Z.stopMovement||!Z.doCI)return;let t=gtS-Z.tsGD;for(let e=0;e<ringGroups.length;e++)ringGroups[e].moveRings(Z.tA*t);for(let e=0;e<rgClusters.length;e++)rgClusters[e].moveRings(Z.tA*t)}sv_stop=function(t){var e=new Blob(t,{type:"video/webm"});const s=URL.createObjectURL(e),r=document.createElement("a");r.style="display: none;",r.href=s;let i=new Date(Date.now());r.download=(fN+"_when_"+i.toISOString()+".webm").split(":").join("-"),document.body.appendChild(r),r.click(),setTimeout(()=>{URL.revokeObjectURL(s),document.body.removeChild(r)},0)},sV=function(){if(Z.recV)Z.recV=!1,this.m_rec.stop();else{const s={videoBitsPerSecond:4*Z.vqk*25e5,frameRate:Z.frameRate,mimeType:"video/webm; codecs:vp9"};Z.recV=!0;var t=[],e=document.getElementById("msrcnv").captureStream(Z.frameRate);this.m_rec=new MediaRecorder(e,s),this.m_rec.ondataavailable=(e=>{t.push(e.data)}),this.m_rec.onstop=(()=>{sv_stop(t)}),this.m_rec.start(5e3)}};var zOxAcc=0,zOyAcc=0,zMvK=.005;function ckD(){keyIsDown(LEFT_ARROW)||zOxAcc<0?(keyIsDown(LEFT_ARROW)?zOxAcc--:zOxAcc=min(++zOxAcc,0),Z.zOffX-=zMvK*(1+zOxAcc*zOxAcc)):keyIsDown(RIGHT_ARROW)||zOxAcc>0?(keyIsDown(RIGHT_ARROW)?zOxAcc++:zOxAcc=max(--zOxAcc,0),Z.zOffX+=zMvK*(1+zOxAcc*zOxAcc)):zOxAcc=max(--zOxAcc,0),keyIsDown(DOWN_ARROW)||zOyAcc<0?(keyIsDown(DOWN_ARROW)?zOyAcc--:zOyAcc=min(++zOyAcc,0),Z.zOffY-=zMvK*(1+zOyAcc*zOyAcc)):keyIsDown(UP_ARROW)||zOyAcc>0?(keyIsDown(UP_ARROW)?zOyAcc++:zOyAcc=max(--zOyAcc,0),Z.zOffY+=zMvK*(1+zOyAcc*zOyAcc)):zOyAcc=max(--zOyAcc,0),(keyIsDown(189)||keyIsDown(173))&&("g"===lc&&(Z.sh.shG-=.1),"k"===lc&&(Z.sh.kBW=max(Z.sh.kBW-.05,0),Z.sh.shCon=max(Z.sh.shCon/1.03,Z.shp.shCon)),"q"===lc&&(Z.uQK=constrain(.9*Z.uQK,.5,12)),"e"===lc&&(Z.uEBK*=.9),"g"===lc&&(Z.sh.shG/=1.05),"z"===lc&&(Z.sh.shBr-=.01),"x"===lc&&(Z.sh.shCon/=1.05),"n"===lc&&(Z.sh.shBlEqC/=1.1),"b"===lc&&(Z.sh.shBlEqA/=1.03,Z.sh.shBlEqB*=1.03,Z.sh.shBr*=1.1075,Z.sh.shCon*=.9971,Z.sh.shG*=.93),"a"===lc&&(Z.auto=!1,Z.zK0=Z.zK,Z.zK/=1.05,Z.zOffX+=(Z.zK0-Z.zK)/2,Z.zOffY+=(Z.zK0-Z.zK)/2),"t"===lc&&(gtSO-=4500)),(keyIsDown(187)||keyIsDown(61))&&("g"===lc&&(Z.sh.shG+=.1),"k"===lc&&(Z.sh.kBW=min(Z.sh.kBW+.05,1),Z.sh.shCon=min(1.03*Z.sh.shCon,.5)),"q"===lc&&(Z.uQK=constrain(1.1*Z.uQK,.5,12)),"e"===lc&&(Z.uEBK*=1.1),"g"===lc&&(Z.sh.shG*=1.05),"z"===lc&&(Z.sh.shBr+=.01),"x"===lc&&(Z.sh.shCon*=1.05),"n"===lc&&(Z.sh.shBlEqC*=1.1),"a"===lc&&(Z.auto=!1,Z.zK0=Z.zK,Z.zK*=1.05,Z.zOffX+=(Z.zK0-Z.zK)/2,Z.zOffY+=(Z.zK0-Z.zK)/2),"b"===lc&&(Z.sh.shBlEqA*=1.03,Z.sh.shBlEqB/=1.03,Z.sh.shBr/=1.1075,Z.sh.shCon/=.9971,Z.sh.shG/=.93),"t"===lc&&(gtSO+=4500))}function mousePressed(){Z.lMsP[0]=Z.lMsP[1],Z.lMsP[1]=Date.now(),Z.lMsP[1]-Z.lMsP[0]<300?Z.mZ=!0:Z.mZ=!1,Z.mSX=mouseX,Z.mSY=mouseY}function mouseReleased(){Z.mZ&&(Z.mouseDragged?Z.mouseDragged=!1:(Z.auto=!1,Z.autoPerform=!1,clearInterval(Z.autoPlayTimerId),perform()))}var mmsx=0,mmsy=0;function mouseDragged(){Z.mouseDragged=!0,Z.mZ?(Z.zK0=Z.zK,Z.zK+=(Z.mSY-mouseY)/sH,Z.zOffX+=(Z.zK0-Z.zK)/2,Z.zOffY+=(Z.zK0-Z.zK)/2,Z.mSX=mouseX,Z.mSY=mouseY):(Z.zOffX+=(Z.mSX-mouseX)/sW,Z.zOffY-=(Z.mSY-mouseY)/sH,Z.mSX=mouseX,Z.mSY=mouseY)}function perform(){let t=R.d();t<.4?Z.perfRot=2*PI*(new Date).getSeconds()/60:t<.5&&(Z.perfRot=0),Z.zK0=1+.1*R.dd(),Z.zK=R.c([.75,1,1.5,R.n(1.5,3),R.n(3,10)]),Z.zOffX=(1+.1*R.dd())*(Z.zK0-Z.zK)/2,Z.zOffY=(1+.1*R.dd())*(Z.zK0-Z.zK)/2,Z.pBR=new aRect(cV(0,0),cV(wW,0),cV(0,wH),cV(wW,wH),0,Z.tcT),Z.pSP=R.n(.07,.25),Z.qT=R.c([.15,.25,.33,.5,.66,.75,.85]),Z.ptG=qt(Z.pBR,0,R.c(Z.prfMI),R.rSg(),Z.pSP,R.n(.075,.15),Z.qT),Z.ptCOff=frameCount,Z.perform=!0,dQTtex(),lastChangeTime=millis(),Z.autoPerform&&(clearTimeout(Z.autoPlayTimerId),Z.lastBeatChange.shift(),2==Z.lastBeatChange[1]&&2!=Z.lastBeatChange[0]?Z.lastBeatChange.push(2):Z.lastBeatChange.push(R.c(Z.beatsChange)),Z.autoPlayTimerId=setTimeout(()=>{perform()},Z.beatInterval*Z.lastBeatChange[1]))}function estBeatInterval(){Z.estBeatTimes.push(millis());let t=0;if(!(Z.estBeatTimes.length<8)){for(let e=Z.estBeatTimes.length-7;e<Z.estBeatTimes.length;e++)t+=Z.estBeatTimes[e]-Z.estBeatTimes[e-1];t/=8,Z.beatInterval=t,Z.autoPerform=!0,clearTimeout(Z.autoPlayTimerId),Z.lastBeatChange.shift(),Z.lastBeatChange.push(R.c(Z.beatsChange)),Z.autoPlayTimerId=setTimeout(()=>{print("autoperforming to a rythm of "+Z.beatInterval+" ms per beat"),Z.autoPerform&&perform()},Z.beatInterval*Z.lastBeatChange[1])}}function setV(t){t<4&&(Z.si=t)}let frT=0;function keyTyped(){if("p"===key)Z.stopMovement=!Z.stopMovement,Z.autoPerform=!1;else if("9"===key)Z.auto=!0,Z.gtSinc=0;else if("8"===key)Z.gtSinc>0&&(gtSO+=Z.gtSinc*frameCount),Z.gtSinc=Z.gtSinc>0?0:4500;else if("u"===key)Z.autoPerformManual=!Z.autoPerformManual,Z.autoPerform=!Z.autoPerform;else if("l"===key)(looping=!looping)?(loop(),gtSO-=gtS-frT,frT=0):(noLoop(),frT=gtS);else if("f"===key)Z.doCIManual=!1,Z.doCI=!Z.doCI,Z.auto=!1;else if("s"===key){let t=new Date(Date.now()),e=fN+"_when_"+t.toISOString();e.split(":").join("-"),save(e+".png")}else"v"===key?sV():"r"===key?(Z.auto=!1,Z.autoPerform=!1,clearInterval(Z.autoPlayTimerId),perform()):"i"===key?(Z.auto=!1,Z.autoPerform=!1,estBeatInterval()):"0"===key&&("q"===lc?Z.uQK=Z.uQKo:(Z.gtSinc=0,Z.auto=!1,Z.perfRot=Z.pR0,Z.zero=!Z.zero,Z.perform=!1,Z.zK=1,Z.zOffX=0,Z.zOffY=0,Z.autoPerform=!1,clearTimeout(Z.autoPlayTimerId)));"o"===(lc=lt.slice(-1)[0])&&-1!="1234567".indexOf(key)?Z.si=key<6?key-1:0:"-"===key||"+"===key||lt.push(key),lastKeyCode=keyCode,lt.join(""),"widen"===lt.join("").slice(-5)&&(Z.uCN=200)}var rgD={};function sAP(){Z.si=0,Z.vqk=4,Z.auto=!0,Z.autoPerformManual=!1,Z.doCIManual=!0,Z.doCI=!0,Z.ppkfull=!1,Z.lMsP=[0,0,0],Z.mZ=!1,Z.mouseDragged=!1,Z.overridePerformance=0,Z.fST=0,Z.fET=0,Z.fMT=150,Z.baseDateTime=new Date(Date.UTC(2023,1,1,1,19,0)),Z.startDateTime=new Date(Date.now()),Z.tsGD=0,Z.tSK=.001,Z.sTwk=Z.startDateTime*Z.tSK,Z.bTwk=Z.baseDateTime*Z.tSK,gtSO=0,Z.gtSinc=0,Z.tA=R.n(.05,.001);let t,e=3600;Z.oBC=1e3,Z.csAA=.25,Z.csAB=.25,Z.csAC=.25,Z.csAD=.25,Z.csUQKT=R.c([57.6,360,1800,6*e,86400]),Z.csUDKT=R.c([57.6,360,1800,6*e,86400]),Z.csUQKoff=Z.csUQKT*R.d(),Z.csUDKoff=Z.csUDKT*R.d(),Z.csUQKA=.3,Z.csUQKB=.4,Z.csUQKC=.2,Z.csZKKT=R.c([e,6*e,43200,86400]),Z.csZKKT=60,Z.csZKKA=.3,Z.csZKKB=.3,Z.csZKKC=.3,Z.csZKKoff=Z.csZKKT*R.d(),Z.csAPT=Z.csZKKT,Z.pkshST=1e3*R.c([30,60,120,240]),Z.bandsCST=60*R.c([2,4,4,10,30]),Z.bandsNK=R.c([1,3,5]),Z.pkkk=0,Z.aPF=[.25,.5,.5,.75,1],Z.zero=!1,Z.perform=!1,Z.rndNx=R.i(2,30),Z.rndNy=R.i(2,30),Z.uDKoff=R.n(0,PI),Z.uDKspeed=R.n(.001,.1),Z.uQKoff=R.n(0,PI),Z.uQKspeed=R.n(.001,.1),Z.bgCP=cV(R.n(.2,.75)*sW,R.n(.25,.75)*sH),Z.tcV=[[255,255,0]],Z.tcT=R.c([10,30,60,30,15,120]),Z.tcF=R.c([5,10,20]),Z.tcSW=R.c([2,5,5,10,30]),Z.tcSC=R.c([175,200,225,255]);for(let t=0;t<3;t++)Z.tcV.push([120+125*R.A(t),120+125*R.A(10+t),120+125*R.A(20+t)]);let s=R.c([1,2,2,3]),r=R.c([1,2,2,3,4]),i=R.c([1,1,2]);s=3,i=3,t=[];let c=R.i(0,80);c=R.i(0,80),c=R.c([0,3,5,10,15,30,0,3,5,10,15,50,70]);R.c(1,2,2,3);Z.uCN=15;let n,h,o,a,u,l,p,f,v,m,x=R.c([[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4],[0,50,50,1,1],[0,50,50,1,1],[0,5,1,50,1],[0,33,33,32],[0,45,55,5,33]]),d=R.c([[1],[1],[1,2],[1,2,3]]);h=c,Z.rP=[],Z.iP=[],Z.bgP=[],Z.aRectPalette=[];let P=[60,95];for(let e=0;e<3+r+3;e++){m=R.c([P,P,[5,90],P,P,P,P]),c=(c+(R.d()<.05?R.i(0,65):x[e%x.length]))%100,e>3+r&&R.d()<.5&&(m=[0,0]),t=[];let s=R.c(d);for(let r=0;r<s;r++)o=((h=(c+(R.d()<.035?R.i(0,100):x[r%x.length]))%100)+R.c([0,10,20,30,40,50,60,70,80,90]))%100,o=min(h+R.i(-3,3),100),o=(c+x[(r+1)%x.length]+R.i(-2,2))%100,o=h,a=R.i(m[0],min(m[0]+R.i(0,10),m[1])),u=min(a+R.i([30,60]),m[1]),R.A(10+e+r)<.5&&([a,u]=[u,a]),n=[h,o,a,u,l=R.c([10,40,50,60]),p=min(l+R.n(30,60),85),v=R.c(a<40||u<40?[3,6]:[3,5,7,15])],t.push(n);f=e.toString(),e<3?Z.rP.push(f):e<3+r?Z.iP.push(f):Z.bgP.push(f),bP2(t,f)}if(R.A(40)<.33){bP2(t=[[0,0,0,0,0,100,R.i(2,6)]],"bw");let e=R.d();e<.33?Z.rP.push("bw"):e<.7?Z.iP.push("bw"):Z.bgP.push("bw")}Z.rGCNmM=[0,0,1,2,3],Z.doBypass=!1,Z.stopMovement=!1,Z.beatInterval=2e3,Z.beatsChange=[2,4,4,4,4,4,8,8,16],Z.autoPerform=!1,Z.estBeatTimes=[],Z.prfMI=[1,2,2,3,3,4],Z.perfRot=R.c([0,0,3*R.A2(11)]),Z.pR0=Z.perfRot,Z.lastBeatChange=[4,4,4],Z.bgP=[],Z.paletteSrc=pltArr,Z.palettesN=min(Object.keys(Z.paletteSrc).length,R.c([1,1,2,R.i(2,Object.keys(Z.paletteSrc).length)]));for(let t=0;t<Z.palettesN;t++)Z.bgP.push(R.c(Object.keys(Z.paletteSrc)));Z.aRectPalette=Z.bgP,Z.nB=R.c([10,20,50,50,50,75,100]),Z.bCs=[],Z.bWs=[],Z.bWVmM=[.5,3],Z.qBandsR=R.c([3,5,7,10,15]),Z.qBandsWs=[];for(let t=0;t<Z.nB;t++)Z.bCs.push(gC(Z.bgP,200+R.n(0,55),t,.01,!0,pltArrO)),Z.bWs.push(R.rmM(Z.bWVmM));for(let t=0;t<Z.qBandsR;t++){Z.qBandsWs.push([]);let e=R.i(4,20);for(let s=0;s<e;s++)Z.qBandsWs[t].push((1+.15*R.d())*s/e)}Z.bRot=3*R.d(),Z.zK=1,Z.zK0=1,Z.zKf=1,Z.zKK=1,Z.zKKM=R.n(5,8),Z.zOffX=0,Z.zOffY=0,Z.uQK=R.c([2,3,4]),Z.uQKo=Z.uQK,Z.t02QK=R.c([20,40,60,100,200]),Z.mv2sX=R.A(20)<.5?1:-1,Z.mv2sY=R.A(21)<.5?1:-1,Z.uEBK=R.c([.25,.5,1]),Z.uEBK=.5,Z.uDK=R.c([.01,.01,.025,.025,.05,.05]),g=[],Z.gCS="i",Z.sh={},Z.grad={},Z.sh.shBW=R.d()<.075,Z.supRrecNK=0,Z.bgRmaxR=R.c([1,1,R.n(1,5)]),Z.sr=0,Z.er=Z.bgRmaxR,Z.supRN=0,Z.supRdN=0,Z.supRzK=0,Z.supRnR=1,Z.supRm=1,Z.supRm=0,Z.supRmaxItermM=[2,4];let y=new aRect(cV(.15*sG,.15*sG),cV(.85*sG,.15*sG),cV(.15*sG,.85*sG),cV(.85*sG,.85*sG),0,1);Z.baseGridMaxIter=R.i(2,3),Z.qtT=R.c([.15,.25,.33,.5,.66,.75,.85]),Z.bGPS=.15025,Z.bGPST=.0925,Z.bgGrid=qt(y,0,Z.baseGridMaxIter,R.rSg(),Z.bGPS,Z.bGPST,Z.qtT),Z.qt03nP=1+2*R.i(0,3),Z.qt03ps=[cV(0,0),cV(0,wH),cV(wW,0),cV(wW,wH)];for(let t=0;t<Z.qt03nP;t++)Z.qt03ps.push(cV(R.i(.1*wW,.9*wW),R.i(.1*wH,.9*wH)));Z.qt03ps.sort((t,e)=>t.x-e.x),Z.bLW=1,Z.eTP={},Z.eTP.i=!0,Z.eTP.r=!0,Z.rDM={},Z.rDM.f=!1,Z.rDM.o=!1,Z.rDM.l=!1,fP=R.d(),Z.rDM.f=!0,Z.grad.rLM=!0,Z.grad.rLM=!1,Z.rOCT=200,Z.rOSWc=R.c([.05,.1,.2,.2]),Z.rOSWc=.2,Z.rOSW=.1*Z.rOSWc,Z.rCT=255,Z.rBM=BLEND,Z.rSA=R.c([PI/2,PI/2,PI/2,.1*PI,.05*PI]),Z.rSCA=[.2,.4,.6,.8,1,1.2,1.4],Z.rLDmM=[.12,.32],Z.rLWmM=[Z.bLW,5*Z.bLW],Z.pKSDM={},Z.pKSDM.f=!1,Z.pKSDM.o=!0,Z.pKSDM.l=!1,Z.pkShFusePA=.175;let B=R.c([.1,.1,.1,.2,.2,.2,.2,.5]);Z.iOSW=.25*B,fP=R.d(),fP=.3,Z.n={},Z.n.nk=R.c([.25,.5]),Z.grad.pkLM=!0,Z.iCT=255,Z.rILDW=!0,Z.rOW=R.d()<.5,Z.n.pkNFk1=R.c([.0025,.0025,.005,.0085])*Z.n.nk,Z.n.pkNFk1=85e-6*Z.n.nk,Z.n.pkNFk1v=Z.n.pkNFk1*sH,Z.n.pkDistN=R.c([.25,.5,.9]),Z.n.pkDistN=.9,Z.n.pkNFk2=R.c([5e-4,5e-4,.001,.002])*Z.n.nk,Z.n.pkNFk2=4e-5*Z.n.nk,Z.n.pkNFk2v=Z.n.pkNFk2*sH,Z.n.pkSh2DM=R.d()<.5,Z.n.rNFk1=10*R.c([.05,.025,.05,.075]),Z.n.pkOAdj=.385*(Z.pKSDM.l?2:1),Z.dis=!1,Z.disT=90,Z.sh.shAB=!0,Z.sh.shBx=R.n(2,5)*R.rSg(),Z.sh.shBy=R.n(2,5)*R.rSg(),Z.sh.shK=1.05,Z.sh.shBlEqA=.6,Z.sh.shBlEqB=.68,Z.sh.shBlEqC=.5,Z.sh.shG=Z.sh.shBW?1.65:1.18,Z.sh.shBr=-.22255,Z.sh.shCon=.331329,Z.sh.shK=1.05,Z.sh.shBlEqA=.55,Z.sh.shBlEqB=.68,Z.sh.shBlEqA=.8,Z.sh.shBlEqB=.55,Z.sh.shBlEqC=1.25,Z.sh.shG=Z.sh.shBW?1.65:1.08,Z.sh.shBr=-.26255,Z.sh.shCon=.21329,Z.sh.shBr=.1,Z.sh.shCon=.18,Z.sh.shG=2.9,Z.sh.shBr=.02,Z.sh.shCon=.31,Z.sh.shG=2.8,Z.sh.shBr=-.22,Z.sh.shCon=.17,Z.sh.shG=1.12,Z.sh.shBlEqA=.95,Z.sh.shBlEqB=.45,Z.sh.shBr=-.18,Z.sh.shCon=.18,Z.sh.shG=1.35,Z.sh.cc=R.c([0,0,0,1,1]),Z.sh.kBW=.2,Z.shp={...Z.sh},Z.setV=!1,rURL(),Z.autoPlayTimerId=setInterval(()=>{Z.autoPerform&&perform()},4*Z.beatInterval)}