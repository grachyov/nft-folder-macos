{
  "kind" : "p5js100",
  "screensaverFileName" : "Ingress",
  "value" : "let hash=tokenData.hash;let seed=parseInt(tokenData.hash.slice(0,16),16);class Rnd{constructor(){this.useA=false;let sfc32=function(e){let a=parseInt(e.substr(0,8),16);let b=parseInt(e.substr(8,8),16);let c=parseInt(e.substr(16,8),16);let d=parseInt(e.substr(24,8),16);return function(){a|=0;b|=0;c|=0;d|=0;let t=(((a+b)|0)+d)|0;d=(d+1)|0;a=b^(b>>>9);b=(c+(c<<3))|0;c=(c<<21)|(c>>>11);c=(c+t)|0;return(t>>>0)\/4294967296}};this.prngA=new sfc32(tokenData.hash.substr(2,32));this.prngB=new sfc32(tokenData.hash.substr(34,32));for(let i=0;i<1e6;i+=2){this.prngA();this.prngB()}}rD(){this.useA=!this.useA;return this.useA?this.prngA():this.prngB()}rN(a,b){return a+(b-a)*this.rD()}rI(a,b){return Math.floor(this.rN(a,b+1))}rB(p){return this.rD()<p}}let R=new Rnd();var dW=window.innerWidth,dH=window.innerHeight,d=Math.floor(Math.min(dW,dH)),sp,sArr=[],mOff,S=30,b=1,bOff=.05,bVal,ang,sRot=[],cam,an,gyro=false,sym,sSp,P,ico=true,ga,w,cD=d\/4,fov,rX=0,rY=0,fovI,rXi,rYi,rXo,rYo,rC=true;const vs='attribute vec3 aPosition;attribute vec2 aTexCoord;varying vec2 vTexCoord;void main(){vTexCoord=aTexCoord;vec4 positionVec4=vec4(aPosition,1.0);positionVec4.xy=positionVec4.xy*2.0-1.0; gl_Position=positionVec4;}',fs='precision mediump float;varying vec2 vTexCoord;uniform sampler2D iP;uniform vec2 dl;const float Pi=6.28318530718;float rnd(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}void main(){vec4 col=vec4(0.0);float tt=0.0;float off=rnd(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float pc=(t+off-0.5)\/30.0;float w=1.0-abs(pc);vec4 spl=texture2D(iP,vTexCoord+dl*pc);spl.rgb*=spl.a;col+=spl*w;tt+=w;}gl_FragColor=col\/tt;gl_FragColor.rgb\/=gl_FragColor.a+0.00001;}';class Spot{constructor(x,y,z,r,c,m,xOff,yOff,rOff){this.x=x;this.y=y;this.z=z;this.r=r;this.c=c;this.m=m;this.xOff=xOff;this.yOff=yOff;this.rOff=rOff;this.grow=true}grow(){this.r++}}let pC=[],bckCol,p;function setup(){p5.disableFriendlyErrors=true;frameRate(30);noiseSeed(seed);canvas=createCanvas(dW,dH,WEBGL);canvas.id('p5canvas');iC=createGraphics(d,d,WEBGL);sC=createGraphics(d,d,WEBGL);iC.pixelDensity(.5);sC.pixelDensity(1);pixelDensity(1);blur=sC.createShader(vs,fs);sC.shader(blur);noStroke();iC.noStroke();sC.noStroke();colorMode(HSB);iC.colorMode(HSB);iC.ortho(-d\/2,d\/2,-d\/2,d\/2,-5*d,5*d);p=R.rI(1,44);if(p<9)pC.push('#0B1626','#2F1517');let pc=p==1?['#4599B5','#A83882','#B4DDDD','#DBBEF2']:p==2?['#4599B5','#A84B28','#B4DDDD','#C4E4A2']:p==3?['#4599B5','#A84B28','#B4DDDD','#FBE08E']:p==4?['#4599B5','#AD261A','#B4DDDD','#FF552B']:p==5?['#AD261A','#967038','#FF552B','#C4E4A2']:p==6?['#AD261A','#A84B28','#FBE08E','#FF552B']:p==7?['#A84B28','#A83882','#DBBEF2','#FBE08E']:p==8?['#A84B28','#967038','#FBE08E','#C4E4A2']:p==9?['#010e28','#1F0B03','#54713d','#768736','#f7b036','#ee7237']:p==10?['#140000','#021c13','#003924','#005841','#750100','#990100','#d7bb30','#ccae00']:p==11?['#1D1702','#2B0426','#650427','#AD2C00','#ddac0a','#c6c339','#E55130']:p==12?['#2F1517','#0B1626','#68fdee','#D4FFDC','#DDFFFF','#FF1500','#05ffff']:p==13?['#200e36','#FDF7C5','#366290','#E27D52','#D3EAC0','#EDC557','#A8DAB9']:p==14?['#F2EFC9','#F5F8F3','#8CBDBD','#C5D8AB','#F3DFAD','#D1E6D5']:p==15?['#131111','#0c120c','#232120','#03d36b','#232323','#131b13','#181611','#1a131b']:p==16?['#000608','#030F0B','#141414','#58B1A6','#3B1D2E','#2C081E','#1A0210']:p==17?['#200A0E','#080811','#006978','#170F08','#FBFBD6','#02E7CA','#729C9D']:p==18?['#0A0A3D','#041604','#00C075','#87C000','#F9BD27','#FE8900','#FE003B']:p==19?['#6A0002','#14060B','#664C4C','#EF3B01','#C11900','#A20005']:p==20?['#080808','#D7EBBA','#FE4D4F','#FB9039','#F8D322','#ECE473']:p==21?['#000000','#0B1626','#68D1E6','#A6DAD7','#DFE3CB','#F2852F','#F96800']:p==22?['#000000','#2F1517','#2AABCF','#6CBAB5','#C3CAA1','#E54508','#F32A00']:p==23?['#200e36','#F2EFC9','#e04372','#5aa9e6','#4a4e69','#e04372','#e6b953']:p==24?['#1A1A1A','#8B2217','#5D8B69','#87A55D','#BEB259','#F1C359']:p==25?['#333333','#040207','#EFA72F','#EF7717','#77BFA7','#FBEAB5','#5D402E']:p==26?['#1E1E3D','#69493B','#009FAF','#CB323E','#EA6740','#ECC850']:p==27?['#513F63','#009FAF','#69493B','#CB323E','#EA6740','#ECC850']:p==28?['#19197F','#818769','#0D232F','#FB3950','#F4B248','#1BBAB8']:p==29?['#1E1E3D','#292B30','#592D2D','#DEB968','#FEFDDE','#3D4046']:p==30?['#040207','#ABCDBF','#60A5AA','#FAEDC1','#5F5850','#C0B297']:p==31?['#000000','#ABCDBF','#60A5AA','#FAEDC1','#5F5850','#C0CB94']:p==32?['#1A1A1A','#F9CF88','#FE9B5A','#F46249','#EC2F3B','#569C9E']:p==33?['#636363','#8CCBAC','#9C8C68','#FDA5A1','#9E7B52','#E1CC92']:p==34?['#000000','#8CCBAC','#9C8C68','#FDA5A1','#9E7B52','#E1CC92']:p==35?['#1A1A1A','#323232','#FF8B00','#000000','#649EE8','#917FFF']:p==36?['#272727','#909066','#FE9C2D','#F46117','#FEFDC6','#9CC8AB']:p==37?['#020202','#FBF6C4','#09BEBB','#12737C','#28211E','#FB344B']:p==38?['#000000','#3C1B01','#F92900','#F1D593','#85B7B0','#EFD7A7']:p==39?['#000000','#1A1A1A','#F35C4B','#F6A440','#F9C965','#FDE4AC','#FFFFB1']:p==40?['#330000','#DFE3CB','#F96800','#F2852F','#A6DAD7','#68D1E6']:p==41?['#000000','#EBE4CD','#764E37','#DF8D78','#F0D3AE','#C4DFDB']:p==42?['#020202','#1A1A1A','#605274','#8DB1C4','#F8BE75','#E4615B','#D0303C']:p==43?['#0D1626','#091425','#051738','#204E75','#005151','#A0995F']:['#000000','#7F7F7F','#000000','#7F7F7F','#000000','#E5E5E5'];pC.push(...pc);let pcEnd=pC.length-1;for(ii=0;ii<3;ii++)for(i=pcEnd-1;i<=pcEnd;i++)pC.push(pC[i]);let satShift;if(R.rD()>.98){satShift=R.rI(0,10);for(i=0;i<pC.length;i++)pC[i]=color(hue(pC[i]),satShift,brightness(pC[i]))}let c=R.rI(0,1);bckCol=color(pC[c]);pC.splice(c,1);P=R.rD()>.8?1:R.rD()>.8?2:0;sSp=R.rD()>.95?true:false;sp=sSp==true?R.rI(500,1000):R.rI(10,20);let NoiseFeat=R.rD()>.79?true:false;let tmp=R.rD();w=tmp<.30?4:tmp<.45?6:tmp<.6?20:tmp<.7?8:tmp<.8?80:tmp<.85?10:tmp<.9?320:tmp<.95?12:tmp<.97?16:tmp<.98?1280:tmp<.99?32:64;ico=w==20||w==80||w==320||w==1280?true:false;sym=R.rI(0,2);fov=R.rN(.4,.9);tmp=R.rD();let com=tmp>.83?3:tmp>.67?2:tmp>.5?1:tmp>.45?8:tmp>.4?7:tmp>.25?6:tmp>.1?4:5;if(com==1){ang=-PI\/4;rY=rX==PI\/2?0:PI\/w}if(com==2){ang=-PI\/4;rY=-TWO_PI\/w;rX=0}if(com==3){ang=-PI\/4;rY=w%4==0?0:-PI*4\/w;rX=0}if(com==4){ang=PI\/4;rY=w==4?PI\/2:-TWO_PI\/w}if(com==5){ang=PI\/4;rY=PI\/w}if(com==6){ang=R.rN(0,PI);rY=-PI\/w;fov=rX==0?constrain(fov,.09,3\/w+.3):fov}if(com==7){ang=R.rN(0,PI);rY=TWO_PI\/w}if(com==8){ang=R.rN(0,PI);rX=PI\/2;rY=-TWO_PI\/w}bOff=R.rN(.01,.12);bVal=R.rN(0,.5);mOff=R.rN(.003,.006);for(i=0;i<sp;i++){let tSpot=new Spot(R.rI(-d\/2,d\/2),R.rI(-d\/2,d\/2),R.rI(-d\/5,d\/6),1,0,R.rI(0,999),R.rN(4,10),R.rN(4,10),R.rN(0,999));sArr.push(tSpot)}for(zz=0;zz<d\/5;zz++)for(i=0;i<sArr.length;i++){if(sArr[i].grow){sArr[i].r+=1;for(j=0;j<sArr.length;j++){if(i!=j){let d=dist(sArr[i].x,sArr[i].y,sArr[j].x,sArr[j].y);let dr=sArr[i].r+sArr[j].r;if(d<dr)sArr[i].grow=false}}}}if(NoiseFeat){let spNoise=R.rI(40,400);for(i=0;i<spNoise;i++){let tSpot=new Spot(R.rI(-d\/2,d\/2),R.rI(-d\/2,d\/2),R.rI(d\/5,d\/2),R.rI(d\/275,d\/175),0,R.rI(0,999),R.rN(2,5),R.rN(2,5),R.rN(0,999));sArr.push(tSpot)}sp+=spNoise}rXo=R.rN(-.005,.005);rYo=R.rN(-.005,.005);cam=createCamera();s=createVector(.35,.35);s.rotate(ang);rX+=.00001;rY+=.00001;fovI=fov;rXi=rX;rYi=rY;ga=createModel();if(typeof(DeviceOrientationEvent)!=='undefined'&&typeof(DeviceOrientationEvent.requestPermission)==='function'){iC.pixelDensity(.2);sC.pixelDensity(.4);if(navigator.userAgent.indexOf(\"Safari\")!=-1)pixelDensity(.5);else pixelDensity(.7);DeviceOrientationEvent.requestPermission().catch(()=>{let btn=createButton(\"Tap to allow access to sensors for an immersive interaction experience. Consider using Chrome, as Safari may be lagging.\");btn.style('font-size',d\/25+'px');btn.size(d*.618,d*.382);let btnCol='#00000055';btn.style('background-color',btnCol);btn.mouseOver(()=>btn.style('background-color: #00000085'));btn.mouseOut(()=>btn.style('background-color',btnCol));btn.style('color:#eeeeee');btn.style('border:none');btn.style('border-radius',d\/50+'px');btn.style('line-height: 1.6');btn.style('padding: 0 '+d\/20+'px');btn.style('font-weight:lighter');btn.mousePressed(requestAccess);btn.center();throw error;}).then(()=>{permissionGranted=true})}else{permissionGranted=true}}function draw(){iC.clear();iC.background(bckCol);if(mouseIsPressed&&(mouseButton==CENTER)){fov+=map((pmouseY-mouseY),-d,d,1,-1)}if(keyIsDown(LEFT_ARROW))rY-=.02;if(keyIsDown(RIGHT_ARROW))rY+=.02;if(keyIsDown(UP_ARROW))rX+=.02;if(keyIsDown(DOWN_ARROW))rX-=.02;if(keyIsDown(189))fov+=.01;if(keyIsDown(187))fov-=.01;fov=constrain(fov,.1,.93);perspective(PI*fov,dW\/dH,.01,d*10);cam.setPosition(0,0,0);if(xp)cam.lookAt(xp,yp,zp);rotateX(rX);rotateY(rY);for(i=0;i<sp;i++){let col=color(pC[i%pC.length]);iC.fill(col);Xnoise=map(noise(sArr[i].m,i),0,1,-d\/sArr[i].xOff,d\/sArr[i].xOff);Ynoise=map(noise(sArr[i].m,i+200),0,1,-d\/sArr[i].yOff,d\/sArr[i].yOff);Rnoise=map(noise(sArr[i].m,i+sArr[i].rOff),0,1,-sArr[i].r,sArr[i].r);if(P==1){sArr[i].y=sArr[i].y<d\/2+sArr[i].r?sArr[i].y+abs(Ynoise\/9):-d\/2-sArr[i].r;shape(sArr[i].x+Xnoise,sArr[i].y,sArr[i].z,sArr[i].r+Rnoise)}else if(P==2){sArr[i].x=sArr[i].x<d\/2+sArr[i].r?sArr[i].x+abs(Xnoise\/9):-d\/2-sArr[i].r;shape(sArr[i].x,sArr[i].y+Ynoise,sArr[i].z,sArr[i].r+Rnoise)}else shape(sArr[i].x+Xnoise,sArr[i].y+Ynoise,sArr[i].z,sArr[i].r+Rnoise);sArr[i].m+=mOff}S=map(noise(b),0,1,.44,.65+bVal);s.setMag(S*933\/d);sC.shader(blur);blur.setUniform('iP',iC);blur.setUniform('dl',[s.x,s.y]);sC.rect(-d\/2,-d\/2,d\/2,d\/2);clear();textureMode(NORMAL);texture(sC);model(ga);b+=bOff;if(rC){rX+=rXo;rY+=rYo}}function requestAccess(){DeviceOrientationEvent.requestPermission().then(response=>{if(response=='granted'){permissionGranted=true}else{permissionGranted=false}}).catch(console.error);this.remove()}var pDif;function touchMoved(){if(touches.length<=1&&!gyro){rX+=map((pmouseY-mouseY),d\/4,-d\/4,-.25,.25);rY+=map((pmouseX-mouseX),d\/4,-d\/4,-.25,.25)}else{let cDif=Math.abs(touches[0].x-touches[1].x);if(pDif>0){if(cDif>pDif){fov-=.01}if(cDif<pDif){fov+=.01}}pDif=cDif}return false}function keyPressed(){rC=false;if(key=='1'){rY=rYi;rX=rXi;fov=fovI;an=false}if(key=='2')rC=true;if(key=='r')location.reload();if(key=='s'){saveCanvas('Ingress '+hash,'png');setTimeout(()=>location.reload(),100)}}var xp,yp,zp;window.addEventListener('deviceorientation',function(e){if(e.alpha){gyro=true;rC=false;let A=radians(e.alpha);let B=radians(e.beta);let G=radians(e.gamma);let c1=Math.cos(A\/2);let s1=Math.sin(A\/2);let c2=Math.cos(B\/2);let s2=Math.sin(B\/2);let c3=Math.cos(G\/2);let s3=Math.sin(G\/2);let qw=c1*c2*c3-s1*s2*s3;let qx=c1*c2*s3+s1*s2*c3;let qy=s1*c2*c3+c1*s2*s3;let qz=c1*s2*c3-s1*c2*s3;xp=2*qx*qy-2*qw*qz;yp=qw*qw-qx*qx+qy*qy-qz*qz;zp=2*qw*qx+2*qy*qz}});document.addEventListener(\"mousewheel\",(e)=>{if(e.target===p5canvas){e.preventDefault();fov+=map(e.deltaY,-100,100,-.05,.05)}},{passive:false});windowResized=()=>{dW=window.innerWidth;dH=window.innerHeight;d=Math.floor(Math.min(dW,dH));resizeCanvas(dW,dH)};function shape(x,y,z,r,s){iC.push();iC.translate(x,y,z);iC.sphere(r);iC.pop()}function createModel(){return new p5.Geometry(1,1,function createGeometry(){let Vp=(a)=>this.vertices.push(a);let UVp=(a)=>this.uvs.push(a);let Fp=(a)=>this.faces.push(a);if(!ico){let angX=[];let angY=[];for(let j=0;j<w;j++){let an=(j\/w)*TWO_PI;angY[j]=cD*cos(an)*sqrt(2);angX[j]=cD*sin(an)*sqrt(2)}Vp(new p5.Vector(0,-cD,0));if(w%4==0)UVp([0,1]);else UVp([1,1]);for(let j=0;j<w;j++){Vp(new p5.Vector(angX[j],-cD,angY[j]));if(w%4==0){if(sym!=0){if(j%4==1)UVp([1,0]);else if(j%4==3)UVp([0,0]);else UVp([1,1])}else{if(j%4==0)UVp([1,1]);else UVp([R.rI(0,1),R.rI(0,1)])}}else if(sym!=0)if(j%2==0)UVp([0,0]);else UVp([0,1]);else{if(j%6==0)UVp([0,0]);else UVp([R.rI(0,1),R.rI(0,1)])}}Vp(new p5.Vector(angX[0],-cD,angY[0]));if(w%4==0)UVp([1,1]);else UVp([0,0]);for(let j=0;j<w;j++){Vp(new p5.Vector(angX[j],cD,angY[j]));if(w%4==0){if(sym!=0){if(j%4==1)UVp([0,0]);else if(j%4==3)UVp([1,0]);else UVp([0,1])}else{if(j%4==0)UVp([0,1]);else UVp([R.rI(0,1),R.rI(0,1)])}}else if(sym!=0)if(j%2==0)UVp([1,0]);else UVp([1,1]);else{if(j%6==0)UVp([1,0]);else UVp([R.rI(0,1),R.rI(0,1)])}}Vp(new p5.Vector(angX[0],cD,angY[0]));if(w%4==0)UVp([0,1]);else UVp([1,0]);for(let j=0;j<w+1;j++){Fp([0,j+1,j+2])}for(let j=0;j<this.vertices.length-2-w;j++){if(j%2==0&&sym!=0){Fp([j,j+2+w,j+w+1]);Fp([j,j+2+w,j+1])}else{Fp([j,j+1,j+w+1]);Fp([j+1,j+w+1,j+2+w]);if(sym==2)UVp([1,1],[0,0])}}Vp(new p5.Vector(0,cD,0));if(w%4==0)UVp([1,0]);else UVp([0,0]);for(let j=0;j<w+1;j++){Fp([this.vertices.length-1,this.vertices.length-(j+1),this.vertices.length-(j+2)])}}else{let subDiv=w==20?0:w==80?1:w==320?2:3;let t=(1+sqrt(5))\/2;for(let i=0;i<4;i++){Vp(new p5.Vector(0,i&2?-1:1,i&1?-t:t));if(sym==2)UVp([i&1?1:0,i&3?0:1]);else if(sym==1)UVp([i&2?0:1,i&1?0:1]);else UVp([R.rI(0,1),R.rI(0,1)])}for(let i=4;i<8;i++){Vp(new p5.Vector(i&2?-1:1,i&1?-t:t,0));if(sym==2)UVp([i&2?0:1,i&1?1:0]);else if(sym==1)UVp([i&2?0:1,i&1?0:1]);else UVp([R.rI(0,1),R.rI(0,1)])}for(let i=8;i<12;i++){Vp(new p5.Vector(i&1?-t:t,0,i&2?-1:1));if(sym==2)UVp([i&1?1:0,1]);else if(sym==1)UVp([i&2?0:1,i&1?0:1]);else UVp([R.rI(0,1),R.rI(0,1)])}this.faces.push([0,2,8],[0,8,4],[0,4,6],[0,6,9],[0,9,2],[2,7,5],[2,5,8],[2,9,7],[8,5,10],[8,10,4],[10,5,3],[10,3,1],[10,1,4],[1,6,4],[1,3,11],[1,11,6],[6,11,9],[11,3,7],[11,7,9],[3,5,7]);if(subDiv){for(let j=0;j<subDiv;j++){let nuVerts=[this.vertices[0]];let newFaces=[];let newUVs=[];let check=(p,a)=>{for(let ii=0;ii<a.length;ii++)if(p.x==a[ii].x&&p.y==a[ii].y&&p.z==a[ii].z)return ii;return p};let gM=(v1,v2)=>p5.Vector.lerp(v1,v2,.5);for(let i=0;i<this.faces.length;i++){let facesIndex=[];const insert=(c)=>{if(typeof c=='number'){facesIndex.push(c)}else{facesIndex.push(nuVerts.length);nuVerts.push(c)}};let nuVec1=gM(this.vertices[this.faces[i][0]],this.vertices[this.faces[i][1]]);let nuVec2=gM(this.vertices[this.faces[i][1]],this.vertices[this.faces[i][2]]);let nuVec3=gM(this.vertices[this.faces[i][2]],this.vertices[this.faces[i][0]]);insert(check(nuVec3,nuVerts));insert(check(this.vertices[this.faces[i][0]],nuVerts));insert(check(nuVec1,nuVerts));insert(check(this.vertices[this.faces[i][1]],nuVerts));insert(check(nuVec2,nuVerts));insert(check(this.vertices[this.faces[i][2]],nuVerts));newFaces.push([facesIndex[0],facesIndex[1],facesIndex[2]],[facesIndex[2],facesIndex[3],facesIndex[4]],[facesIndex[4],facesIndex[5],facesIndex[0]],[facesIndex[2],facesIndex[4],facesIndex[0]])}for(let i=0;i<nuVerts.length;i++){if(sym==2)newUVs.push([i&3?1:0,i&3?1:0]);else if(sym==1)newUVs.push([i&1?0:1,R.rI(0,1)]);else newUVs.push([R.rI(0,1),R.rI(0,1)])}this.vertices=nuVerts;this.faces=newFaces;this.uvs=newUVs}}}this.gid='gallery'})}"
}