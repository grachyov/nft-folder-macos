{
  "kind" : "p5js100",
  "screensaverFileName" : "Leggenda",
  "value" : "var e,t,f,r,l,o,n,d,i,a,s,h,p=Math.min,c=Math.max;const{hash:b}=tokenData,x=Uint32Array.from([0,0,0,0].map(((e,t)=>parseInt(b.substr(8*t+2,8),16)))),u=(e,t)=>(void 0===e?(e=0,t=1):t=t||0,e+(e=>{let t,f=x[3];return x[3]=x[2],x[2]=x[1],x[1]=t=x[0],f^=f<<11,f^=f>>>8,x[0]=f^t^t>>>19,x[0]\/4294967296})()*(t-e));let v=null,g=!1;const y=(e=0,t=1)=>{var f=Math.sqrt,r=Math.log;if(g){g=!1;let f=v;return v=null,e+t*f}{let l=0,o=0,n=0;do{l=u(-1,1),o=u(-1,1),n=l*l+o*o}while(1<=n||0===n);let d=f(-2*r(n)\/n);return v=o*d,g=!0,e+t*(l*d)}},w=e=>u()<e;let k,j,S=\"1b3b4bd40000b68762eef2f6e6e0dae0b299eda67de2725bz0505041d34611f487d237ba133b2cce6e6e6fdd692fb3640z1d2f53ec5c23fdc449f5f1ebf8b8a03cb8a472c1c65898c1zffbb33f1faeea8dadc457b9d1d3557031927424b54042a2bz26437fffcc00d2292effffff0000001884bffefddfd9381ezccdbdc9ad1d480ced7007ea70032493d5a80ee6c4d293241zd00000fefefa3f88c5032b43136f6337323e96c8a2001242z0c18211b2a41324a5fccc9dc3f88c5f49d37f22b29d72638z05668d02809000a89602c39af0f3bdf7e7cefffaf000bbd8zff8f9effa8b5ffbdc9ffd5d1ffecdbe30022ffd0b3ffb9a3ff9e8fff8f8f343434z3f3f37d6d6b1f2e0b6e6a100f24500\".split`z`.map((e=>e.match(\/.{6}\/g).map((e=>\"#\"+e))));const m=e=>{let t=e.substring(1).match(\/.{1,2}\/g).map((e=>parseInt(e,16)\/255)).map((e=>.03928>=e?e\/12.92:Math.pow((e+.055)\/1.055,2.4)));return.2126*t[0]+.7152*t[1]+.0722*t[2]},z=e=>{let t=~~u(S.length);return k=S[t],t},M=e=>k[~~u(k.length)],W=e=>j[~~u(j.length)],H=(e,f=.5,r,l)=>{t();let o=360+hue(e),n=saturation(e),d=brightness(e),i=constrain;return r=r||alpha(e),o=y(o,4*f)%360,n=i(y(n,4*f),.01,100),d=i(y(d,4*f),.01,100),l||(r=i(y(r,f\/10),1e-4,1)),[o,n,d,r]};var C=t=>({d(t,f,r=K.j){o(r),n();for(let r=0;r<=t;r+=e(5))s(r,0,e(y(10,.5))),s(r,f,e(y(10,.5)));for(let r=0;r<=f;r+=e(5))s(0,r,e(y(10,.5))),s(t,r,e(y(10,.5)))}});let E=(e,t,f)=>c(p(e,f),t),I=(e,t,f,r,l)=>(e-t)*(l-r)\/(f-t)+r;var O=t=>({d(t,f){let r=K.h?K.j:W();d(e(10));for(let l=0;100>l;l++){o(H(K.f,1,u()));let l=~~u(5,25);for(let r,o=0;o<l;o++)r=e(abs(3*y())),s(u(t),u(f),r);let n=H(r,1,.01);o(n),i(n),rect(0,0,t,f)}}});let B=[2,3,5,7,11,13,17,19,23,29,31];const L=(e,t)=>{let f=1,r=0;for(;0<e;)f\/=t,r+=f*(e%t),e=~~(e\/t);return r},V=(e,t,r,l)=>{let o=f(e,t),n=f(0,0),d=f(r,0),i=f(0,l),a=f(r,l);return n.prev=i,n.next=d,d.prev=n,d.next=a,a.prev=d,a.next=i,i.prev=i,i.next=n,{vertexes:[n,d,a,i],position:o}},P=e=>{let t;for(let f of e)t&&(f.prev=t,t.next=f),t=f;e[0].prev=t,t.next=e[0]},$=(e,t)=>{let f={position:e.position.copy()},r=~~u(0,e.vertexes.length),l=~~u(3,e.vertexes.length-3.1),o=e.vertexes[r],n=o;for(let e=0;e<l;e++)n=n.next;t&&(n===o||n===o.prev||n===o.next)&&(n=o.next.next);let d=y(.5,.1),i=y(.5,.1),a=h(o,o.prev,d),s=h(n,n.prev,i),p=a.copy(),c=s.copy(),b=[a],x=o;for(;x!==n;)b.push(x),x=x.next;for(b.push(s),P(b),e.vertexes=b,a=p,s=c,f.vertexes=[s],x=n;x!==o;)f.vertexes.push(x),x=x.next;return f.vertexes.push(a),P(f.vertexes),f};let A={c:(t,f)=>{let r=w(.5),l=~~((r?f:t)\/(r?K.c:K.b)*u(20,100));return{d(t,f){o(K.j),n();let d=r?[f,t]:[t,f],i=d[0]\/l;for(let t=0;t<=l;t+=1)for(let f=0;f<=+d[1];f+=e(5)){let l=e(y(10,.5)),o=r?[f,t*i]:[t*i,f];o.push(l),s(...o)}}}},d:t=>({d(t,l){let o=r(t,l),n=e(u(-120,120)),d=f(0,0),i=f(t,0),s=f(0+n,l),p=f(t+n,l);o.fill(K.j),o.noStroke();let c=1\/(d.dist(i)\/e(y(40)));for(let t=2*-c;t<=1+2*c;t+=c){let f=h(d,i,t),r=h(s,p,t),l=1\/(f.dist(r)\/e(5));for(let t,n=0;1>=n;n+=l)t=h(f,r,n),o.ellipse(t.x,t.y,e(y(10,.5)))}a(o,0,0,t,l,0,0,~~t,~~l),C().d(t,l)}}),e:(t,r)=>{let l=~~(t\/K.b*u(40,50)),d=~~(r\/K.c*u(40,50));return{d(t,r){o(K.j),n(),w(.1)&&(l*=6),w(.1)&&(d*=6);let i=t\/l,a=r\/d,p=~~u(0,3);if(0==p||2==p)for(let o=0;o<=l;o+=1){let l=f(o*i,0),n=f(t-o*i,r),d=1\/(l.dist(n)\/e(5));for(let t,f=0;1>=f;f+=d)t=h(l,n,f),s(t.x,t.y,e(y(10,.5)))}if(1==p||2==p)for(let l=0;l<=d;l+=1){let o=f(0,l*a),n=f(t,r-l*a),d=1\/(o.dist(n)\/e(5));for(let t,f=0;1>=f;f+=d)t=h(o,n,f),s(t.x,t.y,e(y(10,.5)))}}}},y:O,g:t=>({d(t,f){let l=r(t,f);l.colorMode(HSB);let o=~~u(10,20),n=~~u(10,20),d=t\/o,i=f\/n,s=d+i;s\/=K.h?4:2;let h=(f,r)=>{let o=y(s,.5*s);l.push(),l.translate(f,r),l.rotate(u(TWO_PI)),l.stroke(K.h?K.j:H(M(),1)),l.strokeWeight(e(5));for(let f=-o;f<o;f+=e(10))l.line(0,f,y(t\/5,t\/20)+e(y(20,10)),f+e(y(20,10)));l.pop()};K.h||O().d(t,f);for(var p=0;p<=n;p++)for(var c=0;c<=o;c++)h(c*d,p*i);a(l,0,0,t,f,0,0,~~t,~~f),C().d(t,f)}}),h:t=>({d(t,l){let o=r(t,l);o.colorMode(HSB);let n=K.f,d=K.j;(K.i||!K.h&&w(.5))&&(n=360,d=0),o.fill(n),o.stroke(d),f(0,0),f(t,0),f(0,l),f(t,l);let i=r=>{let n=l*r,d=f(0,n+e(100*y())),i=f(t,n+e(100*y())),a=f(0,l),s=f(t,l),p=1\/~~u(6,9),c=[];c.push(d);for(let e,f=0;1>f;f+=p)e=h(d,i,f),e.y+=y()*t\/10,c.push(e);c.push(i);for(var b=0;b<2*l;b+=e(20)){o.strokeWeight(e(0===b?10:5)),K.i&&o.fill(M()),o.beginShape(),o.vertex(d.x,d.y+b);for(let t of c)o.curveVertex(t.x+e(3*y()),t.y+e(3*y())+b);o.vertex(i.x,i.y+b),o.vertex(s.x,s.y+b),o.vertex(a.x,a.y+b),o.endShape(CLOSE)}};i(y(-.6,.2)),i(y(-.3,.2)),i(y(0,.2)),i(y(.3,.2)),i(y(.6,.2)),a(o,0,0,t,l,0,0,~~t,~~l),C().d(t,l,K.i?K.j:d)}}),f:t=>({d(t,f){let r=B[~~u(B.length)],l=r;for(;l===r;)l=B[~~u(B.length)];let o=[],n=u(400,4e3);for(var a=0;a<n;a++)o.push([L(a,r),L(a,l)]);noFill(),d(e(K.a?15:10));for(let e of o)i(H(K.i?W():K.j)),point(e[0]*t,e[1]*f)}}),i:(t,f)=>{let r=K.b*K.c,l=~~I(t*f,1,r,4,20);return{d(t,f){let r=[V(0,0,t,f)];for(let e,t=0;t<l;t++){e=[];for(let f of r)e.push(f),e.push($(f,2>t));r=e}for(var n=0;5>n;n++)for(let t of r)t.position.x+=e(2*y()),t.position.x+=e(2*y());let a=e(I(l,4,20,5,2)),s=0,h=360;!K.i&&(K.h||w(.5))&&(a*=2,s=K.j,h=K.f),d(a),i(s),o(h);for(let e of r){K.i&&o(H(M())),beginShape();for(let t of e.vertexes)vertex(e.position.x+t.x,e.position.y+t.y);endShape(CLOSE)}}}},m:C,j:(t,f)=>{let l=Math;t>f?K.b:K.c;let o=l.max(t,f),n=l.min(t,f)\/o;n=u(n\/4,n\/2)*(K.i?.5:.75);let d=~~I(2-n,1.75,1.95,200,300),i=(2-n)\/d,s=[],h=[u(),u()],p=l.PI\/180,c=u(360);for(let e=0;360>e;e+=.25){let t=l.cos(p*e+c),f=l.sin(p*e+c);s.push([t,f])}return{d(t,f){let l=r(t,f);l.colorMode(HSB),l.strokeWeight(e(i*o*(K.i?400:150))),o=max(t,f),h[0]*=t,h[1]*=f,K.h&&l.stroke(K.j),l.noFill();for(let t=2;t>=n;t-=i){K.i?l.stroke(H(W())):!K.h&&l.fill(360),l.beginShape();for(let f of s){let r=f[0]*t*o+h[0],n=f[1]*t*o+h[1];l.vertex(r+e(5*y()),n+e(5*y()))}l.endShape(CLOSE)}l.fill(K.h?K.f:360),l.noStroke();let d=~~u(20,50);for(let r=0;r<d;r++)l.ellipse(u(t),u(f),e(abs(10*y())));a(l,0,0,t,f,0,0,~~t,~~f),C().d(t,f)}}}},F={y:5,m:5,c:10,d:10,e:10,f:10,g:15,h:15,i:15,j:15},U=[];for(let[e,t]of Object.entries(F))for(let f=0;f<=t;f++)U.push(e);var q=e=>{let t=U[~~u(U.length)];return[A[t],t]};let D,G,J,Q,R,T,_,K={},N=[];setup=x=>{let v,g;t=e=>colorMode(HSB),f=createVector,r=createGraphics,l=translate,o=fill,n=noStroke,d=strokeWeight,i=stroke,a=image,s=ellipse,h=p5.Vector.lerp,R=(e=>{let t=20,f=w(.5),r=~~u(10,40);f&&(t+=10,r*=1.5);let l=w(.2)?1:~~u(2,t-10),o=~~u(3,t),n={a:f,b:l,c:o,d:r,e:z(),f:w(.2)?\"#ffffff\":M(),g:u(.02,.2),h:w(.3),i:!1};K=n;let d=m(n.f);var i;n.j=.2>d?\"#fefefeee\":\"#030308ee\",n.k=.2>d?\"#030308ee\":\"#fefefeee\",i=n.f,j=k.filter((e=>2<((e,t)=>{let f=m(e),r=m(t);return(c(f,r)+.05)\/(p(f,r)+.05)})(i,e))),n.h?(w(.5)&&(n.j=W()),w(.5)&&([n.j,n.f]=[n.f,n.j])):n.i=w(.3);let a=[];for(let e=0;e<o;e+=1){a[e]=[];for(let t=0;t<l;t+=1)a[e][t]=!1}for(let e=0;e<o;e+=1)for(let t=0;t<l;t+=1)if(!1===a[e][t]){let f=e;for(;!1===a[f][t]&&(f+=1,!(f>=o-1)););for(let r=e;r!=f;){let e=E(1+~~u(2,.75*(f-r)),1,f-r),o=a[r].slice(t).indexOf(!0);-1===o&&(o=l-t);let n=E(1+~~u(2,o),1,o),[d]=q(),i=d(n,e);i.x=t,i.y=r,i.w=n,i.h=e,N.push(i);for(let f=r;f<r+e;f+=1)for(let e=t;e<t+n;e+=1)a[f][e]=!0;r+=e}}return n})(),R.f=H(R.f,1,1,!0),.6*windowHeight>windowWidth?(v=windowWidth,g=windowWidth\/.6):(v=.6*windowHeight,g=windowHeight),D=v*R.g,G=v-2*D,J=g-2*D,Q=v\/(2048*(R.a?2:1)),e=(e=1)=>e*Q,createCanvas(v,g),noiseSeed(parseInt(b.substr(34,16),16)),t(),T=G\/R.b,_=J\/R.c;let y=e(R.d);for(const e of N)e.x=e.x*T+y,e.y=e.y*_+y,e.w=e.w*T-2*y,e.h=e.h*_-2*y;noLoop()},draw=f=>{t(),background(R.f),document.body.style.backgroundColor=`rgb(${red(R.f)}, ${green(R.f)}, ${blue(R.f)})`,push(),w(.5)&&(l(width\/2,height\/2),rotate(PI),l(-width\/2,-height\/2)),l(D,D),strokeCap(SQUARE),strokeJoin(BEVEL);for(const e of N)push(),l(e.x,e.y),e.d(e.w,e.h),pop();pop(),d(e(1));for(let t=0;t<=height;t+=e(2))i(H(R.k,1,.01,!0)),line(0,y(t,e(10)),width,y(t,e(10)))};"
}