{
  "kind" : "p5js100",
  "screensaverFileName" : "Diatom",
  "value" : "function setup(){function pz(h,s,l){while(h<360){h+=360}let j={c:0,x:0,0:0};j[\"c\"]=(1-Math.abs(2*l-1))*s;if(h<0){h+=360}let hp=h%360\/60;j[\"x\"]=j[\"c\"]*(1-Math.abs(hp%2-1));let m=l-j[\"c\"]\/2;let k=\"cx0,xc0,0cx,0xc,x0c,c0x\".split(\",\")[Math.floor(hp)];return\"rgb(\"+Math.floor((j[k[0]]+m)*255)+\",\"+Math.floor((j[k[1]]+m)*255)+\",\"+Math.floor((j[k[2]]+m)*255)+\")\"}let seed=parseInt(tokenData.hash.slice(16,32),16);function rd(){seed^=seed<<13;seed^=seed>>17;seed^=seed<<5;return(seed<0?~seed+1:seed)%1e4\/1e4}function rn(a,b){return a+(b-a)*rd()}let f=Math.floor;let SEED=parseInt(tokenData.hash.slice(0,16),16);randomSeed(SEED);noiseSeed(SEED);let octaves=f(rn(2,6));noiseDetail(octaves);noFill();noLoop();noCanvas();let bg=\"Orange\";let mycolor=f(rn(0,360));let stacks=Math.max(1,f(rn(0,12))-7);let alpha=Math.min(90,25+f(65\/stacks));let stackdist=[5,10,15,20][f(rn(0,4))];let roto=[-30,-15,0,15,30][f(rn(0,5))];let coloroffset=rn(0,360)\/360*Math.PI*2;let rainbow=Math.max(0,rn(0,100)-98);let c=f(rn(0,2));let cr=Math.max(0,f(rn(0,10)-4));let thickness=Math.max(1,f(rn(0,15))-10);let thickwander=f(rn(0,2));let thickwanderoffset=rn(0,Math.PI*2);let POWER=[5,6,7][f(rn(0,3))];let SCALE=[2,4,6][f(rn(0,3))];let J=[.1,.125,.15][f(rn(0,3))];let T=[.38,.42,.48][f(rn(0,3))];let LAYERS=20;let JUMP=J\/LAYERS;let ARM_TOTAL=T-LAYERS*JUMP;let AGGR=POWER\/LAYERS;STEPS=600-f(rn(0,200));STEPS=f(STEPS\/thickness);STEPS+=STEPS%2;let xin=8;let yin=8;let dpi=100;let w=xin*dpi;let h=yin*dpi;let ns=\"http:\/\/www.w3.org\/2000\/svg\";let svg=document.createElementNS(ns,\"svg\");if(c==0){bg=pz(0,0,1)}else if(c==1){bg=pz(0,0,0)}svg.setAttribute(\"width\",\"100vw\");svg.setAttribute(\"height\",\"100vh\");svg.setAttribute(\"viewBox\",\"0 0 \"+w+\" \"+h);svg.setAttribute(\"style\",\"background-color:\"+bg+\";\");for(let stack=0;stack<stacks;stack+=1){let ga=document.createElementNS(ns,\"g\");ga.setAttribute(\"id\",`lines-${stack}a`);let gb=document.createElementNS(ns,\"g\");gb.setAttribute(\"id\",`lines-${stack}b`);let gg=[ga,gb];this_path=[];for(let step=0;step<STEPS;step+=1){theta=step\/STEPS*PI*2;x=cos(theta)*ARM_TOTAL;y=sin(theta)*ARM_TOTAL;this_path.push([x,y,theta])}let lines=[];for(let step=0;step<this_path.length;step++){newline=[];newline.push(this_path[step]);for(let i=0;i<LAYERS;i+=1){p=newline[newline.length-1];nt=p[2]+(noise(p[0]*SCALE+10,p[1]*SCALE+10,10+stack\/stackdist)*2-1)*AGGR;nx=p[0]+cos(nt)*JUMP;ny=p[1]+sin(nt)*JUMP;newline.push([nx,ny,nt]);p=newline[0];nt=p[2]+(noise(p[0]*SCALE+10,p[1]*SCALE+10,10+stack\/stackdist)*2-1)*AGGR;nx=p[0]+cos(nt+PI)*JUMP;ny=p[1]+sin(nt+PI)*JUMP;newline.unshift([nx,ny,nt])}let newpath=\"\";let path=document.createElementNS(ns,\"path\");let mm=mycolor+Math.sin(this_path[step][2]+coloroffset)*cr*10;if(rainbow>0){mm=step\/STEPS*360+coloroffset}let fg;if(c==0){fg=pz(mm,.8,.2)}else if(c==1){fg=pz(mm,1,.5)}let tw=thickness;if(thickness>2&&thickwander==1){tw=thickness+Math.sin(this_path[step][2]+thickwanderoffset)*2}path.setAttribute(\"style\",`fill:none;stroke-width:${tw};stroke:${fg};stroke-opacity:${alpha}%`);for(let i=0;i<newline.length;i+=1){x=newline[i][0]*w+w\/2;y=newline[i][1]*h+h\/2;let f=\"L\";if(i==0){f=\"M\"}newpath=newpath+`${f} ${x} ${y} `}path.setAttribute(\"d\",newpath);gg[step%2].appendChild(path)}svg.appendChild(gg[0]);svg.appendChild(gg[1]);mycolor+=roto}document.body.appendChild(svg)}"
}