let e="[[[108,0.5854011462070048,{151:0.53,152:-0.93,153:0.66,154:-0.13,155:-0.47,156:-0.45,157:-0.046,158:0.34,159:0.11,160:-0.77,161:0.96,162:-0.43,163:0.87,164:0.98,165:-0.098,166:-0.15,167:0.29,168:0.058,169:0.17,170:0.71,171:-0.25,172:-0.47,173:-0.054,174:0.63,175:0.17,176:0.51,177:-0.66,178:-0.42}],[109,-0.8710975502617657,{151:0.00067,152:0.48,153:0.87,154:-0.40,155:-0.56,156:0.70,157:0.39,158:-0.75,159:-0.20,160:0.13,161:0.72,162:0.85,163:-0.26,164:-0.13,165:0.17,166:0.45,167:0.34,168:0.73,169:-0.82,170:0.70,171:0.49,172:-0.56,173:-0.86,174:-0.033,175:-0.45,176:0.83,177:-0.58,178:-0.24}],[110,-0.4412636994384229,{151:0.42,152:0.56,153:-0.29,154:0.42,155:0.89,156:0.52,157:-0.73,158:0.89,159:0.57,160:0.56,161:0.74,162:-0.80,163:-0.78,164:0.67,165:-0.62,166:0.87,167:0.53,168:0.30,169:0.21,170:-0.70,171:0.98,172:0.58,173:-0.62,174:0.46,175:-0.65,176:-0.17,177:0.43,178:0.90}],[111,0.3275224110111594,{151:0.90,152:0.64,153:1.0,154:-0.62,155:0.13,156:0.38,157:0.99,158:0.93,159:0.72,160:-0.55,161:-0.57,162:0.23,163:0.31,164:0.68,165:-0.56,166:0.83,167:0.70,168:0.75,169:-0.012,170:0.082,171:0.59,172:-0.69,173:-0.68,174:0.82,175:0.024,176:0.024,177:0.29,178:-0.096}],[112,-0.5676303198561072,{151:-0.59,152:-0.10,153:0.46,154:-0.97,155:-1.0,156:-0.66,157:-0.57,158:0.38,159:-0.0067,160:-0.39,161:0.93,162:0.89,163:-0.21,164:0.14,165:-0.91,166:0.98,167:0.32,168:0.13,169:-0.91,170:-0.55,171:-0.89,172:-0.91,173:0.29,174:0.57,175:0.77,176:0.79,177:0.24,178:-0.21}],[113,0.000563332810997963,{151:0.51,152:-0.79,153:-0.65,154:-0.91,155:0.68,156:-0.44,157:-0.89,158:0.22,159:-0.20,160:0.88,161:0.27,162:0.31,163:-0.67,164:-0.67,165:-0.074,166:-0.61,167:0.071,168:-0.99,169:-0.88,170:-0.59,171:0.51,172:-0.87,173:0.90,174:0.26,175:-0.50,176:-0.65,177:0.97,178:0.13}],[114,-0.11176412831991911,{151:0.87,152:-0.24,153:-0.74,154:0.50,155:0.26,156:-0.72,157:0.76,158:-0.50,159:0.29,160:0.97,161:-0.68,162:0.59,163:0.097,164:-0.70,165:0.33,166:0.081,167:0.53,168:0.64,169:-1.0,170:0.64,171:-0.75,172:0.80,173:-0.021,174:0.21,175:0.70,176:-0.54,177:0.81,178:0.99}],[115,0.5584523980505764,{151:-0.38,152:0.66,153:0.48,154:0.72,155:-0.92,156:0.17,157:0.43,158:-0.91,159:0.61,160:-0.69,161:-0.69,162:-0.42,163:0.71,164:0.62,165:0.064,166:0.34,167:-0.92,168:-0.51,169:-0.27,170:-0.61,171:-0.054,172:-0.38,173:0.23,174:0.088,175:-0.73,176:-0.036,177:0.74,178:-0.17}],[116,0.3844562089070678,{151:-0.48,152:0.59,153:-0.66,154:-0.50,155:-0.39,156:-0.66,157:-0.59,158:-0.33,159:0.87,160:-0.18,161:-0.48,162:-0.15,163:-0.13,164:-0.43,165:0.0024,166:-0.44,167:-0.17,168:-0.70,169:-0.54,170:-0.036,171:-0.81,172:-0.86,173:-0.0044,174:-0.025,175:0.73,176:-0.84,177:0.28,178:0.031}],[117,0.93119474966079,{151:0.99,152:-0.96,153:0.13,154:-0.38,155:-0.47,156:0.47,157:0.97,158:0.59,159:0.14,160:-0.38,161:0.70,162:-0.66,163:-0.60,164:-0.27,165:-0.55,166:-0.074,167:-0.89,168:0.72,169:0.98,170:-0.47,171:0.47,172:0.64,173:0.16,174:-0.54,175:0.41,176:0.10,177:-0.91,178:0.84}],[118,-0.39021080266684294,{151:-0.76,152:-0.32,153:0.93,154:-0.57,155:-0.30,156:-0.024,157:-0.78,158:0.097,159:-0.33,160:0.50,161:0.69,162:-0.58,163:0.98,164:-0.52,165:0.46,166:0.022,167:0.77,168:-0.28,169:0.87,170:0.12,171:-0.38,172:0.67,173:0.87,174:-0.66,175:0.77,176:-1.0,177:-0.93,178:-0.92}],[119,0.02151421969756484,{151:-0.12,152:0.44,153:-0.61,154:0.40,155:-0.56,156:0.37,157:-0.085,158:0.91,159:-0.23,160:0.31,161:0.37,162:0.026,163:0.0025,164:0.017,165:-0.42,166:0.61,167:-0.29,168:0.68,169:-0.65,170:-0.45,171:0.019,172:-0.72,173:0.095,174:-0.14,175:0.69,176:-0.56,177:0.42,178:-0.16}],[120,-0.7018214161507785,{151:-0.19,152:-0.27,153:-0.73,154:-0.94,155:-0.68,156:-0.18,157:0.91,158:-0.73,159:0.69,160:0.46,161:-0.60,162:0.43,163:0.84,164:-0.41,165:-0.73,166:0.40,167:0.092,168:-0.67,169:0.99,170:0.50,171:0.60,172:0.85,173:-0.047,174:0.34,175:-0.33,176:0.90,177:-0.20,178:0.64}],[121,0.4541561659425497,{151:-0.80,152:-0.17,153:0.73,154:0.64,155:0.95,156:-0.27,157:-0.97,158:0.40,159:0.61,160:0.95,161:0.16,162:-0.59,163:0.98,164:-0.14,165:-0.93,166:-0.25,167:-0.21,168:-0.16,169:0.42,170:-0.18,171:0.71,172:0.87,173:-0.52,174:0.12,175:-0.090,176:0.69,177:-0.49,178:-0.88}],[122,-0.7831910802051425,{151:0.83,152:-0.92,153:0.85,154:-0.073,155:0.79,156:-0.25,157:-0.72,158:-0.030,159:-0.49,160:0.70,161:0.40,162:0.11,163:-0.19,164:0.51,165:-0.29,166:-0.36,167:-0.74,168:-0.28,169:-0.16,170:-0.31,171:-0.76,172:-0.091,173:-0.83,174:-0.51,175:0.61,176:-0.75,177:-0.82,178:-0.91}],[123,0.8835241165943444,{151:0.065,152:0.59,153:-0.64,154:-0.76,155:-0.40,156:0.70,157:-0.45,158:-0.075,159:0.25,160:0.075,161:-0.68,162:-0.47,163:-0.40,164:-0.42,165:-0.88,166:0.25,167:-0.066,168:-0.21,169:-0.90,170:0.56,171:0.18,172:0.0043,173:-0.29,174:-0.34,175:-0.14,176:0.48,177:0.89,178:-0.32}],[124,-0.5223538698628545,{151:-0.42,152:0.23,153:0.36,154:0.85,155:0.46,156:0.46,157:0.61,158:-0.82,159:-0.94,160:-0.95,161:0.23,162:-0.0061,163:-0.22,164:-0.96,165:0.19,166:0.55,167:0.36,168:0.54,169:-0.52,170:0.23,171:-0.046,172:-0.36,173:-0.95,174:0.23,175:-0.49,176:0.50,177:0.58,178:-0.32}],[125,0.06913559744134545,{151:-0.93,152:0.0020,153:-0.57,154:-0.11,155:0.094,156:-0.049,157:0.54,158:0.67,159:0.33,160:-0.12,161:0.12,162:0.52,163:0.64,164:0.16,165:-0.29,166:0.042,167:-0.92,168:0.57,169:0.75,170:0.37,171:0.58,172:0.65,173:-0.19,174:-0.89,175:0.25,176:0.84,177:0.51,178:-1.0}],[126,-0.021409326698631048,{151:0.81,152:0.45,153:0.48,154:0.76,155:0.65,156:-0.97,157:-0.70,158:-0.38,159:-0.22,160:0.19,161:0.48,162:0.86,163:-0.72,164:-0.24,165:-0.32,166:0.93,167:0.26,168:-0.50,169:0.18,170:0.27,171:-0.39,172:-0.59,173:0.89,174:0.84,175:0.40,176:0.078,177:-0.52,178:-0.53}],[127,-0.1623079590499401,{151:0.025,152:0.11,153:0.75,154:-0.50,155:-0.41,156:-0.97,157:0.088,158:-0.77,159:0.39,160:-0.071,161:0.77,162:-0.19,163:0.49,164:-0.49,165:-0.49,166:-0.82,167:0.48,168:0.50,169:0.15,170:-0.91,171:0.60,172:-0.38,173:-0.96,174:0.65,175:-0.013,176:0.16,177:-0.55,178:0.42}],[128,-0.9497028831392527,{151:-0.71,152:0.26,153:0.75,154:0.036,155:0.82,156:0.34,157:-0.19,158:0.47,159:-0.89,160:0.12,161:0.74,162:-0.24,163:0.28,164:-0.15,165:0.054,166:-0.35,167:-0.31,168:-0.84,169:0.99,170:-0.24,171:0.67,172:-0.26,173:0.14,174:0.27,175:-0.13,176:0.99,177:-0.67,178:0.034}],[129,-0.7863949532620609,{151:0.88,152:0.24,153:0.41,154:0.13,155:-0.59,156:0.82,157:-0.62,158:0.34,159:-0.74,160:-0.62,161:0.61,162:-0.44,163:0.43,164:0.011,165:-0.27,166:-0.28,167:-0.11,168:0.79,169:0.013,170:0.16,171:-0.68,172:0.85,173:-0.76,174:-0.41,175:0.52,176:-0.42,177:0.31,178:-0.31}],[130,-0.15365617303177714,{151:0.18,152:0.40,153:-0.54,154:-0.45,155:-0.51,156:0.92,157:0.93,158:-0.34,159:-0.92,160:0.98,161:0.98,162:0.94,163:-0.44,164:-0.84,165:-0.53,166:0.86,167:0.30,168:-0.13,169:-0.35,170:-0.95,171:0.34,172:-0.38,173:-0.30,174:0.75,175:-0.0055,176:0.39,177:-0.58,178:-0.072}],[131,0.785524704027921,{151:0.16,152:-0.19,153:0.83,154:1.0,155:0.71,156:0.63,157:0.27,158:-0.17,159:0.85,160:-0.32,161:0.73,162:0.10,163:-0.20,164:-0.15,165:-0.83,166:-0.94,167:-0.69,168:0.38,169:-0.81,170:0.26,171:0.65,172:0.029,173:-0.067,174:-0.69,175:0.76,176:-0.81,177:-0.52,178:1.0}],[132,-0.6294162864796817,{151:0.50,152:-0.45,153:-0.058,154:-0.41,155:0.97,156:0.11,157:-0.61,158:0.0070,159:-0.55,160:-0.60,161:-0.37,162:-0.42,163:0.57,164:-0.71,165:-0.18,166:-0.23,167:-0.39,168:-0.94,169:0.14,170:-0.48,171:0.86,172:0.94,173:-0.70,174:0.36,175:0.51,176:-0.12,177:-0.94,178:0.23}],[133,-0.8475298960693181,{151:-0.63,152:-0.27,153:-0.27,154:0.071,155:0.40,156:0.81,157:-0.55,158:-0.84,159:0.61,160:0.89,161:-0.34,162:0.72,163:-0.56,164:0.55,165:-0.30,166:-0.61,167:0.31,168:0.27,169:0.098,170:-0.27,171:0.048,172:-0.26,173:-0.41,174:-0.48,175:-0.57,176:-0.77,177:0.42,178:-0.69}],[134,-0.2540928381495178,{151:0.31,152:0.36,153:-0.30,154:0.82,155:-0.36,156:-0.46,157:-0.96,158:0.52,159:0.58,160:-0.22,161:-0.078,162:0.29,163:-0.98,164:-0.42,165:0.81,166:0.87,167:-0.43,168:-0.66,169:-0.26,170:0.22,171:-0.0011,172:0.57,173:-0.26,174:-0.092,175:0.55,176:-0.47,177:0.65,178:-0.13}],[135,-0.4709586538374424,{151:-0.80,152:-0.32,153:0.23,154:0.30,155:-0.28,156:0.49,157:-0.16,158:-0.091,159:0.78,160:0.46,161:0.51,162:0.68,163:-0.33,164:-0.39,165:0.41,166:-0.50,167:-0.14,168:-0.39,169:-0.44,170:-0.76,171:0.0077,172:0.78,173:0.16,174:0.80,175:-0.20,176:0.53,177:-0.77,178:0.018}],[136,-0.06820563832297921,{151:-0.40,152:0.65,153:-0.26,154:-0.40,155:-0.96,156:-0.93,157:-0.73,158:0.10,159:-0.28,160:-0.41,161:0.068,162:0.47,163:0.0056,164:-0.58,165:-0.98,166:-0.79,167:0.56,168:-0.92,169:0.87,170:-0.73,171:-0.59,172:0.72,173:-0.93,174:1.0,175:-0.68,176:-0.066,177:-0.53,178:0.42}],[137,-0.31763877673074603,{151:0.16,152:0.85,153:-0.10,154:-0.47,155:-0.31,156:-0.47,157:-0.76,158:0.44,159:0.33,160:0.90,161:-0.64,162:0.49,163:-0.032,164:0.80,165:-0.66,166:0.37,167:-0.66,168:0.12,169:-0.18,170:-0.83,171:0.32,172:-0.73,173:-0.48,174:-0.20,175:-0.17,176:0.12,177:-0.63,178:0.38}],[138,-0.8968947851099074,{151:0.65,152:-0.24,153:-0.64,154:0.70,155:0.81,156:-0.78,157:-0.89,158:0.57,159:-0.80,160:-0.89,161:0.78,162:0.15,163:-0.84,164:0.68,165:0.14,166:0.13,167:0.70,168:-0.17,169:-0.92,170:-0.93,171:0.12,172:-0.87,173:0.23,174:-0.82,175:-0.36,176:-0.37,177:0.53,178:-0.91}],[139,-0.6209732447750866,{151:-0.81,152:-0.50,153:0.36,154:-0.64,155:0.94,156:0.51,157:0.12,158:-0.10,159:-0.32,160:-0.18,161:0.80,162:-0.96,163:0.021,164:-0.93,165:-0.32,166:0.91,167:0.76,168:0.60,169:0.98,170:-0.18,171:0.95,172:0.34,173:-0.34,174:-0.013,175:-0.83,176:-0.71,177:0.54,178:-0.52}],[140,0.5357539323158562,{151:0.12,152:0.82,153:0.20,154:0.73,155:-0.30,156:0.11,157:-0.79,158:-0.79,159:-0.082,160:-0.88,161:0.55,162:-0.28,163:-0.74,164:0.087,165:0.43,166:0.085,167:0.095,168:-0.79,169:-0.67,170:0.60,171:-0.55,172:-0.77,173:-0.71,174:-0.33,175:-0.091,176:0.13,177:0.75,178:0.30}],[141,0.6273190658539534,{151:-0.17,152:0.72,153:0.62,154:-0.61,155:-0.88,156:-0.080,157:-0.11,158:-0.79,159:0.41,160:-0.062,161:0.98,162:0.32,163:-1.0,164:-0.29,165:0.92,166:-0.83,167:-0.71,168:0.013,169:-0.096,170:-0.72,171:-0.60,172:0.072,173:0.96,174:0.092,175:-0.38,176:0.73,177:-0.15,178:-0.39}],[142,-0.4922969485633075,{151:0.23,152:0.54,153:0.41,154:0.77,155:0.015,156:-0.37,157:-0.22,158:-0.16,159:-0.98,160:-0.067,161:0.70,162:-0.75,163:-0.33,164:0.30,165:-0.39,166:0.26,167:0.58,168:-0.068,169:-0.17,170:0.77,171:0.92,172:0.12,173:-0.42,174:-0.51,175:0.76,176:0.46,177:0.52,178:0.81}],[143,-0.4057577643543482,{151:0.013,152:0.37,153:-0.67,154:-0.48,155:0.28,156:0.91,157:0.076,158:-0.34,159:0.85,160:-0.26,161:0.76,162:0.31,163:-0.54,164:0.53,165:0.14,166:-0.36,167:-0.98,168:0.47,169:-0.62,170:0.056,171:-0.80,172:0.15,173:-0.25,174:0.80,175:-0.12,176:-0.37,177:-0.42,178:0.17}],[144,0.14829854294657707,{151:-0.16,152:0.72,153:-0.84,154:-0.0094,155:0.76,156:-0.92,157:0.18,158:-0.25,159:-0.85,160:0.54,161:-0.23,162:-0.99,163:0.67,164:0.57,165:-0.11,166:0.79,167:-0.23,168:0.70,169:-0.43,170:-0.98,171:0.11,172:0.14,173:0.61,174:0.24,175:-0.80,176:0.096,177:0.79,178:0.33}],[145,0.8365221484564245,{151:0.18,152:-0.24,153:-0.35,154:0.94,155:-0.084,156:0.20,157:-0.72,158:-0.28,159:-0.24,160:0.44,161:0.64,162:0.41,163:0.62,164:-0.88,165:-0.032,166:0.12,167:-0.17,168:-0.21,169:-0.48,170:-0.43,171:-0.40,172:0.29,173:-0.24,174:0.74,175:0.61,176:0.90,177:0.010,178:-0.19}],[146,0.638392232824117,{151:0.42,152:-0.31,153:-0.27,154:-0.72,155:-0.83,156:-0.80,157:0.89,158:-0.75,159:0.57,160:-0.21,161:-0.036,162:-0.57,163:-0.94,164:-0.52,165:0.46,166:-0.75,167:-0.0063,168:0.96,169:-0.15,170:0.85,171:0.86,172:0.18,173:-0.60,174:-0.61,175:0.46,176:-0.48,177:0.93,178:-0.51}],[147,-0.07447040360420942,{151:0.85,152:0.23,153:-0.27,154:0.064,155:0.66,156:0.46,157:-0.75,158:-0.68,159:-0.65,160:0.61,161:0.58,162:0.50,163:0.83,164:0.87,165:-0.10,166:-0.91,167:0.56,168:-0.95,169:-0.38,170:0.63,171:0.48,172:-0.34,173:-0.31,174:-0.32,175:-0.94,176:0.80,177:0.87,178:-0.41}],[148,-0.2914158385246992,{151:0.24,152:-0.45,153:-0.37,154:-0.30,155:-0.14,156:-0.62,157:0.15,158:0.34,159:0.81,160:-0.34,161:0.83,162:0.26,163:-0.32,164:0.44,165:0.96,166:0.52,167:0.14,168:-0.18,169:0.31,170:0.28,171:0.12,172:0.41,173:0.40,174:0.84,175:0.90,176:0.55,177:0.91,178:0.089}],[149,-0.7989514889195561,{151:-0.61,152:0.85,153:-0.59,154:-0.37,155:-0.63,156:-0.42,157:0.71,158:-0.058,159:0.68,160:0.070,161:-0.40,162:0.90,163:-0.34,164:0.41,165:-0.26,166:-0.15,167:0.82,168:-0.49,169:-0.84,170:0.83,171:0.11,172:-0.073,173:0.62,174:0.29,175:0.0061,176:-0.086,177:0.20,178:0.91}],[150,0.853551437612623,{151:0.072,152:-0.27,153:0.72,154:-0.85,155:0.82,156:0.86,157:-0.44,158:-0.93,159:0.13,160:0.90,161:0.26,162:0.16,163:-0.76,164:-0.64,165:-0.39,166:0.36,167:0.35,168:0.24,169:-0.73,170:-0.42,171:0.60,172:-0.61,173:0.20,174:-0.95,175:-0.16,176:0.30,177:0.11,178:0.99}]],[[151,0.19486121693626046,{179:0.46,180:0.52,181:0.46,182:0.35,183:-0.94,184:-0.95,185:-0.81,186:0.66,187:-0.63,188:-0.66,189:0.99,190:-0.23,191:0.43,192:0.19,193:-0.87,194:0.85,195:-0.11,196:0.84}],[152,0.40549370227381587,{179:-0.98,180:0.55,181:0.46,182:-0.65,183:0.96,184:-0.85,185:0.71,186:0.50,187:-0.76,188:-0.45,189:-0.24,190:0.78,191:-0.95,192:0.041,193:-0.079,194:-0.33,195:-0.83,196:0.27}],[153,0.5987029261887074,{179:-0.14,180:0.77,181:-0.25,182:-0.22,183:-0.38,184:0.30,185:-0.22,186:0.095,187:-0.19,188:0.50,189:-0.69,190:-0.042,191:0.33,192:-0.038,193:0.98,194:-0.91,195:-0.053,196:-0.82}],[154,-0.7725917156785727,{179:-0.35,180:0.17,181:0.79,182:-0.099,183:0.70,184:0.68,185:0.32,186:0.99,187:0.18,188:-0.25,189:-0.44,190:-0.13,191:-0.68,192:-0.71,193:-0.31,194:-0.79,195:-0.28,196:0.21}],[155,0.5174231859855354,{179:-0.51,180:-0.32,181:-0.44,182:-0.17,183:0.87,184:-0.22,185:-0.26,186:-0.86,187:0.86,188:-0.34,189:0.80,190:-0.22,191:0.46,192:-0.92,193:0.21,194:-0.79,195:-0.41,196:0.61}],[156,0.174122235737741,{179:-0.71,180:0.23,181:0.44,182:-0.47,183:0.50,184:0.24,185:0.91,186:-0.098,187:0.99,188:0.23,189:-0.49,190:0.83,191:0.45,192:1.0,193:-0.24,194:-0.37,195:-0.65,196:-0.62}],[157,-0.8158314484171569,{179:0.90,180:0.18,181:-0.31,182:0.51,183:0.43,184:-0.062,185:-0.88,186:0.99,187:-0.44,188:-0.30,189:0.60,190:0.88,191:0.64,192:0.70,193:-0.55,194:0.86,195:0.45,196:-0.21}],[158,-0.8708324157632887,{179:0.27,180:0.071,181:0.11,182:-0.97,183:-0.26,184:-0.91,185:0.15,186:0.99,187:-0.72,188:-0.74,189:0.86,190:-0.98,191:0.14,192:0.49,193:0.13,194:0.56,195:-0.040,196:-0.77}],[159,-0.790232190862298,{179:-0.59,180:0.49,181:0.95,182:0.033,183:-0.52,184:0.037,185:-0.63,186:-0.044,187:-0.065,188:0.39,189:-0.85,190:0.15,191:-0.12,192:0.18,193:-0.36,194:-0.43,195:0.031,196:0.71}],[160,-0.7087533292360604,{179:-0.086,180:-0.13,181:0.41,182:-0.12,183:0.82,184:0.59,185:0.70,186:-0.45,187:-0.34,188:0.62,189:0.79,190:-0.68,191:0.67,192:-0.32,193:0.62,194:-1.0,195:-0.51,196:-0.95}],[161,0.5344252502545714,{179:0.79,180:-0.015,181:0.067,182:-0.14,183:0.41,184:-0.43,185:-0.47,186:-0.76,187:0.36,188:-0.49,189:0.74,190:0.045,191:0.022,192:0.50,193:0.35,194:-0.63,195:0.89,196:-0.65}],[162,-0.8501446153968573,{179:0.20,180:0.93,181:-0.53,182:-0.60,183:-0.26,184:0.14,185:-0.98,186:0.20,187:-0.61,188:-0.64,189:-0.86,190:0.26,191:-0.80,192:0.31,193:0.14,194:0.21,195:0.70,196:-0.94}],[163,0.4986275234259665,{179:0.13,180:0.026,181:-0.35,182:-0.65,183:0.18,184:0.29,185:-0.90,186:0.097,187:-0.72,188:-0.30,189:0.36,190:0.35,191:0.85,192:-0.69,193:-0.64,194:-0.17,195:0.70,196:-0.67}],[164,-0.7631205995567143,{179:0.83,180:0.73,181:0.83,182:0.89,183:-0.23,184:-0.93,185:0.22,186:-0.43,187:-0.91,188:-0.63,189:-0.53,190:-0.55,191:-0.42,192:0.96,193:-0.61,194:0.68,195:-0.35,196:0.20}],[165,0.5171431768685579,{179:0.40,180:-0.39,181:-0.60,182:0.014,183:0.35,184:0.30,185:0.39,186:0.63,187:-0.69,188:-0.90,189:0.21,190:0.71,191:-0.56,192:0.60,193:-0.40,194:0.55,195:-0.49,196:0.41}],[166,-0.19862055266276002,{179:-0.51,180:0.18,181:0.91,182:0.96,183:0.32,184:-0.80,185:0.83,186:-0.63,187:-0.20,188:0.74,189:-0.34,190:-0.38,191:-0.77,192:-0.12,193:-0.87,194:0.13,195:-0.29,196:-0.23}],[167,-0.7537097600288689,{179:-0.65,180:-0.34,181:-0.65,182:-0.51,183:-0.27,184:0.23,185:-0.71,186:0.092,187:0.63,188:-0.87,189:0.59,190:-0.69,191:-0.27,192:-0.79,193:0.13,194:-0.32,195:-0.87,196:-0.084}],[168,0.815545201767236,{179:-0.12,180:-0.85,181:-0.22,182:0.65,183:-0.94,184:-0.093,185:-0.40,186:0.31,187:-0.36,188:0.93,189:-0.16,190:0.99,191:-0.60,192:-0.95,193:0.14,194:0.23,195:0.13,196:0.51}],[169,-0.40479757683351636,{179:-0.068,180:0.73,181:0.92,182:-0.33,183:0.42,184:0.79,185:0.59,186:-0.61,187:0.55,188:0.20,189:0.27,190:-0.050,191:-0.92,192:-0.30,193:-0.54,194:0.59,195:-0.26,196:-0.54}],[170,0.5139327379874885,{179:-0.36,180:0.23,181:-0.017,182:0.59,183:0.14,184:0.92,185:0.85,186:0.52,187:0.94,188:-0.35,189:-0.84,190:0.88,191:0.38,192:0.43,193:-0.13,194:-0.42,195:0.87,196:0.79}],[171,0.24913679901510477,{179:0.99,180:0.51,181:0.89,182:0.055,183:0.55,184:0.21,185:0.43,186:-0.63,187:-0.99,188:0.58,189:-0.49,190:-0.59,191:-0.31,192:-0.16,193:-0.026,194:-0.45,195:0.86,196:0.22}],[172,0.8784269774332643,{179:-0.95,180:-0.12,181:-0.15,182:-0.24,183:0.94,184:0.053,185:0.99,186:0.30,187:0.38,188:0.39,189:-0.38,190:0.69,191:-0.086,192:-0.34,193:-0.28,194:-0.55,195:0.50,196:0.29}],[173,0.29236896242946386,{179:-0.21,180:-0.36,181:-0.035,182:-0.34,183:-0.79,184:0.71,185:0.66,186:-0.54,187:0.44,188:-0.82,189:-0.14,190:0.63,191:0.60,192:-0.64,193:0.82,194:-0.67,195:-0.0083,196:0.11}],[174,-0.4751430335454643,{179:-0.59,180:0.38,181:-0.57,182:0.32,183:0.78,184:-0.68,185:0.31,186:0.29,187:0.37,188:-0.29,189:-0.91,190:0.99,191:-0.46,192:0.51,193:-0.59,194:-0.62,195:-0.029,196:-0.37}],[175,-0.10627943882718682,{179:0.29,180:-0.31,181:-0.66,182:-0.56,183:-0.018,184:0.36,185:-0.52,186:-0.27,187:0.56,188:-0.75,189:-0.36,190:0.69,191:-0.60,192:0.74,193:0.41,194:-0.40,195:0.79,196:0.079}],[176,-0.05125740310177207,{179:0.51,180:-0.23,181:0.93,182:-0.81,183:-0.22,184:-0.60,185:-0.90,186:0.58,187:-0.47,188:-0.43,189:-0.50,190:-0.71,191:0.54,192:0.016,193:-0.017,194:0.25,195:-0.087,196:-0.85}],[177,0.8903221897780895,{179:0.19,180:0.030,181:-0.32,182:0.44,183:0.66,184:0.21,185:0.25,186:-0.90,187:0.92,188:-0.96,189:0.41,190:0.55,191:-0.44,192:0.24,193:-0.52,194:0.78,195:0.12,196:0.22}],[178,-0.10635942593216896,{179:-0.74,180:-0.082,181:-0.33,182:-0.13,183:0.96,184:0.88,185:-0.26,186:-0.017,187:-0.16,188:-0.76,189:-0.52,190:-0.17,191:-0.88,192:-0.62,193:0.71,194:0.42,195:0.71,196:0.47}]],[[179,0.7617576229386032,{197:0.34,198:0.82,199:0.59,200:-0.83,201:-0.27,202:-0.19,203:-0.84,204:-0.94,205:0.21,206:0.46,207:0.58,208:0.78}],[180,0.27174642961472273,{197:0.41,198:-0.75,199:-0.13,200:-0.56,201:-0.060,202:-0.79,203:-0.025,204:-0.44,205:-0.040,206:-0.94,207:-0.97,208:-0.43}],[181,-0.8285111845470965,{197:-0.12,198:-0.50,199:0.15,200:0.64,201:0.54,202:-0.16,203:0.32,204:0.95,205:0.51,206:0.68,207:0.32,208:0.33}],[182,0.3630497013218701,{197:0.65,198:0.0091,199:-0.52,200:-0.69,201:-0.67,202:-0.87,203:-0.47,204:0.63,205:0.13,206:-0.46,207:0.85,208:0.76}],";e+="[183,-0.7715274887159467,{197:-0.93,198:-0.52,199:0.20,200:-0.28,201:-0.16,202:0.071,203:0.93,204:0.24,205:0.96,206:0.27,207:-0.36,208:0.70}],[184,0.7946532652713358,{197:0.68,198:0.090,199:-0.78,200:0.25,201:0.30,202:0.57,203:0.46,204:-0.58,205:0.45,206:0.060,207:0.98,208:-0.097}],[185,-0.6294581624679267,{197:0.69,198:0.38,199:-0.14,200:0.26,201:-0.31,202:0.10,203:0.28,204:-0.55,205:-0.97,206:0.35,207:-0.53,208:0.91}],[186,0.11596518801525235,{197:0.014,198:0.88,199:-0.20,200:0.98,201:-0.40,202:0.13,203:0.16,204:0.63,205:0.55,206:0.83,207:-0.33,208:-0.82}],[187,-0.0337735079228878,{197:-0.024,198:-0.74,199:-0.45,200:-0.23,201:-0.15,202:0.27,203:-0.088,204:-0.13,205:0.53,206:0.94,207:0.35,208:0.15}],[188,0.022646337281912565,{197:-0.79,198:-0.34,199:0.38,200:-0.97,201:-0.16,202:-0.78,203:-0.14,204:-0.82,205:0.24,206:-0.39,207:-0.088,208:0.70}],[189,0.5750512657687068,{197:0.90,198:-0.67,199:-0.33,200:-0.78,201:-0.85,202:0.70,203:0.35,204:-0.36,205:0.33,206:0.077,207:-0.94,208:0.61}],[190,-0.5973408087156713,{197:-0.77,198:-0.37,199:0.21,200:-0.21,201:-0.73,202:-0.12,203:0.32,204:-0.14,205:0.47,206:-0.69,207:-0.58,208:0.78}],[191,0.516786812338978,{197:-0.75,198:-0.80,199:0.064,200:0.82,201:-0.45,202:0.99,203:-0.87,204:0.16,205:0.50,206:-0.76,207:-0.98,208:-0.28}],[192,0.5497359693981707,{197:-0.072,198:-0.16,199:0.96,200:-0.084,201:-0.49,202:0.00047,203:0.78,204:0.18,205:0.38,206:0.023,207:-0.31,208:-0.32}],[193,-0.7364334417507052,{197:-0.29,198:-0.10,199:0.31,200:-0.74,201:-0.64,202:0.77,203:0.82,204:0.38,205:-0.34,206:0.78,207:-0.72,208:-0.52}],[194,-0.7994241332635283,{197:-0.68,198:0.87,199:-0.83,200:0.26,201:0.40,202:0.26,203:0.67,204:-0.46,205:0.15,206:0.039,207:0.61,208:0.71}],[195,-0.13349267141893506,{197:0.56,198:-0.11,199:0.88,200:-0.48,201:-0.44,202:-0.86,203:0.28,204:-0.58,205:-0.58,206:-0.023,207:-0.22,208:0.39}],[196,-0.9831315227784216,{197:-0.63,198:-0.74,199:-0.39,200:0.098,201:0.58,202:0.73,203:0.55,204:0.18,205:0.19,206:0.41,207:0.20,208:0.25}]],[[197,0.8782895551994443,{209:0.071,210:-0.38,211:-0.28,212:-0.50,213:-0.69,214:0.64,215:-0.59}],[198,-0.8474430055357516,{209:0.88,210:-0.0028,211:-0.87,212:-0.16,213:0.21,214:0.14,215:-0.84}],[199,0.3624460711143911,{209:0.76,210:0.88,211:0.072,212:0.84,213:-0.65,214:0.66,215:0.025}],[200,-0.7561368755996227,{209:0.27,210:-0.62,211:-0.19,212:0.55,213:0.90,214:0.077,215:-0.42}],[201,-0.7187293125316501,{209:0.16,210:-0.11,211:0.087,212:0.86,213:0.070,214:0.12,215:0.39}],[202,-0.8217015233822167,{209:-0.90,210:0.68,211:0.21,212:0.36,213:0.16,214:0.91,215:-0.022}],[203,0.34229249227792025,{209:0.58,210:0.11,211:0.77,212:0.41,213:0.32,214:-0.29,215:0.0044}],[204,-0.48631776496768,{209:0.53,210:0.33,211:0.41,212:0.83,213:0.27,214:-0.48,215:0.47}],[205,0.32936288230121136,{209:0.57,210:0.77,211:0.23,212:0.056,213:0.38,214:0.56,215:0.37}],[206,-0.2467293944209814,{209:-0.51,210:-0.79,211:-0.59,212:-0.67,213:0.41,214:0.71,215:-0.40}],[207,-0.6320164632052183,{209:0.29,210:0.42,211:-0.38,212:0.35,213:0.026,214:0.070,215:0.072}],[208,-0.6663285833783448,{209:-0.66,210:0.17,211:0.058,212:-0.63,213:0.83,214:-0.90,215:0.25}]],[[209,-0.8650494888424873,{}],[210,-0.9109336989931762,{}],[211,-0.5958707896061242,{}],[212,-0.19258233299478889,{}],[213,-0.3751103803515434,{}],[214,-0.8658454902470112,{}],[215,0.9679574123583734,{}]]]";let t=[{tethys:{c:[[238.06,100,6.08],[210,89.29,10.98],[201.6,100,14.71],[196.25,100,18.82],[191.48,100,22.55],[186.46,100,25.49],[181.58,66.28,33.73],[173.4,43.86,44.71],[161.12,39.91,56.27],[143.51,45.68,68.24],[113.23,59.62,79.61],[85.26,100,85.1]]},"hang ten":{c:[[185.22,63.89,85.88],[220,89.36,18.43],[207.97,72.84,31.76],[203.02,40.19,58.04],[185.22,63.89,85.88]]},mesopelagic:{c:[[200,100,49],[202,95,41],[199,100,29],[202,100,16],[200,75,8]]}},{"shades of dboch":{c:[[315,10,8],[240,4,38],[225,8,72],[220,27,98],[30,30,89]],d:!0},"ray of sunshine":{c:[[231,7,37],[218,9,56],[44,89,66],[0,0,100],[340,11,16]],d:!0},aphelion:{c:[[0,0,3],[240,20,80],[250,30,70],[180,4,95],[229,100,95]],d:!0}},{oxbow:{c:[[14,54,59],[57,16,74],[186,34,56],[195,34,16],[332,8,41]]},geomancer:{c:[[276,5,21],[216,37,28],[246,15,70],[12,12,40],[15,45,66]]},taigawalker:{c:[[172,27,44],[189,23,77],[230,9,87],[35,8,60],[57,11,35]]}},{"crack of dawn":{c:[[198.32,100,67.25],[203.44,94.97,68.82],[209.54,85.53,70.2],[217.92,71.62,70.98],[230.37,55.1,71.18],[248.96,41.61,68.43],[286.45,38.75,68.63],[322.31,57.35,73.33],[342.32,94.06,80.2],[358.59,100,83.33],[17.05,100,81.37],[31.49,100,80.2],[44.08,100,80.78],[56.51,100,83.14]]},sugar:{c:[[0,94.87,84.71],[23.18,91.67,81.18],[48.18,58.93,78.04],[102.5,60,84.31],[161.67,97.3,85.49],[186.23,100,79.22],[198.26,100,81.96],[248.24,100,90],[321.08,94.87,84.71]]},hydrangea:{c:[[342,66,54],[358,54,64],[118,30,92],[180,11,78],[192,46,59],[270,49,65]]}},{saturday:{c:[[202.11,20,37.25],[188.67,36.59,51.76],[95.29,46.58,71.37],[45.13,91.87,75.88],[359.28,93.26,65.1]]},groover:{c:[[270,25.33,29.41],[188.51,100,29.02],[45.77,74.05,74.31],[1.92,67.24,45.49],[38.63,100,59.8]]},spell:{c:[[311.35,67.27,10.78],[0,100,42.55],[10.59,100,50],[32.94,100,50],[176.81,93.39,23.73]]}},{canopy:{c:[[164.21,100,7.45],[150.41,90.12,15.88],[139.81,70.67,29.41],[127.87,48.8,50.98],[112.2,73.53,73.33]]},"forest floor":{c:[[27,76,13],[27,56,95],[141,54,95],[85,51,19],[169,100,32],[168,100,14]]},"lichen and moss":{c:[[126,30,72],[130,23,64],[128,16,52],[74,30,72],[74,33,43],[120,3,27],[124,18,31],[130,26,9]]}},{"'90s child":{c:[[336,95,62],[40,99,67],[169,46,49],[265,65,32],[290,37,16]]},tension:{c:[[270,100,75],[270,61,43],[275,83,21],[358,97,31],[0,100,41],[0,80,68],[21,90,84]]},brungle:{c:[[225,40,33],[225,30,49],[46,83,76],[19,89,67],[5,91,67]]}},{chromaculture:{c:[[359,94,62],[21,89,56],[33,94,55],[42,93,64],[94,38,59],[162,43,46],[208,25,45]]},"unicorn horn":{c:[[17,100,54],[43,100,50],[67,100,55],[130,76,68],[186,100,55]]},breeze:{c:[[92,33,56],[50,83,74],[28,88,65],[160,22,46],[357,46,52]]}},{"equis i griega":{c:[[240,36,17],[301,32,31],[322,42,46],[328,93,63],[347,100,60]]},"G E N W A V E かっこいい":{c:[[317,100,71],[283,72,68],[257,100,77],[231,68,72],[206,100,79]]},supernova:{c:[[235,21,21],[270,44,31],[276,57,39],[280,95,57],[270,93,62],[256,91,67],[236,88,70],[218,89,65],[204,89,60],[193,90,55]]}},{creamberry:{c:[[340,60,16.67],[345,57.14,53.33],[350,100,80],[0,100,90],[351.43,77.78,70]]},"bumble beef":{c:[[359,100,53],[356,100,78],[7,100,87],[10,13,73],[0,100,1]]},"killbot engaged":{c:[[349,73,15],[359,91,49],[30,4,72],[21,8,39],[240,3,15]]}},{joie:{c:[[314.33,34.72,62.16],[311.74,38.98,76.86],[311.43,44.68,90.78],[276.67,44.63,52.55],[271.54,31.45,48.63],[9,100,50],[10,100,54],[25,100,50],[40,100,80],[30,100,90.78]]},lilac:{c:[[213,22,10],[293,38,46],[338,72,85],[11,68,89],[36,37,92]]},"naranjas perdidas":{c:[[4,9.52,0],[9,100,50],[10,100,54],[25,100,50],[25,9.52,21.18],[25,8,40.39],[25,10.1,66.2],[25,15.38,89.8],[25,15.38,96]]}},{reyes:{c:[[209,90,30],[40,2,52],[25,65,56],[39,100,67],[220,18,3]]},tamalpais:{c:[[7,100,64],[31,99,51],[36,96,56],[210,100,18],[212,100,11]]},"snarling sabrecat":{c:[[348.25,67.14,41.76],[203.84,93.79,31.57],[191.2,97.65,33.33],[16.48,88.13,57.06],[6.45,92.08,60.39]]}},{plumhoney:{c:[[330,21,11],[334,39,31],[351,17,56],[34,67,65],[40,10,94]]},"day to night":{c:[[45.27,100,67.25],[40,100,66.47],[35.23,98.85,65.88],[30.53,95.48,65.29],[25.77,90.06,64.51],[20.9,83.78,63.73],[15.72,75.92,62.55],[10.75,67.68,61.18],[4.96,58.45,59.41],[358.36,50,56.86],[352.15,44.03,52.35],[346.02,42.39,47.65],[340.21,43.89,43.33],[334.09,44.44,38.82],[327.69,44.32,34.51],[320.29,44.16,30.2],[311.58,42.86,26.08],[298.67,39.82,22.16],[285,43.14,20],[270.73,45.05,17.84],[255.79,48.72,15.29]]},grumple:{c:[[295.38,52,9.8],[318.95,47.5,15.69],[342.35,40.16,24.9],[357.24,47.54,35.88],[1.02,74.06,53.14]]}},{ignition:{c:[[1,78,21],[3,77,53],[16,100,64],[34,98,75],[38,52,96]]},"warm sun":{c:[[46.61,100,52.55],[54.72,100,57.65],[38.35,100,50],[28.09,90.16,47.84],[16.36,80.95,45.29]]},warning:{c:[[339,80,12],[354,93,22],[358,97,31],[0,100,41],[12,98,44],[23,97,46],[34,95,49],[39,96,50],[43,100,52]]}},{"soviet hellscape":{c:[[38,8,45],[38.26,81.18,83.33],[29.13,52.28,61.37],[27.16,41.13,45.29],[22.11,36.31,30.78],[16.8,24.75,19.8],[16,10,22]]},"relaxation station":{c:[[67,39,59],[64,40,80],[45,69,85],[19,85,74],[8,54,39]]},bweflept:{c:[[0,99,64],[45,99,70],[188,100,36],[240,9,91],[240,22,96]]}}],a=e=>{O=`<div><div style=text-align:right><button onclick=Q()>AI Menu</button> <button onclick=Le()>CLOSE</button></div><h1>Help</h1><div style=margin-left:10px><h2>Controls</h2><div style=margin-left:10px><h3>General</h3><ul><li>A - Awesome mode -- Enables fullscreen animation. Press again to turn off composition framing and enable edge-to-edge fullscreen aspect ratio. It's fun, try it<li>B - Clear Background<ul><li>Wipes the background without altering the simulation</ul><li>D - Toggle dark mode<li>E - Toggle square/fullscreen aspect ratio<li>F - Enter Framerate mode<ul><li>While in mode, press number keys 0-9 to choose a framerate preset<li>Press Left or Right arrow keys to change framerate by 1<li>Press Q to exit Framerate mode</ul><li>G - Enter Aspect Ratio mode</li><ul><li>Choose from a variety of aspect ratios using [1-9]<li>1:1, 4:3, 3:4, 1:2, 2:1, 16:9, 9:16, 3:2, 2:3</ul><li>H - Toggle Help menu<li>M - Enable fullscreen<li>P - Toggle Pause<li>O - Advance one frame (while paused)<li>Q - Quit current mode (if in a mode)<li>S - Save canvas as image<li>V - Toggle vignette (only available in square aspect ratio)<li>Escape - Exit fullscreen (when enabled)</ul><h3>Animation-specific</h3>${e}</div></div><br><br><h4>This piece is dedicated to our Max, who just turned 1. Son, I hope you will be awed by and curious about the beautiful, intricate, fragile puzzle that is nature.</h4></div>`};const o=e=>[...Array(e)].map((()=>Math.floor(16*Math.random()).toString(16))).join("");function r(e){return new Array(32).fill(null).map(((t,a)=>parseInt(e.hash.slice(2+2*a,4+2*a),16)))}let l=r(tokenData),i=parseInt(tokenData.tokenId)%1e6;class s{constructor(){this.useA=!1;let e=function(e){let t=parseInt(e.substr(0,8),16),a=parseInt(e.substr(8,8),16),o=parseInt(e.substr(16,8),16),n=parseInt(e.substr(24,8),16);return function(){t|=0,a|=0,o|=0,n|=0;let e=(t+a|0)+n|0;return n=n+1|0,t=a^a>>>9,a=o+(o<<3)|0,o=o<<21|o>>>11,o=o+e|0,(e>>>0)/4294967296}};this.prngA=new e(tokenData.hash.substr(2,32)),this.prngB=new e(tokenData.hash.substr(34,32));for(let e=0;e<1e6;e+=2)this.prngA(),this.prngB()}random_dec(){return this.useA=!this.useA,this.useA?this.prngA():this.prngB()}random_num(e,t){return e+(t-e)*this.random_dec()}random_int(e,t){return Math.floor(this.random_num(e,t+1))}random_bool(e){return this.random_dec()<e}random_choice(e){return e[this.random_int(0,e.length-1)]}}let c=new s;const u=()=>c.random_dec();function d(e,t){return void 0===t&&(t=e,e=0),c.random_num(e,t)}function g(e,t){return void 0===t&&(t=e,e=0),c.random_int(e,t-1)}const h=(e=.5)=>c.random_bool(e),p=(e,t)=>{const a=new Set;for(;a.size<e;)a.add(i>128?Math.floor(u()*(t+1)):Math.floor(u()*t)+1);return a},m=(e,t,a)=>Math.max(e,Math.min(t,a)),f=()=>h()?1:-1,b=e=>e.split("|"),y=e=>(e>>>0).toString(2),v=(e,t)=>e+g(t+t+1)-t,k=(e,t,a=.01)=>c.random_bool(a)?v(e,t):e,w=e=>e?"on":"off";let $=Math,C=$.floor,S=$.cos,x=[];const A=(e,t=-1,a)=>{let o=a||x;for(let a=0;a<e;a++)o.push(new Array(-1===t?e:t).fill(void 0))};let E,T,R,N,L,P,_,I,B,D,M,O,z,U=0,F=24,q=!1,j=!1,H=!1,W=!1,G=!1,J=1,X=window.devicePixelRatio||1;const Y=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)||/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.platform),Q=()=>{Le(),Wn()};let V,K,Z,ee=30,te=40,ae=ee-te,oe=ae,ne=!!document.fullscreenElement,re=h()||h(),le=!1,ie=!1,se=!1,ce=500,ue=!1;const de="f",ge="g",he=(e=!1)=>{q=!q,e||pe((q?"":"un")+"paused")},pe=e=>{oe=6*Math.sqrt(m(1,400,F)),K=e},me=(e,t)=>{Z=e,pe(`Set mode to ${t}`)},fe=()=>{const e=["ms","moz","webkit","o"];for(let t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"]},be=()=>{X=window.devicePixelRatio||1,document.documentElement.style.backgroundColor=re?"black":"white",document.body.style.backgroundColor=re?"black":"white",R=R||document.createElement("canvas"),R.style.margin="auto",_=Math.min(window.innerWidth,window.innerHeight),window.innerHeight<window.innerWidth?J>1?window.innerWidth>=_*J?(I=_*J,B=_):(I=window.innerWidth,B=I/J):(I=_*J,B=_):J>1?(I=_,B=_/J):window.innerHeight<_/J?(B=window.innerHeight,I=B*J):(I=_,B=_/J),I=(ne?window.innerWidth:I)*X,B=(ne?window.innerHeight:B)*X,R.width=I,R.height=B,R.style.width=I/X+"px",R.style.height=B/X+"px",E=R.getContext("2d"),L=E.createImageData(I,B),E.putImageData(L,0,0),E.imageSmoothingEnabled=!1,N=document.createElement("canvas"),N.width=I,N.height=B,T=N.getContext("2d"),T.imageSmoothingEnabled=!1,V=ne?E.createRadialGradient(I/2,B/2,0,I/2,B/2,2*_/4):E.createRadialGradient(_/2,_/2,0,_/2,_/2,2*Math.max(I,B)/4);const e=re?0:255;V.addColorStop(0,`rgba(${e}, ${e}, ${e}, 0.03)`),V.addColorStop(.5,`rgba(${e}, ${e}, ${e}, 0.2)`),V.addColorStop(.7,`rgba(${e}, ${e}, ${e}, 0.4)`),V.addColorStop(.8,`rgba(${e}, ${e}, ${e}, 0.6)`),V.addColorStop(1,`rgba(${e}, ${e}, ${e}, 1)`)};document.addEventListener("DOMContentLoaded",(()=>{fe(),be(),document.body.appendChild(R),window.addEventListener("keydown",Be,!1),fr(),D=1e3/F,requestAnimationFrame($e)}));let ye=-1,ve=!1;const ke=()=>{ye=U,ve=!0},we=e=>{ie||(ie=!0),ce=e,pe(`Updated autoblank interval to every ${e} frames`)},$e=()=>{H=H&&q,H?Fr():q&&!j||(kr(),Fr(),ie&&U%ce==ce-1&&se&&he(),U++,j&&(j=!1)),E.drawImage(N,0,0),le&&!ne&&(E.fillStyle=V,ne?E.fillRect(0,0,I,B):E.fillRect(0,0,_,_)),ve&&((!q||j)&&U<ye+30?De(.1):ve=!1),oe>ae&&(E.fillStyle=`rgba(${re?"50,50,50":"0,0,0"},${oe>-2?.8:.1*(oe-ae)})`,E.fillRect(0,.96*B,I,.04*B),oe=Math.max(ae,oe-1),oe>0&&(E.fillStyle=`rgba(255,255,255,${oe>ee/3?1:.1*oe})`,E.font=Math.max(I,B)/60+"px Verdana",E.fillText(K,I*.01,B*.985))),setTimeout((()=>{P=requestAnimationFrame($e)}),D)};let Ce=()=>{const e=document.createElement("a");e.download="art_export.png",e.href=R.toDataURL(),e.click(),e.remove()},Se=(e,t=!1)=>{F=e,D=1e3/F,q=!1,ee=30*Math.sqrt(F)/5,te=35*Math.sqrt(F)/5,ae=ee-te,t||pe(`Setting Target FPS to ${1e3===e?"unlimited":e}`)},xe=e=>{J=e[0]/e[1];const t=ne;ne=!1,be(),pe(`Setting Aspect Ratio to ${e[0]}:${e[1]}${t?" Fullscreen mode set to OFF":""}`)},Ae=()=>{ne=!ne,be()},Ee=()=>{document.body.webkitRequestFullScreen?document.body.webkitRequestFullScreen():document.body.mozRequestFullScreen&&document.body.mozRequestFullScreen()},Te=[1e3,1,2,6,12,24,30,50,60,120],Re=e=>{const t=ne?I:_,a=ne?B:_,o=document.createElement("div");return o.width=18*t/20+"px",o.style.fontFamily="Verdana, sans-serif",o.height=18*a/20+"px",o.style.background="rgba(40,40,40,0.9)",o.style.color="white",o.style.position="absolute",o.style.left=t/20+"px",o.style.top=a/20+"px",o.style.right=t/20+"px",o.style.bottom=a/20+"px",o.style.padding=`${a/20}px ${t/20}px`,o.style.border="solid #777 4px",o.style.overflow="auto",o.innerHTML=e,document.body.appendChild(o),o},Ne=()=>{M=Re(O),W=!0},Le=()=>{M.remove(),W=!1},Pe=()=>{z&&z.remove(),G=!1},_e=(e,t=1)=>{re=e,t&&pe("Dark Mode set to: "+(re?"ON":"OFF")),be(),xn(void 0,1)},Ie=()=>{_e(!re)},Be=e=>{const t=e.key;if(W)return void("h"!==t&&"Escape"!==t||Le());if(G)return void("Escape"===t&&Pe());switch(t){case"d":_e(!re);break;case"h":W||Ne();break;case"q":Z=void 0,pe("mode cleared");break;case"o":q&&(j=!0,pe(`advancing to frame ${U+1}`));break;case"p":he();break;case"e":pe(ne?"Resizing to Square Canvas":"Resizing to Fill Screen"),Ae(),fr();break;case"m":Ee();break;case"s":Ce();break;case"f":me("f","Frame Rate");break;case"g":me("g","Aspect Ratio");break;case"v":le=!le,pe("Vignette set to "+(le?"ON":"OFF"));break;case"y":me(je.AUTO_BLANK,"Autoblank"),ie=!0;break;case"ArrowLeft":"f"===Z&&(F>1?Se(F-1):pe("frame rate can't go lower than 1"));break;case"ArrowRight":"f"===Z&&(F<240?Se(F+1):pe("frame rate can't go higher than 240"))}"f"===Z&&1*t<10&&Se(Te[1*t]);const a=[[1,1],[1,1],[4,3],[3,4],[1,2],[2,1],[16,9],[9,16],[3,2],[2,3]];if("g"===Z&&1*t<a.length&&(xe(a[1*t]),fr()),Z===je.AUTO_BLANK)switch(t){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":we(100*t);break;case"0":ie=!1,pe("Autoblank disabled");break;case"ArrowLeft":return void(ce>5?we(ce-5):pe("Autoblank can't happen more than every 5 frames"));case"ArrowUp":return ue=!ue,void pe(`Auto color change is set to: ${w(ue)}`);case"ArrowRight":we(ce+5);break;case"ArrowDown":se=!se,pe(`Autopause is set to: ${w(se)}`)}},De=e=>{const t=re?0:255;T.fillStyle=`rgba(${t},${t},${t}, ${e?Math.max(e,re?.1:.15):1})`,T.fillRect(0,0,I,B)};a('<ul><li>Space - Change color palette<ul><li>Choose one of three palettes<li>Note: "Psychedelic" traits handle colors differently, and default to calculated palettes</ul><li>I - AI Menu - Used for working with Neural Nets (NN)<ul><li>AI Type: Choose between neural net AI, a pre-coded control AI, or a mix<li>Learning Nets: When enabled, neural nets will gradually learn over time<li>Autotrain mode - 2-3 teams battle for control of the arena. Only the strong survive!</li><ul><li>Winning teams starting NN and the "best" winning NN fight in the next round<li>Smaller cell counts [X] make battles faster, but too small might not be good for their learning. ~15-25 seems like a good range<li>Press comma [,] to toggle rendering output. This is useful for faster training (e.g. overnight)</ul><li>Best Network - The network belonging to the strongest crobe on the field</li><ul><li>Export - dumps the net to the console<li>Save - saves the net to local storage (note -- doesn&apos;t work within an iframe)<li>Load - loads a previously saved NN from local storage. Continue training where you left off!<li>Reset: Resets nets to the starting configuration</ul><li>Red Team and Blue Team</li><ul><li>Copy the starting network being used for the red or blue teams. Changes as they learn<li>You can paste in copied networks and click Upload to regenerate the simulation with new nets<li>Rec: Turn on autobattle/diagnostic modes. Load a friend\'s exported AI, and watch them fight!<li>Hivemind mode (experimental) All crobes on the team will share a network and learn together. Has pros and cons</li><li>BATTLE!!! - The red and blue teams will fight a series of battles. First to 5 wins! Note - uses the values from the text boxes, so paste in your combatants<li>The results of the last battle are visible in the AI menu</li></ul></ul><li>J - Toggle Speciation Mode<ul><li>Enables settings ideal for watching evolution in action! Divides the population and optimizes for evolution diversity and visibility<li>Enables dividers [L+U], and calculated colors [T], and increases frame rate. Resets the animation<li>Use independent dividers [L] (vertical) and [U] (horizontal) if you want to avoid an animation reset or color change<li>Rec: Disable the barriers one at a time and watch the previously isolated populations battle for supremacy!<li>Note -- the barriers don\'t offer total isolation on "toroidal" topologies -- for best results, ensure your mint has "bounded" topology</ul><li>K - Enable Diagnostic mode</li><ul><li>Enables a variety of views of simulation variables using [1-9]<li>Display strength [1], energy [2], age [3], child count [4], min strength to reproduce [5], min age to reproduce [6], time since eaten [7], stat balance (red-more atk, blue-more def) [8], and rock-paper-scissors teams [9]<li>Press [0] to disable diagnostic colors<li>Note that mint-specific crobe appearance will be disabled during diagnostic display to aid in visibility</ul><li>N - Change random seed and restart<li>T - Toggle between preset and calculated palettes<li>W - Toggle toxic waste colors<li>X - Enter Cell Count mode<ul><li>Cell Count controls how many grid cells there are in the simulation<li>Smaller counts force all cells into a smaller area. Larger ones are less crowded<li>While in mode, press number keys 0-9 to choose a preset<li>Press Left or Right arrow keys to change cell count by one level<li>Press Q to exit Cell Count mode</ul><li>Y - Enter Autoblank mode<ul><li>Set up the canvas to autoclear at certain frame intervals -- useful for animations where shapes persist on the screen<li>While in mode, press number keys 1-9 to choose an autoblanking preset from 100-900 frames (defaults to 500)<li>Press Left or Right arrow keys to fine tune the autoblanking interval<li>Press [0] while in this mode to disable autoblanking<li>Press Up arrow to toggle Auto Color Change. When enabled, this will change color palette (and restart the animation) at each interval.<li>Press Q to exit Autoblank mode</ul><li>Z - Toggle composition framing<ul><li>When on (default), frames the content with negative space<li>Disable this if you\'d like an edge-to-edge simulation experience. Works best with fill screen mode [E]</ul><li>Up/Down Arrows - Change color set (polychroic mints only)</li><ul><li>Have trouble choosing between your favorite colors? Lucky you... you don\'t have to</ul><br><br><br><li>Mobile Controls</li><ul><li>Swipe Right - Change color palette. Cycles through all presets and dark/light mode<li>Swipe Left - Open Help menu (with link to AI Menu in upper right)<li>Swipe Up/Down - Raise/Lower the detail level, respectively. Useful to fine-tune mobile performance and appearance for your device<li>Double Tap - toggle fullscreen</ul></ul>');const Me=6,Oe=2*$.PI/6,ze={};for(let e=3;e<9;e++){const t=2*$.PI/e,a=[];for(let o=0;o<e;o++)a.push({x:S(t*(o+.5)),y:$.sin(t*(o+.5))});ze[e]={angle:t,offsets:a}};const Ue=1/255,Fe=Ue/200,qe=$.PI/180;let je={CELL_COUNT:"c",XRAY:"x",AUTO_BLANK:"y",INTELLIGENCE:"z"},He=b("l|ul|ur|r|br|bl"),We=b("ll|ull|uul|uu|uur|urr|rr|brr|bbr|bb|bbl|bll");const Ge=()=>({uul:["ul"],uu:["ul","ur"],uur:["ur"],urr:["ur","r"],rr:["r"],brr:["r","br"],bbr:["br"],bb:["br","bl"],bbl:["bl"],bll:["bl","l"],ll:["l"],ull:["l","ul"]}),Je=(()=>{const e={uul:["ul"],uu:["ul","ur"],uur:["ur"],urr:["ur","r"],rr:["r"],brr:["r","br"],bbr:["br"],bb:["br","bl"],bbl:["bl"],bll:["bl","l"],ll:["l"],ull:["l","ul"]};let t={};return Object.keys(e).forEach((a=>{let o=e[a];t[a]=o[0]})),t})(),Xe=[40,30,20,10,1],Ye=["good enough!","gaps","amnesia","dementia","tabula rasa"];let Qe=!1,Ve=!1;const Ke=h(15/16),Ze=h(3/4)?0:h()?1:h()?2:h(3/4)?3:4;let et,tt=!0,at=1===g(1,5),ot=b("weirdwave|space nachos|bokeh|painting|chain mail|petri plane|cubez|festivity|neon|close-eyed|manuscript|prions|psychedelia|connect the dots|scribbles|frog eggs|inky manuscript|preschool|y not?|open-eyed|x factor|arcadepop|benzene dream|bees knees|colored pencil|imagination|wild imagination");at&&(et=g(ot.length));let nt=[...p(3,t.length-1)].map(((e,a)=>{let o=Object.keys(t[e])[(a+l[0])%3];return{name:o,c:t[e][o].c,d:t[e][o].d}})),rt=h(.01),lt=0,it=h()?.62:.01*g(55,76),st=document.fullscreenElement?1:.85,ct=h(1/15),ut=h(1/3),dt=h(.25),gt=d(1),ht=0;nt[ht].d&&(re=!0);let pt,mt,ft,bt,yt,vt,kt,wt,$t,Ct,St,xt,At,Et=nt[ht].c,Tt=!1,Rt=h(.25),Nt=!1,Lt=!1,Pt=!1,_t=0,It=null,Bt=null,Dt=2e3,Mt=!1,Ot=[0,0],zt=0,Ut=d(2,30),Ft=d(2,30),qt=d(2,30),jt=d(1,10)/400,Ht=d(1,10)/400,Wt=d(1,10)/400,Gt=d(.2,.7),Jt=d(.1,1),Xt=d(.1,.2),Yt=d(.05,.25),Qt=d(.05,.25),Vt=h(.2),Kt=h()?1:d(.5,1),Zt=h(),ea=h(),ta=g(5,100),aa=d(1,100)/300,oa=h(),na=d(.1,5),ra=(e=0)=>oa&&!e?g(Xn*na+1)-Xn*na/2:0,la=g(3),ia=!1,sa=!1,ca=!0,ua=!1,da=!1,ga=h(3/4)?"bounded":"toroidal",ha=h(),pa=!ha||h(),ma=h(1/4),[fa,ba,ya,va]=ha?[5,10,5,10]:[50,500,400,600],ka=pa?g(30,61):g(10,41),wa=h(1/8),$a=g(3),Ca=h(),Sa=10,xa=80,Aa=200,Ea=g(Sa+10,xa),Ta=g(7),Ra=l[12]%2==0,Na=h(),La=h(),Pa=2.2*d(1,1+l[7]%4),_a=h(),Ia=h(3/4),Ba=h(),Da=h(),Ma=Ba?1:d(4),Oa=Ba?1:d(4),za=d(Ba?.9:.7,1),Ua=h(),Fa=h(),qa=h(),ja=h(1/8),Ha=h()?1:d(.8,4.6),Wa=h()&&!Fa,Ga=h(),Ja=g(3,10),Xa=6===Ja&&h(),Ya=!Xa&&h(),Qa=Ya||!Xa&&h(),Va=h(1/8),Ka=h(1/4),Za=h(),eo=Za&&h(),to=h(1/8),ao=d(1,5),oo=()=>{let e=Xn*ao;return to?d(e)-.5*e:0},no=h(),ro=g(1,no?100:50),lo=g(1,50),io=1/lo,so=h(),co=h(),uo=g(5,21),go=d(.5,1),ho=g(3),po=lo<3||h(),mo=30,fo=h()?.05:g(5,100)/100,bo=h(),yo=bo&&h(),vo=bo&&h(),ko=h(),wo=h(1/4),$o=h(),Co=h(),So=g(5),xo=["curve towards","curve away","corner","receding","approaching"];if("colored pencil"===ot[et]&&(Vt=Va=oa=1,na=.8,aa=2/15,Ha=1,Kt=d(2,6)/10,po=Kt>.4),"weirdwave"===ot[et]&&(Fa=ma=dt=1,qa=Va=Vt=Ka=ct=to=Wa=0,ro=3,Ha=d(3.2,5.6)),"arcadepop"===ot[et]&&(Vt=po=1,Zt=oa=0,ta=1e3,aa=.05,Ha=d(1.6,3.2)),"benzene dream"!==ot[et]&&"bees knees"!==ot[et]||(Ja=6,Va=Qa=Xa=0,Ka=1),"benzene dream"===ot[et]&&(qa=1,ja=0,Ha=d(1.6,4.8)),"bees knees"===ot[et]&&(Fa=Ga=to=ct=0,Ha=1,ro=g(1,51)),"wild imagination"!==ot[et]&&"imagination"!==ot[et]||(io=d(1/7,1),Fa=po=0,ct=re=Vt=Zt=Va=oa=1,so=h(),na=d(.1,3),ta=g(40,101),aa=d(.1,.2),Ha=1,Ea=g(Sa,80),fo=.01*g(50,100),Kt=.65,5===Ta&&(Ta=h()?0:1),3===Ta&&(Ta=h()?2:6)),"imagination"===ot[et]&&(ct=0,go=.9),"manuscript"!==ot[et]&&"inky manuscript"!==ot[et]||(Vt=Zt=Va=oa=po=1,so=h(),ta=g(40,101),aa=d(5,10)/ta,Ha=1,Ea=g(Sa,80),fo=.01*g(50,100),h()&&(Ta=5)),"inky manuscript"===ot[et]&&(so=co=1,uo=5,go=1,re=h(.25)),"scribbles"===ot[et]&&(st=.55,it=.55,Vt=Zt=Va=oa=po=1,na=d(5,40),ta=g(15,75),aa=d(8,20)/ta,Ha=1,fo=g(80,101)/100,Ea=g(30,61)),"prions"===ot[et]&&(Fa=Va=Ga=Zt=0,Vt=oa=po=to=1,so=h()&&h(),ta=g(5,16),fo=.8,aa=g(150,201)/100,Ha=.8*g(2,5),Ea=60,ro=g(50,101)),"space nachos"===ot[et]&&(Ja=3,Xa=Va=0,po=qa=re=Ga=1),"frog eggs"===ot[et]&&(ja=qa=Fa=Vt=1,Xa=Wa=Va=Ga=dt=0,Ja=g(7,9),Ha=d(1,2.5),ro=1,aa=d(.1,.26),ta=g(2,6),so&&(co=1)),"bokeh"===ot[et]&&(ro=50,po=1,Ja=8,ct=to=Qa=no=Ya=Ka=Vt=Va=so=Fa=0,Ha=h()?1:g(.8,4.8)),"neon"===ot[et]&&(re=ct=Tt=Va=1,po=0,aa=d(1,2)/30),"psychedelia"!==ot[et]&&"open-eyed"!==ot[et]&&"close-eyed"!==ot[et]||(Va=po=0,Tt=Ga=ct=1,jt=Ht=Wt=.025),"psychedelia"!==ot[et]&&"open-eyed"!==ot[et]&&"neon"!==ot[et]||(Vt=1,Fa=0,so=h(),Ha=6,oa=0),"close-eyed"===ot[et]&&(so=Wa=Vt=0),"psychedelia"===ot[et]&&(to=0,aa=1/300),"open-eyed"===ot[et]&&(to=1,ao=d(3,5),aa=.5),"connect the dots"===ot[et]&&(Vt=1,so=h(),Ga=oa=Zt=Va=Ka=wo=0,Ha=d(.8,1.6),aa=d(5,12)/30,Wa=Wa&&!Fa,fo=g(1,51)/100),"painting"===ot[et]&&(Ga=Fa=wo=1,ro=g(75,100),Ha=d(5,7),Va=so=Vt=Wa=Tt=po=Ka=Vt=dt=0),"petri plane"===ot[et]&&(ro=30,Va=so=Vt=Ga=no=0,po=1,Ha>1&&(Ha=1)),"cubez"===ot[et]&&(Fa=Va=0,Wa=Xa=1,Ja=6,to=po&&to),"festivity"===ot[et]&&(po=Ga=Va=0,Ja=6,Tt=Vt=Xa=1,so=h()),"chain mail"===ot[et]&&(Fa=po=Ya=Ga=so=to=Vt=Va=wo=0,ro=1,Wa=1,Ea=g(xa-30,xa),Ha=h()?1:g(10,15)/12),"preschool"===ot[et]&&(Ja=9,Ha=.8*g(5,7),Ka=1,Vt=Ga=qa=ja=Fa=Va=0),"y not?"!==ot[et]&&"x factor"!==ot[et]||(Ja=6,Wa=Ka=Xa=Fa=1,Ha=.8*g(1,8),Vt=Vt&&h(),Ga=oa=Zt=ct=qa=Va=0,Ja="y not?"===ot[et]?6:4),Xa=Xa&&(6===Ja||"x factor"===ot[et])&&Wa,Xa){let e="x factor"===ot[et]||"y not?"===ot[et];Qa=e,Ya=e?h():0,Ea=g(Sa,60)}!Vt&&Va&&(h()?Va=0:Vt=1),Za=Za&&(Wa||Vt),Vt&&!Va||"inky manuscript"===ot[et]||"imagination"===ot[et]||(so=0);let Ao=!ct;Ka="benzene dream"===ot[et]||"y not?"===ot[et]||"x factor"===ot[et]||Ka&&!Fa&&!Va&&Ha>=1,Vt=Vt||Ka&&po,Fa&&(Ha*=1.6,to=0),(Ha<3&&Fa||Ha<=1.6)&&(!at||"petri plane"!==ot[et]&&"weirdwave"!==ot[et]&&"painting"!==ot[et]&&"chain mail"!==ot[et])&&(Vt=1),!Fa||qa||Vt||(po=0),dt=dt&&Fa,ja=ja&&!dt,wo=wo&&!ja,Ha=1*Ha.toPrecision(3),Vt||Ka||dt||"painting"===ot[et]||(Ea=$.min(Ea+50,100)),wo&&(st=.65,it=.65);let Eo=1/ro,To=Eo*Ue,Ro=1===Kt?po?.8:.1:Kt,No=1/(3+l[12]/32),Lo=nt[ht].c.length,Po=1===Ta&&Ua,_o=.01569*l[13],Io=2*_o+1,Bo=$.PI/50,Do=5+l[9]%7,Mo=0;/**
 License for Node class used from https://github.com/liquidcarrot/carrot which was heavily modified for use in this program.
 The MIT License

 Copyright (c) 2018-present Liquid Carrot Corporation <people@liquidcarrot.io> https://liquidcarrot.io.

 Copyright for portions of Carrot are held by the following parties as a part of project Carrot:
 - Copyright 2017 Thomas Wagenaar <wagenaartje@protonmail.com>
 - Copyright 2017 Juan Cazala - cazala.com

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 */
function Oo(e){this.id=""+Mo++,this.b=null==e?2*u()-1:e,this.in={ta:{},we:{}},this.ot={ta:{},we:{}},this.connect=function(e,t){this.ot.ta[e.id]=e,e.in.ta[this.id]=this,this.ot.we[e.id]=e.in.we[this.id]=null==t?2*$.random()-1:t},this.act=function(e){const t=this;function a(e){return 1/(1+$.exp(-e))}if(null!=e)this._op=1,this.op=e;else{const e=Object.keys(this.in.ta).reduce(((e,a)=>e+t.in.ta[a].op*t.in.we[a]),this.b);this._op=a(o=e)*(1-a(o)),this.op=a(e)}var o;return this.op},this.propagate=function(e,t=.3){const a=this,o=null==e?Object.keys(this.ot.ta).reduce(((e,o)=>(a.ot.ta[o].in.we[a.id]=a.ot.we[o]-=t*a.ot.ta[o].er*a.op,e+a.ot.ta[o].er*a.ot.we[o])),0):this.op-e;return this.er=o*this._op,this.b-=t*this.er,this.er}}const zo=e=>t=>{e[0].forEach(((e,a)=>e.act(t[a])));for(let t=1;t<e.length-1;t++)e[t].forEach((e=>e.act()));return e[e.length-1].map((e=>e.act()))},Uo=e=>t=>{e[e.length-1].forEach(((e,a)=>e.propagate(t[a])));for(let t=e.length-2;t>0;t--)e[t].forEach((e=>e.propagate()));return e[0].forEach((e=>e.propagate()))},Fo=(e,t,a)=>(o=1)=>{for(;o>0;)e.map((e=>{t(e.inputs),a(e.outputs)})),o--},qo=e=>e.map((e=>e.map((e=>{const t={...e.ot.we};return Object.keys(t).forEach((e=>{t[e]=1*t[e]})),[e.id,e.b,t]})))),jo=(e,t)=>{let a=0;const o=e.map((e=>e.map((e=>{let[o,n,...r]=e;const l=new Oo(t&&Xe&&Ze&&a%Xe[Ze]==0?void 0:n);return l.id=o,a++,l})))),n=(t,a,o)=>{let n=t[a],r=t[o];n.forEach(((t,o)=>{r.forEach((n=>{const[r,l,i]=e[a][o],s=i[n.id];t.connect(n,s)}))}))};return(e=>{for(let t=0;t<e.length-1;t++)n(e,t,t+1)})(o),o},Ho=(e,t)=>{e.forEach((e=>{t.forEach((t=>{e.connect(t)}))}))},Wo=(e,t)=>{t.forEach((t=>{e.connect(t)}))},Go=e=>{for(let t=0;t<e.length-1;t++)Ho(e[t],e[t+1])},Jo=e=>e.map((e=>{const t=[];for(let a=0;a<e;a++)t.push(new Oo);return t})),Xo=(e,t=0)=>{const a=(o=e,(o>>>0).toString(2)).split("").map((e=>1*e));var o;if(t)for(let e=a.length;e<t;e++)a.unshift(0);return a};function Yo(e){return"object"!=typeof e||Array.isArray(e)?JSON.stringify(e):`{${Object.keys(e).map((t=>`${t}:${Yo(e[t])}`)).join(",")}}`}const Qo=e=>Yo(e).replace(/"/g,""),Vo=e=>{const t=e.replace(/(\d+):/g,'"$1":');return JSON.parse(t)};let Ko,Zo,en,tn,an,on,nn,rn;const ln=e=>{en=Jo(e),tn=Jo(e),Go(en),Go(tn),Ko=qo(en),Zo=qo(tn),an=zo(en),on=Uo(en),nn=zo(tn),rn=Uo(tn)},sn=(e,t=0,a=!1)=>{0!==t&&1!==t||(Ko=Vo(e),en=jo(Ko,a),(a && (Ko=qo(en))),an=zo(en),on=Uo(en)),0!==t&&2!==t||(Zo=Vo(e),tn=jo(Zo,a),(a && (Zo=qo(tn))),nn=zo(tn),rn=Uo(tn))},cn=()=>{var t;Qe?(en=Jo(t=Ve?[100,65,42,27,17,11,7]:[43,28,18,12,7]),tn=Jo(t),Go(en),Go(tn),Ko=qo(en),Zo=qo(tn),an=zo(en),on=Uo(en),nn=zo(tn),rn=Uo(tn)):sn(e,0,Ke)};cn();let un=e=>new Array(e).fill(0);const dn=(e,t)=>{let a,o=un(12),n=un(24);Object.keys(e).forEach((a=>{let o=e[a],r=Object.keys(o);r.forEach(((e,a)=>{let l,i=0,s=o[e];if(s){if(l=x[s.x][s.y],l){const{strength:e,energy:a}=l;(e>t.strength&&a>0||wa&&gn(t.rockPaperScissors,l.state.rockPaperScissors))&&(i=1)}}else i=1;let c=l?1:0;if(ua&&l&&!i&&t.a===l.a&&l.energy>0){t.energy<10||(c=0)}n[a]=c,n[a+r.length]=i}))}));const r=e=>[...He.map((t=>e===t?1:0)),e?0:1];let l,i=[...o,...n,...r(t.prevMove)];if(Ve){let e=[255,8],a=[127,7],o=[e,e,e,e,e,a,a,[7,3]],{energy:n,strength:r,age:s,reproStrength:c,reproAge:u,stats:d,childCount:g}=t;l=[n,r,s,c,u,d.atk,d.def,g].reduce(((e,t,a)=>[...e,...Xo($.min(o[a][0],t),o[a][1])]),i)}else l=i;let s,c=[],u=t.act(i),d=0;if(u.forEach(((e,t)=>{e>d&&e>.6&&(d=e,s=t)})),o.some((e=>e))||n.some((e=>e))){const e=h(.11);He.forEach(((t,a)=>{(a===s||e)&&c.push(t)})),a=c.length?c[g(c.length)]:void 0}return[a,a?{inputs:l,outputs:r(a)}:void 0]},gn=(e,t)=>(e-t+3)%3==1,hn=(e,t)=>{if(e.energy<1)return 1;return $.max(0,t.stats.atk*t.stats.atk-e.state.stats.def*e.state.stats.def)>$.max(0,e.state.stats.atk*e.state.stats.atk-t.stats.def*t.stats.def)&&(!wa||!gn(t.rockPaperScissors,e.state.rockPaperScissors))},pn=e=>Object.keys(e).map((e=>({value:e,sort:g(100)}))).sort(((e,t)=>e.sort-t.sort)).map((({value:e})=>e)),mn=(e,t)=>{let a={};Object.keys(t.tier1).forEach((o=>{let n=t.tier1[o];if(!n)return void(a[o]=-1e3);let r=x[n.x][n.y];if(!r||!r.state)return void(a[o]=0);if(!hn(r,e))return void(a[o]=-100);let l=!1;if(ua&&e.a===r.a&&r.energy>0){e.energy<10||(l=!0)}a[o]=l?0:$.max(1,r.state.strength)})),Object.keys(t.tier2).forEach((o=>{let n=t.tier2[o];if(n){let t=x[n.x][n.y];if(!t||!t.state)return;let r=hn(t,e),l={uul:["ul"],uu:["ul","ur"],uur:["ur"],urr:["ur","r"],rr:["r"],brr:["r","br"],bbr:["br"],bb:["br","bl"],bbl:["bl"],bll:["bl","l"],ll:["l"],ull:["l","ul"]}[o];if(r){let o=!1;if(ua&&e.a===t.a&&t.energy>0){e.energy<10||(o=!0)}l.forEach((n=>{a[n]+=o?0:$.max(1,e.strength-t.state.strength)}))}else l.forEach((e=>{a[e]-=100}))}}));let o=0,n=[];return Object.keys(a).forEach((e=>{let t=a[e];t>o?(o=t,n=[e]):t===o&&n.push(e)})),n.length?n[g(n.length)]:void 0},fn=(e,t,a)=>Object.keys(e).find((o=>{let n=e[o];return n&&n.x===t&&n.y===a}));let bn=e=>e>90&&e<120,yn=e=>e>170&&e<185,vn=e=>e>240&&e<250,kn=e=>!(bn(e)||yn(e)||vn(e)),wn=(e,t)=>{pr={},De(),pe(`Set divider (${e?"vertical":"horizontal"}) to: ${w(t)}`)},$n=()=>{Nt=!Nt,wn(1,Nt)},Cn=()=>{Lt=!Lt,wn(0,Lt)},Sn=()=>{st=1,Y||Ee(),ne||setTimeout((()=>{ne=!0,be(),fr()}),Y?0:500)},xn=e=>{void 0!==e&&(ht=e),[ft,bt,yt]=0===ht?[Ut,Ft,qt]:1===ht?[Ft,qt,Ut]:[qt,Ut,Ft];let{c:t}=nt[ht];if(Zn=t,er=Zn.length,vt=jt/ft,kt=Ht/ft,wt=Wt/ft,$t=Ht/bt,Ct=Wt/yt,Lo=nt[ht].c.length,ve||De(),void 0!==e){let e=nt[ht].name;pe(`using ${Ao?"preset":"calculated"} color scheme ${ht+1}${Ao?` - ${e}`:""}`),fr()}},An=()=>{xn((ht+1)%3)},En=()=>{Ea>Sa?xt(Ea-5):pe(`cell count is already at min of ${Sa}`)},Tn=()=>{Ea<200?xt(Ea+5):pe(`cell count is already at max of ${Aa}`)},Rn=()=>{2===la?pe("Learning mode is unavailable with only control AI (press 8 to change)"):(ca=!ca,ca||ua&&Nn(),pe(`Learning mode set to: ${w(ca)}`),z&&Hn())},Nn=(e=0)=>{ua=!ua,ua||(da=!1),e&&pe(`AutoTrain set to: ${w(ua)}`),z&&Hn()},Ln=()=>{Ve=!Ve,Qe=Ve,cn(),fr(),pe(`Advanced networks set to: ${w(Ve)}`),Qe=!1},Pn=(e=0)=>{da=!da,e&&pe(`AutoTrain diagnostic color set to: ${w(da)}`),z&&Hn()},_n=e=>{la=e,2===la&&(ca=!1,ua=!1,da=!1),fr(),pe(`Set AI type to: ${0===la?"smart AI":1===la?"smart AI and control AI":"control AI"}`),z&&Hn()},In=(e=0,t=0)=>{let a,o;e?(a=localStorage.getItem(`genart_nn_${i}`),o=a):(a=document.getElementById("newNet").value,o=document.getElementById("newNet2").value),a&&sn(a,1),o&&sn(o,2),fr(),t||pe("New network(s) loaded!")},Bn=()=>{Ot=[Ot[0]+1,Ot[1]]},Dn=()=>{Ot=[Ot[0],Ot[1]+1]},Mn=()=>{ca=!1,Ot=[0,0],zt=1,ua=!0,da=1,la=0,In(0,1),Pe(),pe("Battle HAS BEGUN!!")},On=e=>{mt=`${e?"Red":"Blue"} team wins! Blue: ${Ot[0]}, Red: ${Ot[1]}`,pe(mt),zt=0,ua=0,da=0,fr()},zn=()=>{cn(),fr(),pe("Default networks loaded!")},Un=()=>{ia=!ia,pe(`Hivemind Mode for Blue Team set to: ${w(ia)}`),z&&Hn(),fr()},Fn=()=>{sa=!sa,pe(`Hivemind Mode for Red Team set to: ${w(sa)}`),z&&Hn(),fr()};function qn(e){navigator.clipboard&&navigator.clipboard.writeText(document.getElementById("newNet"+(1===e?"":"2")).value)}const jn=()=>{Pe(),Ne()};let Hn=()=>{z&&z.remove();let e=2!==la,t=e&&ca,a=t&&ua,o=`<div><div style=text-align:right><button onclick=jn()>Help</button> <button onclick=Pe()>CLOSE</button></div><h1>AI Menu</h1><div>AI Type: <input id=smartonly name=aitype onclick=_n(0) type=radio value=0 ${0===la?"checked":""}/><label for=smartonly>Neural</label><input type="radio" id="smartcontrol" name="aitype" onClick="_n(1)" value="1" ${1===la?"checked":""} /><label for="smartcontrol">Neural+Control</label><input type="radio" id="controlonly" name="aitype" onClick="_n(2)" value="2" ${2===la?"checked":""} /><label for="controlonly">Control</label></div><br/><div>Learning Nets: <input type="checkbox" onClick="Rn()" ${e&&ca?"checked":""} ${e?"":"disabled"}/></div><div>AutoTrain Mode: <input type="checkbox" onClick="Nn(1)" ${ua?"checked":""} ${t?"":"disabled"}/></div><div>AutoTrain Diagnostic Color: <input type="checkbox" onClick="Pn(1)" ${da?"checked":""} ${a?"":"disabled"}/></div><br/><br/><div>Best Network: <input type="button" onClick="ir(hr)" value="Export" ${e?"":"disabled"} /><input type="button" onClick="ir(hr, false, true)" value="Save" /><br/><br/><input type="button" onClick="In(true)" value="Load" /><input type="button" onClick="zn()" value="Reset to Default" ${e?"":"disabled"} /></div><br/><div><table><tr><td>Blue Team:</td><td><TextArea id="newNet" >${Qo(qo(en))}</TextArea><input type="button" onclick="qn(1)" value="Copy"/><br/><div>Hivemind Mode: <input type="checkbox" onClick="Un()" ${ia?"checked":""} ${a?"":"disabled"}/></div></td></tr><tr><td>&nbsp;</td></tr><tr><td>Red Team:</td><td><TextArea id="newNet2" >${Qo(qo(tn))}</TextArea><input type="button" onclick="qn(2)" value="Copy"/><div>Hivemind Mode: <input type="checkbox" onClick="Fn()" ${sa?"checked":""} ${a?"":"disabled"}/></div></tr><tr><td colspan="2" style="padding-top:10px;"><input type="button" onClick="In();" value="Upload Neural Net(s)"/><input type="button" onClick="Mn();" value="BATTLE!!!"/></td></tr></table><br/><br/><div>Advanced Networks: <input type="checkbox" onClick="Ln()" ${Ve?"checked":""}/> (experimental/slow -- turn this on before loading advanced networks)</div>\n</div>\n${mt?`<p>Last Battle Result: ${mt}</p>`:""}</div>`;z=Re(o)},Wn=()=>{G=!G,G?Hn():z.remove()},Gn=e=>{let a=e.key;if(W&&"h"!==a)return;if(G)return;if(Z===je.CELL_COUNT)switch(a){case"1":case"2":case"3":xt(10+10*a);break;case"4":case"5":case"6":case"7":case"8":case"9":xt(20*a-30);break;case"0":xt(200);break;case"ArrowLeft":En();break;case"ArrowRight":Tn()}let o=e=>{_t=e,H=q&&e,pe(`Set diagnostic mode to ${["off","strength","energy","age","child count","min repro strength","min repro age","time since crobe ate","atk + def","rock paper scissors"][e]||"unknown"} (${e>0&&e<8?"blue is higher":8===e?"red is atk, blue is def":"red=rock, green=paper, blue=scissors"+(wa?"":" -- not enabled, but you can watch")})`),De()};if(Z===je.XRAY)switch(a){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":o(1*a);break;case"ArrowLeft":o((_t-1+10)%10);break;case"ArrowRight":o((_t+1+10)%10)}let n=e=>{rt&&(lt=(lt+(e?1:-1)+t.length)%t.length,nt=[lt,lt,lt].map(((e,a)=>{let o=Object.keys(t[e])[a],n=t[e][o];return{name:o,c:n.c,d:n.d}})),fr(),ct=0,Ao=1,pe(`Using preset color set ${lt}, color scheme ${ht+1} - "${nt[ht].name}"`))};switch(a){case"ArrowUp":n(1);break;case"ArrowDown":n(0);break;case"a":Sn();break;case"b":De();break;case"i":Wn();break;case",":tt=!tt;break;case"l":$n();break;case"u":Cn();break;case"j":Pt=!Pt,Nt=Pt,Lt=Pt,Ao=!Pt,Se(Pt?1e3:60),pe(`Speciation mode set to: ${w(Pt)}`),fr();break;case" ":An();break;case"t":Ao=!Ao,pe(`Using Preset Colors set to: ${w(Ao)}`),ht=0,yr();break;case"n":pe("reseeding canvas..."),yr();break;case"w":Tt=!Tt,pe(`Toggling toxic waste to: ${w(Tt)}`);break;case"x":me(je.CELL_COUNT,"Cell Count");break;case"k":me(je.XRAY,"Diagnostic");break;case"z":st=st===it?1:it,pe(`Composition framing set to: ${w(1!==st)}`),yr()}};window.addEventListener("keydown",Gn,!1);let Jn,Xn,Yn,Qn,Vn,Kn,Zn,er,tr,xtsr,ar,or,nr,rr,lr,ir=(e,t=!1,a=!1)=>{pe("Exporting best net");let o,n=0,r=0;if(e.filter((e=>e.state.isSmart)).forEach((e=>{e.state.generation>=n&&(n===e.state.generation?e.state.strength>r&&(r=e.state.strength,o=e):(n=e.state.generation,o=e))})),o){let e=qo(o.state.net);t&&(o.state.a%(1===la?3:2)==0?(Ko=Zo,ia&&(en=jo(Ko))):o.state.a%(1===la?3:2)==1&&(Zo=e,sa&&(tn=jo(Zo))),fr());let n=Qo(e);a&&localStorage.setItem(`genart_nn_${i}`,n);console.log("saved best net to local storage", t ? "" : n);}else t&&yr()},sr=()=>{pt=null,Mt=!0},cr=()=>{pt&&(clearTimeout(pt),pt=null),Mt&&(Mt=!1,setTimeout((()=>{R.focus(),R.blur(),setTimeout((()=>{Ne()}),1)}),1))},ur=e=>{It=e.touches[0].clientX,Bt=e.touches[0].clientY,pt||(pt=setTimeout(sr,Dt))},dr=e=>{if(null===It||null===Bt)return;let{clientX:t,clientY:a}=e.touches[0],o=It-t,n=Bt-a;$.abs(o)>$.abs(n)?o>0?Ne():(2===ht&&(re=!re,xn()),An()):n>0?Tn():En(),It=null,Bt=null,e.preventDefault()},gr=()=>{ne?(Ae(),st=st===it?1:it,fr()):Sn()},hr=[],pr={},mr={},fr=()=>{F=Y&&ne&&Vt?1e3:mo,At=so?re?100-uo:uo:50,co&&(At=100-At),R.ondblclick=gr,R.addEventListener("touchstart",ur,0),R.addEventListener("touchmove",dr,0),R.addEventListener("touchend",cr,0),T.lineCap="square",T.lineJoin=Xa||Za?"round":"square",yr()},br=({state:e,x:t,y:a})=>{let{a:o,energy:n,movingCounter:r,movingTempo:l,movingAmount:i}=e;if(n<1||ma&&(r+l)%l<i)return{state:{...e,movingCounter:e.movingCounter+1},x:t,y:a};let s,c,u,d,p,m=Nr(t,a);if(e.isSmart){let[t,a]=dn(m,e);a&&(p=a),d=t}else d=mn(e,m);if(d){let e=m.tier1[d];e&&(u=d,s=e.x,c=e.y)}if(void 0===s||void 0===c)if(o%7<3){let n=(e.deviance+U)%20<10?f():0,r=(e.deviance+U)%2<1?f():0;o%2==0&&([n,r]=[r,n]),s=t+n,c=a+r}else{let n,r=e.movingCounter%(3*e.stepSize)<e.stepSize,l=e.movingCounter%(3*e.stepSize)>=2*e.stepSize,i=e.movingCounter%(3*e.stepSize2)<e.stepSize2,d=e.movingCounter%(3*e.stepSize2)>=2*e.stepSize2,p=0;if(e.isRandom?(p=g(3)-1,n=g(3)-1):(r&&(p=(cellCount2+a)%2==0?-1:0),l&&(p=(cellCount2+a)%2==0?0:1),n=i?-1:d?1:0),o%7<5){let e=[["ul","l","bl"],[h()?"ul":"ur","_",h()?"bl":"br"],["ur","r","br"]][p+1][n+1],o="_"===e?{x:t,y:a}:m.tier1[e];o&&void 0!==o.x&&void 0!==o.y?(s=o.x,c=o.y,u=e):(s=t,c=a)}else s=t+p,c=a+n}if(t!==s||a!==c){let e=fn(m.tier1,s,c);if(e)u=e;else{let e=fn(m.tier2,s,c),[o,n]=(e=>{let t=Je[e],a=m.tier1[t];return[a,a?t:void 0]})(e);o&&void 0!==o.x&&void 0!==o.y?(s=o.x,c=o.y,u=n):(s=t,c=a)}}return"bounded"===ga?((s<0||s>=Ea)&&(s=t),(c<0||c>=cellCount2)&&(c=a),u=t===s&&a===c?void 0:fn(m.tier1,s,c)):(s=(s+Ea)%Ea,c=(c+cellCount2)%cellCount2),{state:{...e,trainingData:p?[...e.trainingData,p].slice(-2):e.trainingData,prevMove:u,movingCounter:e.movingCounter+1,energy:$.max(0,e.energy-(0===s||s===Ea-1||0===c||c===cellCount2-1?5:1)),rotation:e.constantSpinner<50?e.rotation+.2*e.constantSpinner:e.rotation},x:s,y:c}},yr=()=>{xt||(xt=(e,t=1)=>{Ea=$.max(Sa,$.min(Aa,e)),Jn=st*I/(2*Ea*S(.5*Oe)),Yn=Jn*S(Oe),Xn=st*I/(2*Ea),cellCount2=C(Ea*(Jn/Xn)*(B/I)),Kn=Ga?Ea*Fe:Ha,ar=.5*Ea,or=.5*cellCount2,tr=.25*I,xtsr=I/2400,St=Vt||!po?g(Ea*cellCount2/6,Ea*cellCount2/5):g(Ea*cellCount2/5,Ea*cellCount2*.5),ne&&(St*=Y?.5:1.5),St*=.3,t&&(pe(`changing cell count to ${Ea}`),yr())}),xt(Ea,0),Qn=(1-st)*I/2,Vn=(1-st)*B/2,pr={},nr={},rr={},lr={},U=0,hr=[],q&&he(1),xn(),A(Ea,cellCount2);for(let e=0;e<St;e++){let t,a,o,n,r;if(Po&&(o=Do,a=g(o+1)),Ao)t=Po?a%Lo:(g(Lo)+C(e%5*Lo/3))%Lo;else{let o=1===Ta&&Ua?a:e;t=o%7==0?l[0]:o%7<4?l[1]:l[2];let n=0,r=0;for(;!kn(t)&&r<20;)t=l[(o%7==0?2:15)+n++]||0,r++;ht&&(t+=ht*(.5*l[12]+15))}let i=0;for(ko&&([Ea,cellCount2,ar,or]=[cellCount2,Ea,or,ar]);(!n||Nt&&n===C(ar)||!r||Lt&&r===C(or))&&i<100;){if(2===Ta){let e=C(ar),t=C(or),a=h();if(Ba&&Da)n=a?C(ar):g(Ea*(1-za),Ea*za),r=a?g(cellCount2*(1-za),cellCount2*za):C(or);else{let o=a?Ma:Oa,l=t-o*e,i=$.min(e*(1+za)*.5,o?e/o:e);n=g(e-i,e+i),r=C(o*n+l),a||(r=cellCount2*za-r)}}else if(3===Ta)n=g(Ea*No,Ea-Ea*No),r=g(cellCount2*No,cellCount2-cellCount2*No);else if(4===Ta){let e=h();h()?(n=e?g(Ea/Io,_o*Ea/Io):g((_o+1)*Ea/Io,(Io-1)*Ea/Io),r=e?g(cellCount2/Io,_o*cellCount2/Io):g((_o+1)*cellCount2/Io,(Io-1)*cellCount2/Io)):(n=e?g((_o+1)*Ea/Io,(Io-1)*Ea/Io):g(Ea/Io,_o*Ea/Io),r=e?g(cellCount2/Io,_o*cellCount2/Io):g((_o+1)*cellCount2/Io,(Io-1)*cellCount2/Io))}else if(5===Ta)n=g(Ea/8,7*Ea/8),r=C((1+e%9)*cellCount2/10);else if(1===Ta){let e=Ua?o:Do,t=Ua?a:g(e+1);n=C(Ea*l[(1+t)%16]*Ue)+g(5)-2,r=C(cellCount2*l[8+t%16]*Ue)+g(5)-2}else if(6===Ta){let e,t,a=Bo*g(101),o=Na?Bo*g(101):a,l=h();if(Ra||Na||La){let a=Pa/2.2*(Ra?16:6);e=(Ra?l:h())?Ea/Pa:Ea/a,t=I/B*((Ra?l:h())?cellCount2/Pa:cellCount2/a)}else e=Ea/Pa,t=I/B*cellCount2/Pa;let i=e,s=t;e>ar-10&&(i=ar-10,s=t*(i/e)),s>or-10&&(s=or-10,i=e*(s/t)),n=C(ar+S(a)*i),r=C(or+$.sin(o)*s)}else if(0===Ta){let e=(e=0)=>50+205*(_a?$.min(l[6+e],64):$.max(l[6+e]*(0===e?1:1+e),192))/255,t=(e,t=0)=>{let a=255-e;return.04+6*a/20500+(27+4*a/205)*l[12+t]/255*.01},a=e(),o=t(a);_a&&(o*=20);let i=0;if(l[3]%2==0){if(n=g(Ea),r=C(or+a*(or-10)*Ue*$.sin(i+n*o)),Ia){let a=e(1),o=t(a);r+=C(a*(.25*cellCount2-10)*Ue*$.sin(n*o))}}else if(r=g(cellCount2),n=C(ar+a*(ar-10)*Ue*S(i+r*o)),Ia){let a=e(1),o=t(a);n+=C(a*(.25*Ea-10)*Ue*$.sin(n*o))}}else n=g(Ea),r=g(cellCount2);n=C(m(0,Ea-1,n)),r=C(m(0,cellCount2-1,r)),i++}ko&&([Ea,cellCount2,n,r,ar,or]=[cellCount2,Ea,r,n,or,ar]),yo&&(n=Ea-1-n),vo&&(r=cellCount2-1-r);let s=g(2,20),c=g(2,20),u=h(1/3),p=g(2,100),b=g(256),y=g(1,11),v=g(1,11),k=y/v,w=5,A=5;for(let e=0;e<b/16;e++)w/A<k?w++:A++;let E,T,R,N=0===ho?h():1===ho,[L,P]=Ao?[.125,.5].map((e=>N?(t+C(Lo*e))%Lo:t)):[15,30].map((e=>N?t+e:t)),_=0===la||1===la&&e%3<2;if(_){e%(1===la?3:2)==0?ia?(E=en,T=an,R=on):(E=jo(Ko),T=zo(E),R=Uo(E)):e%(1===la?3:2)==1&&(sa?(E=tn,T=nn,R=rn):(E=jo(Zo),T=zo(E),R=Uo(E)))}let D={x:n,y:r,hungry:!1,target:void 0,state:{age:0,generation:1,prevMove:void 0,net:E,act:T,propagate:R,isSmart:_,trainingData:[],rockPaperScissors:g(3),family:g(100),timeSinceEaten:g(ka),movingCounter:g(100),movingTempo:p,movingAmount:g(1,p),reproAge:g(fa,ba),reproStrength:g(ya,va),stepSize:s,stepSize2:c,isRandom:u,color:t,color2:L,color3:P,rotation:g(360),deviance:g(2e3),strength:b,traits:{ratioA:y,ratioB:v,targetAtkToDefRatio:k},stats:{atk:w,def:A},energy:g(20,101),childCount:g(2,7),childrenByBudding:0===$a||1===$a&&h(),budStrengthRatio:Ca?.01*d(80,100):1,sideCount:9===Ja?g(3,9):Ja,constantSpinner:Ya?f()*g(20,101):0,colorsDiffer:N,a:e}};hr.push(D),x[D.x][D.y]=D}},vr=(e,t,a)=>{let o=Rr(e.x,e.y),n=Object.keys(o).filter((e=>void 0!==o[e])),r=n[g(n.length)],{x:l,y:i}=o[r],{state:s}=e,{budStrengthRatio:c,childCount:u,color:d,color2:h,color3:p,colorsDiffer:f,deviance:b,family:y,generation:w,movingAmount:$,movingTempo:C,reproAge:S,reproStrength:x,rotation:A,stepSize:E,stepSize2:T,traits:R}=s,{ratioA:N,ratioB:L}=R;[E,T]=[E,T].map((e=>m(0,100,k(e,3)))),[S,x]=[S,x].map((e=>m(5,600,k(e,3))));let P=Ao?Lo:360,_=Ao?1:4;[d,h,p]=[d,h,f?p:h].map((e=>(v(e,_)+P)%P)),b=m(0,2e3,k(b,3)),A=(v(A,1)+360)%360,u=m(2,6,k(u,1)),C=m(0,200,k(C,2)),$=e.state.movingTempo===C?$:m(1,C,v($,1)),y=m(0,99,k(y,1)),c=m(.01,1,k(c,.01,.01)),[N,L]=[N,L].map((e=>m(.01,10,k(e,1))));let I=N/L,B=5,D=5;for(let e=0;e<t/16;e++)B/D<I?B++:D++;let M,O,z,U=(e.prev||[]).map((e=>({...e})));if(e.state.isSmart)if(e.state.a%(1===la?3:2)==0)if(ia)M=en,O=an,z=on;else{let t=qo(e.state.net);M=jo(t),O=zo(M),z=Uo(M)}else if(e.state.a%(1===la?3:2)==1)if(sa)M=tn,O=nn,z=rn;else{let t=qo(e.state.net);M=jo(t),O=zo(M),z=Uo(M)}return{...e,x:l,y:i,prev:[U,{x:e.x,y:e.y}],state:{...e.state,net:M,act:O,propagate:z,trainingData:[...e.state.trainingData],isSmart:e.state.isSmart,age:0,prevMove:void 0,movingCounter:g(100),timeSinceEaten:0,budStrengthRatio:c,childCount:u,color:d,color2:h,color3:p,deviance:b,energy:a,family:y,generation:w+1,movingAmount:$,movingTempo:C,reproAge:S,reproStrength:x,rotation:A,stepSize:E,stepSize2:T,stats:{atk:B,def:D},strength:t,traits:{ratioA:N,ratioB:L,targetAtkToDefRatio:I}}}};kr=()=>{let e=[],t=[];A(Ea,cellCount2,t);let a={},o=(e,t,o)=>{let n=`${e}_${t}`;a[n]||(a[n]=[]),a[n].push(o)};hr.forEach((e=>{let{x:t,y:a,state:n}=e,{strength:r,age:l,energy:i,reproStrength:s,reproAge:c,timeSinceEaten:u,childCount:d,childrenByBudding:g,budStrengthRatio:h}=n,p=r<s,m=l<c;if(0!==i&&((ha?p||m:p&&m)||u<ka)||0===i&&(!Rt||u<.75*ka)){let{x:t,y:a,state:n}=br(e);o(t,a,{...e,state:{...n}})}else{let n=g?h:1,l=$.max(1,C(n*r/d)),s=i?$.max(1,C(n*i/d)):0,c=r-l*(d-1);if(c<=0)o(t,a,e);else if(g){let n=vr(e,c,i-s*(d-1));if(n){o(n.x,n.y,{...n,x:t,y:a});for(let t=0;t<d-1;t++){let t=vr(e,l,s);t&&o(t.x,t.y,t)}}}else for(let t=0;t<d;t++){let a=vr(e,t<d-1?l:c,t<d-1?s:i-s*(d-1));a&&o(a.x,a.y,a)}}})),Object.keys(a).forEach((o=>{let[n,r]=o.split("_");n*=1,r*=1;let l,i,s=a[o],{trainingData:c,energy:u,strength:d,stats:g,timeSinceEaten:h}=s[0].state,{atk:p,def:m}=g;if(1===s.length)i=s[0],h++;else{let e=s.sort(((e,t)=>{if(t.state.energy<1&&e.state.energy>0)return-1;if(t.state.energy>0&&e.state.energy<1)return 1;if(wa){let a=(t.state.rockPaperScissors-e.state.rockPaperScissors+3)%3;if(1===a)return 1;if(2===a)return-1}let a=$.max(0,t.state.stats.atk*t.state.stats.atk-e.state.stats.def*e.state.stats.def),o=$.max(0,e.state.stats.atk*e.state.stats.atk-t.state.stats.def*t.state.stats.def);return a-o?a-o:t.state.age*t.state.strength-e.state.age*e.state.strength}));i=e[0];let t=0,a=0;for(let o=1;o<e.length;o++)t+=e[o].state.strength,a+=e[o].state.energy+1*e[o].state.strength;d=$.max(0,i.state.strength+t),u=$.max(0,i.state.energy+a);let o=5,n=5;for(let e=0;e<.0625*d;e++)o<i.state.traits.targetAtkToDefRatio*n?o++:n++;if(i.state.isSmart&&i.state.trainingData.length>0&&ca){(f=i.state.trainingData,b=i.state.act,y=i.state.propagate,(e=1)=>{for(;e>0;)f.map((e=>{b(e.inputs),y(e.outputs)})),e--})(1)}c=[],h=0}var f,b,y;let v=[...i.prev||[]];v.length&&v[v.length-1].x===i.x&&v[v.length-1].y===i.y||v.push({x:i.x,y:i.y}),l={...i,x:n,y:r,prev:v.slice(-ta),state:{...i.state,trainingData:c,age:i.state.age+1,stats:{atk:p,def:m},timeSinceEaten:h,strength:d,energy:u}},t[n][r]=l,l&&e.push(l)})),hr=e,x=t},wr=(e,t,a,o,n=!1,r=!1)=>{Ka&&!r&&(T.strokeStyle=T.fillStyle,T.fillStyle="rgba(0, 0, 0, 0)"),T.beginPath();let l=ze[o].offsets;for(let r=0;r<o;r++){let{x:i,y:s}=l[r];T.lineTo(e+a*i,t+a*s),Xa&&n&&(4!==o&&r%2!=1||(T.lineTo(e,t),T.lineTo(e+a*i,t+a*s)))}if(T.closePath(),T.fill(),n)if(Xa&&Za&&!eo){let e=T.lineJoin;T.lineJoin="square",T.stroke(),T.lineJoin=e}else T.stroke()};const $r=(e,t,a,o)=>{let n=[];for(let r=0;r<e.length;r++){let l=e[r],i=t[r];"bounded"===ga&&(l<0||l>=Ea||i<0||i>=cellCount2)||Nt&&(l===C(ar)||l<C(ar)&&a>C(ar)||l>C(ar)&&a<C(ar))||Lt&&(i===C(or)||i<C(or)&&o>C(or)||i>C(or)&&o<C(or))?(Nt&&(l===C(ar)||l<C(ar)&&a>C(ar)||l>C(ar)&&C(ar)),e[r]=t[r]=void 0):(e[r]=(l+Ea)%Ea,t[r]=(i+cellCount2)%cellCount2),n.push(e[r],t[r])}return n},Cr=(e,t,a,o)=>[[a-1,a-e,a+t,a+1,a+t,a-e],[o,o-1,o-1,o,o+1,o+1]],Sr=(e,t,a,o)=>[[-2,-e-1,2*-e,0,2*t,t+1,2,t+1,2*t,0,2*-e,-e-1].map((e=>a+e)),[0,-1,-2,-2,-2,-1,0,1,2,2,2,1].map((e=>o+e))],xr=(e,t,a=0)=>{let o=(a?"out":"")+`${e}_${t}`,n=pr[o];if(!n){let r=a?We:He,l=a?Sr:Cr,i=(cellCount2+t)%2==1?0:1,s=1-i,[c,u]=l(i,s,e,t),d=$r(c,u,e,t);n={},r.forEach(((e,t)=>{n[e]=void 0!==d[2*t]?{x:d[2*t],y:d[2*t+1]}:void 0})),pr[o]=n}return n};let Ar,Er,Tr,Rr=(e,t)=>xr(e,t),Nr=(e,t)=>({tier1:Rr(e,t),tier2:xr(e,t,1)}),Lr=(e,t)=>{let a=`${e}_${t}`,o=nr[a];if(!o){o=[(((t+cellCount2)%2==1?2:1)+2*e)*Xn+Qn,Jn+t*(Jn+Yn)+Vn],nr[a]=o}return o},Pr=(e,t,a,o,n=!1,r=0,l=!1,i=!1)=>{let[s,c]=Lr(e,t),u=0,d=0;!l&&h(.25)&&(u=oo(),d=oo());let g=s+u,p=c+d;if(Qa){let e=r*qe;T.translate(g,p),T.rotate(e),T.translate(-g,-p)}if(wr(g,p,Jn*a,o,n,i),Qa&&T.setTransform(1,0,0,1,0,0),e>=Ea-2&&I===window.innerWidth&&1===st&&"bounded"!==ga){let e=(((t+cellCount2)%2==1?2:1)-2)*Xn-1+Qn;if(Qa){let t=r*qe;T.translate(e,c),T.rotate(t),T.translate(-e,-c)}let l=0,s=0;h(.25)&&(l=oo(),s=oo());let u=e+l,d=c+s;if(Fa){let e=T.createRadialGradient(u,d,0,u,d,Jn*a*(qa?1:.5));e.addColorStop(0,Ar),Er&&e.addColorStop(.5,Er),e.addColorStop(1,Tr),T.fillStyle=e}wr(u,d,Jn*a,o,n,i),Qa&&T.setTransform(1,0,0,1,0,0)}},_r={},Ir={},Br={},Dr=(e,t,a,o=0)=>{let n=`${a}_${t}_${o}_${e}`,r=Br[n];if(!r){let i,s,[c,u,d,g,h]=[vt,kt,wt,$t,Ct].map(((t,a)=>{let o=Ir[`${a}_${e}`];return o||(Ir[`${a}_${e}`]=o=t*e),o}));0===a?(s=c,i=6):1===a?(s=0===o?u:g,i=7):(s=0===o?d:h,i=8),r=128*($.sin(l[i]+t*s)+1),Br[n]=r}return r},Mr=e=>{T.lineWidth=xtsr,T.fillStyle=T.strokeStyle=`#${re?"111111":"EEEEEE"}99`;let[t,a]=[Ea,cellCount2];e&&([t,a]=[a,t]);for(let o=-10;o<t+10;o++){let[t,n]=[o,C(.5*a)];e&&([t,n]=[n,t]),Pr(t,n,1,6,1,0,1,1)}},Or=(e,t)=>{let a=`${e}_${t}`,o=rr[a];if(!o){if(0===So)o=$.sqrt((C(ar)-$.abs(e-C(ar)))*(C(or)-$.abs(C(or)-t)))*Gt;else if(1===So)o=$.sqrt($.abs(e-C(ar))*$.abs(C(or)-t))*Jt;else if(2===So){let a=$o?Ea-e:e,n=Co?cellCount2-t:t;o=$.sqrt(a*n)*Xt}else o=3===So?t*Yt:(cellCount2-t)*Qt;rr[a]=o}return o},zr=(e,t,a)=>{let o=`${e}_${t}_${a}`,n=lr[o];if(!n){let r=1;wo&&(r+=Or(t,a)),n=C(m(Y?8:4,60,($.min(60,ta)-e)*Ha*aa*r*.3))*xtsr,lr[o]=n}return n},Ur=(e,t,a)=>{let o=`${e}_${t}_${a}`,n=mr[o];return n||(n=Tt?128*($.sin(t+e/(l[a]+1))+1):0,mr[o]=n),n},Fr=()=>{po&&De(fo),0!==_t&&De(),ie&&U%ce==0&&(ye=U,ve=!0,ue&&(ht=(ht+1)%3,xn())),Nt&&Mr(!0),Lt&&Mr();let e=0,t=0,a=ct?C(1/((1/io-1)/15+1)*.5*U*20):0,o=ut?C((.4*$.sin(U%256*.1)+1)*(1+U%256)):U%256;hr.forEach((n=>{let{x:r,y:l,prev:i,state:s}=n,c=s.energy<1;if(s.isSmart&&!c&&(s.a%(1===la?3:2)==0?e++:s.a%(1===la?3:2)==1&&t++),x[r][l].prev=(i||[]).slice(-ta).map((({x:e,y:t})=>({x:e,y:t}))),n.prev=x[r][l].prev,!tt)return;let u=Wa,d=s.sideCount,g=s.rotation,h=m(1.2,10,Kn*(Ga?s.strength:1));if(0===_t){if(Vt&&!da&&i&&i.length){let e=r,t=l,[u,d]=Lr(r,l);T.beginPath(),T.moveTo(u,d);let g=Ao?Zn[(s.color3+er)%er][2]:50,h=$.min(tr,ea?.01*n.state.strength:.01*n.state.energy);i.reverse().forEach((({x:n,y:i},u)=>{let[d,p]=Lr(n,i),[m,f]=Lr(e,t),[b,y,v,k]=[m+(e===n?0:(e%2?-1:1)*h)+ra(c),f+(t===i?0:(t%2?-1:1)*h)+ra(c),d+ra(c),p+ra(c)];if($.abs(e-n)<2&&$.abs(t-i)<2){if(so&&(g=_r[u],!g)){let e=$.max(10,50-u*go),t=$.min(90,50+u*go);co&&([t,e]=[e,t]),g=$.round(re?e:t),_r[u]=g}let e,t=c?.3*Ro:Ro;if(Ao){let o=Zn[(s.color3+er)%er];e=`hsla(${o[0]+a}, ${o[1]}%, ${.05*(19*g+o[2])}%, ${t})`}else if(ct){let[a,n,r]=[0,1,2].map((e=>Dr(o,s.family,e)+g-60));e=`rgba(${a},${n},${r},${t})`}else e=`hsla(${s.color3+a},100%,${g}%,${t})`;T.strokeStyle=e,T.lineWidth=zr(u,r,l),Zt?T.quadraticCurveTo(b,y,v,k):T.lineTo(v,k)}else T.stroke(),T.closePath(),T.beginPath(),T.moveTo(v,k);e=n,t=i})),T.stroke(),T.closePath()}if(!Va||da){T.lineWidth=(Ka?m(3,8,(Ga?.002*s.strength:5)*Ha):po?3:1)*xtsr,Ka||(T.strokeStyle="black");let e,t,n,i,d,g,p=dt?Vt?30:0:m(30,80,s.deviance*(no?s.strength*To:Eo));if(wo&&(h+=Or(r,l)),ct&&([i,d,g]=[0,1,1].map(((e,t)=>Dr(o,s.family,t,e)))),Fa){let ttt=so?re?co?70:30:co?30:70:re?100:0;if([t,e]=Lr(r,l),n=T.createRadialGradient(t,e,0,t,e,Jn*h*(qa?1:.5)),Ao){let e,o,n=Zn[(s.color+er)%er],r=so&&!Ka?At:n[2];ja&&!dt?(e=n,o=$.min(.8,$.max(.2,.01*(p+20)))):(e=Zn[(s.color2+er)%er],ttt=e[2],o=.005*(p+20)),Ar=`hsla(${e[0]+a}, ${e[1]}%, ${ttt}%, ${.01*(p+20)})`,Er=`hsla(${e[0]+a}, ${e[1]}%, ${e[2]}%, ${o})`,Tr=`hsla(${n[0]+a}, ${n[1]}%, ${r}%, 0)`}else ct?(ja&&!dt?Ar=`hsla(0, 0%, ${ttt}%, 0.1)`:(Ar=`rgba(${i},${d},${g},${po?.9:.3})`,Er=`rgba(${i},${d},${g},${po?.8:.2})`),Tr=`rgba(${i},${d},${g},0)`):(Ar=`hsla(${s.color2}, 100%, ${ja&&!dt ? ttt : 50}%, ${.01*(p+20)})`,Er=`hsla(${s.color2}, 100%, 50%, ${.005*(p+20)})`,Tr=`hsla(${s.color}, 100%, ${At}%, 0)`);if(n.addColorStop(0,Ar),dt){let e=1+C(.5+gt*h),t=1/(2*e+1);for(let a=0;a<2*e;a+=2)n.addColorStop(m(0,1,t*(a+1)),Tr),n.addColorStop(m(0,1,t*(a+2)),Ar)}else Er&&n.addColorStop(.5,Er);n.addColorStop(1,Tr),T.fillStyle=n}else if(Ao){let e=Zn[(s.color2+er)%er];T.fillStyle=`hsla(${e[0]+a}, ${e[1]}%, ${e[2]}%, ${.01*p})`}else T.fillStyle=ct?`rgba(${i},${d},${g},${Ro})`:`hsla(${s.color2+a}, 100%, 50%, ${.01*p})`;if(c){let a,[n,r,l]=[3,4,5].map((e=>Ur(o,s.family,e)));if(Fa){let o=T.createRadialGradient(t,e,0,t,e,Jn*h*(qa?1:.5)),i=`rgba(${n},${r},${l},0`;Ar=`${i}.1)`,Er=void 0,Tr=`${i})`,o.addColorStop(0,Ar),o.addColorStop(1,Tr),a=o}else{let e=re?80:180;T.strokeStyle=`rgba(${e}, ${e}, ${e}, 0.3)`,a=`rgba(${n},${r},${l},0.1)`}T.fillStyle=a,Fa||(u=!0)}else Ka||(T.strokeStyle=`rgba(20,20,20,${.25*(p+1)})`);if(da){let e=s.energy<1?"33":"FF",t=s.isSmart?s.a%(1===la?3:2)==0?`0000${e}`:`${e}0000`:`00${e}00`;T.fillStyle=`#${t}55`}}}else{let e;switch(T.strokeStyle="black",T.lineWidth=2*xtsr,h=1,d=6,g=0,_t){case 1:e=m(0,255,s.strength);break;case 2:e=m(0,255,s.energy);break;case 3:e=m(0,255,s.age);break;case 4:e=63.75*(m(2,6,s.childCount)-2);break;case 5:e=m(0,255,255*(s.reproStrength-ya)/(va-ya));break;case 6:e=m(0,255,255*(s.reproAge-fa)/(ba-fa));break;case 7:e=m(0,255,255*s.timeSinceEaten/ka);break;case 8:e=m(0,255,25*(s.traits.targetAtkToDefRatio>1?s.traits.targetAtkToDefRatio:1/s.traits.targetAtkToDefRatio))}T.fillStyle=`rgba(${255-e},0,${e},0.8)`,9===_t&&(T.fillStyle=`rgba(${s.rockPaperScissors?0:"255"},${1===s.rockPaperScissors?"255":0},${2===s.rockPaperScissors?"255":0},0.8)`)}0===_t&&Va&&!da||Pr(r,l,h,d,u||Ka,g,c)})),2===la||!ua||0!==e&&0!==t||(zt?((0===e?Dn():Bn()),fr()):ir(hr,!0),zt&&(Ot[0]>4||Ot[1]>4)?On(Ot[1]>4):pe(`${0===e?"Red":"Blue"} Team wins this round! Starting next round${zt?` Blue: ${Ot[0]}, Red: ${Ot[1]}`:""}`))};