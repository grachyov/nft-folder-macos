{
  "contractAddress" : "0xa319c382a702682129fcbf55d514e61a16f97f9c",
  "kind" : "p5js100",
  "projectId" : "4",
  "script" : "function calculateFeatures(e){function t(e){let t=function(e,t){null==t&&(t=e,e=0);return function(e,t){const r=10**t;return Math.floor(e*r)\/r}(c()*(t-e)+e,5)}(e.map(([e,t])=>e).reduce((e,t)=>e+t));for(let[r,o]of e){if(r>=t)return o;t-=r}}function r(e,t){return null==t&&(t=e,e=0),Math.floor(c()*(t-e))+e}const{tokenId:o,hash:n}=e;console.log(n);let l=parseInt(n.slice(0,16),16),s=parseInt(n.slice(16,32),16),i=parseInt(n.slice(32,48),16),a=parseInt(n.slice(48,64),16);function c(){var e=s<<9,t=5*l;return a^=s,s^=i^=l,l^=a,i^=e,a=a<<11|a>>>21,((t=9*(t<<7|t>>>25))>>>0)\/4294967296}const u=t([[1,\"A\"],[1,\"B\"],[1,\"C\"],[1,\"D\"]]),_=t([[1,\"Blush\"],[1,\"Meadow\"],[1,\"Gold\"],[1,\"Contra\"]]),d=t([[1,\"Sparse\"],[1,\"Moderate\"],[1,\"Packed\"]]),f=(p=.87,x=c(),x<p);var p;const h={Rule:u,Steps:r(7,22),Fullness:d,Colors:_,Curves:f,Breaks:t([[1,!1],[3,!0]])};return console.log(\"features =\",JSON.stringify(h)),h}console.log(\"Made by Lars Wander https:\/\/larswander.com\"),console.log(\"Licensed under CC BY-NC-SA 4.0\");const MAX_CHAOS=6;function randperm(e){const t=[...e],r=[];for(;t.length>0;){const[e]=t.splice(Math.floor(random(t.length)),1);r.push(e)}return r}function randchoice(e){return e[randint(e.length)]}function randint(e,t){return null==t&&(t=e,e=0),Math.floor(random(e,t))}function randfloat(e,t){return null==t&&(t=e,e=0),trunc(random()*(t-e)+e,5)}function randbool(e){return random()<e}const H=Math.sqrt(3)*(2\/3),W=1;function hex_safe_coords(e,t){let[r,o]=t;return[(r+e.steps_y)%e.steps_y,(o+e.steps_x)%e.steps_x]}function hex_neighbors(e,t){let[r,o]=t;return o%2==0?[hex_safe_coords(e,[r,o+1]),hex_safe_coords(e,[r+1,o]),hex_safe_coords(e,[r,o-1]),hex_safe_coords(e,[r-1,o-1]),hex_safe_coords(e,[r-1,o]),hex_safe_coords(e,[r-1,o+1])]:[hex_safe_coords(e,[r+1,o+1]),hex_safe_coords(e,[r+1,o]),hex_safe_coords(e,[r+1,o-1]),hex_safe_coords(e,[r,o-1]),hex_safe_coords(e,[r-1,o]),hex_safe_coords(e,[r,o+1])]}function hex_coords_to_point(e,t){let[r,o]=t;return[o*W*e.cell_size,(r*H+.5*H*(o%2==0?0:1))*e.cell_size]}function hex_grid(e,t,r){let o=Math.floor(e\/r)-1,n=Math.floor(t\/r\/H),l=[];for(let e=0;e<n;e++){let e=[];for(let t=0;t<o;t++)e.push(!1);l.push(e)}return{width:e,height:t,cell_size:r,steps_x:o,steps_y:n,grid:l,neighbors:hex_neighbors,dirs:6,coords_to_point:hex_coords_to_point,safe_coords:hex_safe_coords}}function grid_occupied(e,t){let[r,o]=e.safe_coords(e,t);return e.grid[r][o]}function grid_occupy(e,t){let[r,o]=e.safe_coords(e,t);e.grid[r][o]=!0}function grid_bigstep(e,t){let[r,o]=e,[n,l]=t;return Math.abs(r-n)+Math.abs(o-l)>2}function circle_walker_before_step(e,t){}function circle_walker_after_step(e,t){}function circle_walker_update_dir(e,t){t.dir+=1,t.dir%=e.dirs}function circle_walker(e,t){return{coords:e,layer:t,dir:t,before_step:circle_walker_before_step,after_step:circle_walker_after_step,update_dir:circle_walker_update_dir,alive:!0,history:[[e]]}}function onedir_walker_before_step(e,t){t.dir=t.onedir}function onedir_walker_after_step(e,t){}function onedir_walker_update_dir(e,t){t.dir+=1,t.dir%=e.dirs}function onedir_walker(e,t){return{coords:e,layer:t,dir:t,onedir:t,before_step:onedir_walker_before_step,after_step:onedir_walker_after_step,update_dir:onedir_walker_update_dir,alive:!0,history:[[e]]}}function cycle_walker_before_step(e,t){t.dir=Math.floor(t.cycle)}function cycle_walker_after_step(e,t){t.cycle-=.333,t.cycle+=e.dirs,t.cycle%=e.dirs}function cycle_walker_update_dir(e,t){t.dir+=1,t.dir%=e.dirs}function cycle_walker(e,t){return{coords:e,layer:t,dir:t,cycle:t,cycle_amount:randfloat(.05,.3),before_step:cycle_walker_before_step,after_step:cycle_walker_after_step,update_dir:cycle_walker_update_dir,alive:!0,history:[[e]]}}function flip_walker_before_step(e,t){t.dir==t.first_dir?t.rotate*=-1:t.update_dir(e,t)}function flip_walker_after_step(e,t){}function flip_walker_update_dir(e,t){t.dir+=t.rotate,t.dir+=e.dirs,t.dir%=e.dirs}function flip_walker(e,t){return{coords:e,layer:t,dir:t,rotate:1,first_dir:t,before_step:flip_walker_before_step,after_step:flip_walker_after_step,update_dir:flip_walker_update_dir,alive:!0,history:[[e]]}}function push_line(e){e.history.push([])}function push_point(e,t){e.history[e.history.length-1].push(t)}function finalize_walker(e){e.alive=!1,push_point(e,e.coords)}function step_walker(e,t){if(!t.alive)return;let r=t.dir,o=t.coords,n=e.neighbors(e,o);t.before_step(e,t);let l=!1;for(let r=0;r<e.dirs;r++){let r=n[t.dir];if(null!=r&&!grid_occupied(e,r)){l=!0,t.coords=r;break}t.update_dir(e,t)}l?(grid_bigstep(o,t.coords)?(push_point(t,o),push_line(t),push_point(t,t.coords)):r!==t.dir&&push_point(t,o),t.after_step(e,t)):finalize_walker(t)}function safe_cycle(e){return randint(e)}function attempt(e,t,r,o){let n=[];const l=()=>safe_cycle(e.steps_y),s=()=>safe_cycle(e.steps_x);let i=l(),a=s(),c=randint(i),u=randint(a),_=Math.ceil(t\/(o?2:1)),d=randperm([1,2,3]);d.push(d[0]+3),d.push(d[1]+3),d.push(d[2]+3);let f=0,p=new Set,h=0;const y=()=>{let e=l();for(;e===i;)e=l();a=i,i=e};for(let o=0;o<t;o++){if(f=d[o%d.length],f%=e.dirs,c+=i,u+=a,_>0&&(o+1)%_==0){c+=l(),u+=s(),y()}c+=e.steps_y,c%=e.steps_y,u+=e.steps_x;let t=[c,u%=e.steps_x],w=`${c},${u}`;if(p.has(w)){if((h+=1)>MAX_CHAOS)return;c+=l(),u+=s(),t=[c%=e.steps_y,u%=e.steps_x],w=`${c},${u}`}p.add(w),n.push(r(t,f))}return console.log(\"disruptions:\",h),n}function regular_walkers(e,t,r,o){let n=attempt(e,t,r,o);for(;null==n;)n=attempt(e,t,r,o);return n}function mul(e,t){let[r,o]=e;return[r*t,o*t]}function rot(e,t){let[r,o]=e,n=Math.sin(t),l=Math.cos(t);return[r*l+o*n,r*-n+o*l]}function add(e,t){let[r,o]=e,[n,l]=t;return[r+n,o+l]}function dist_between(e,t){let[r,o]=e,[n,l]=t;return Math.sqrt((r-n)**2+(o-l)**2)}function line_length(e){let t=0;for(let r=0;r<e.length-1;r++)t+=dist_between(e[r],e[r+1]);return t}function lerp_t(e,t,r){let[o,n]=e,[l,s]=t;return add(mul(e,1-r),mul(t,r))}function lerp_d(e,t,r){let o=dist_between(e,t);return 0===o?e:lerp_t(e,t,r\/o)}function qbezier(e,t,r){let o=0,n=[],l=dist_between(e,t),s=l>0?1\/l:.1;function i(o){let n=1-o;return add(add(mul(e,n*n),mul(t,2*n*o)),mul(r,o*o))}for(n.push(i(o));o<1;)o=Math.min(1,o+s),n.push(i(o));return n}function to_lines(e,t){let r=[];for(let o of t.history){let t=[];for(let r of o){let o=e.coords_to_point(e,r);t.push(o)}0!==t.length&&r.push(t)}return r}function curve_style(e){return function(t){let r=[];r.push(t[0]);for(let o=0;o<t.length-2;o++){let n=t[o],l=t[o+1],s=t[o+2];n=lerp_d(l,n,Math.min(e,dist_between(n,l)\/2)),s=lerp_d(l,s,Math.min(e,dist_between(s,l)\/2)),Array.prototype.push.apply(r,qbezier(n,l,s))}return r.push(t[t.length-1]),r}}function apply_style(e,t){let r=[];for(let o of e){let e=[];for(let r of o){let o=[];for(let e of r)o.push(t(e));e.push(o)}r.push(e)}return r}function trunc(e,t){let r=10**t;return Math.floor(e*r)\/r}function to_svg(e,t){let r=!0,o=[];for(const n of t){let t=document.createElementNS(e,\"polyline\"),l=\"\";if(1===n.length||2===n.length&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]){const[e,t]=n[0],r=.3,o=8;for(let n=0;n<o;n++){const s=n\/o*Math.PI*2,[i,a]=rot([r,0],s);l+=`${trunc(e+i,4)},${trunc(t+a,4)} `}}else for(let[e,t]of n)l+=`${trunc(e,4)},${trunc(t,4)} `;t.setAttribute(\"points\",l),t.setAttribute(\"class\",r?\"refill\":\"no-refill\"),o.push(t),r=!1}return o}function parallel(e,t,r){for(let r of t)grid_occupied(e,r.coords)?(r.alive=!1,r.history.length=0):grid_occupy(e,r.coords);for(let o=0;o<r;o++)for(let r of t)r.alive&&(step_walker(e,r),grid_occupy(e,r.coords));for(let e of t)e.alive&&finalize_walker(e)}function walker_factory(e){switch(e){case\"A\":return circle_walker;case\"B\":return onedir_walker;case\"C\":return cycle_walker;case\"D\":return flip_walker;default:throw`Illegal type ${e}`}}const BACKGROUND=\"rgb(255,254,254)\",COLORS={Meadow:{lines:[{color:\"#059e82\",name:\"viridian\"},{color:\"#70b03a\",name:\"sap-green\"},{color:\"#ff007f\",name:\"rose\"}]},Blush:{lines:[{color:\"#003153\",name:\"prussian-blue\"},{color:\"#ff007f\",name:\"rose\"},{color:\"#00a9ae\",name:\"cobalt-turquoise\"}]},Contra:{lines:[{color:\"#880088\",name:\"quinacridone-violet\"},{color:\"#de9726\",name:\"gold-ochre\"},{color:\"#00a9ae\",name:\"cobalt-turquoise\"}]},Gold:{lines:[{color:\"#ff007f\",name:\"rose\"},{color:\"#00a9ae\",name:\"cobalt-turquoise\"},{color:\"#de9726\",name:\"gold-ochre\"}]}};function layer_(e,t){return e.lines[t%e.lines.length]}function layer_color(e,t){return layer_(e,t).color}function layer_light(e,t){return t>=e.lines.length}function layer_name(e,t){return`${layer_(e,t).name}${layer_light(e,t)?\"-faint\":\"\"}`}const FULLNESS={Sparse:.75,Moderate:.95,Packed:1.3};function setup(){noCanvas(),noLoop();let e=1200,t=\"http:\/\/www.w3.org\/2000\/svg\",r=document.createElementNS(t,\"svg\"),o=parseInt(tokenData.hash.slice(0,16),16);randomSeed(o),r.setAttribute(\"width\",\"100vw\"),r.setAttribute(\"height\",\"100vh\"),r.setAttribute(\"viewBox\",\"0 0 900 \"+e);let n=document.createElementNS(t,\"path\");n.setAttribute(\"d\",\"M 100 100 M 800 1100\"),r.appendChild(n);var l=new URL(window.location.href);let s=calculateFeatures(tokenData),{Rule:i,Steps:a,Fullness:c,Colors:u,Curves:_,Breaks:d}=s;const f=COLORS[u];r.setAttribute(\"style\",`background-color:${BACKGROUND};`);let p=hex_grid(700,1e3,7.2),h=p.dirs,y=Math.ceil(p.steps_x*p.steps_y*FULLNESS[c]\/a)+1,w=walker_factory(i);var g=l.searchParams.get(\"count\");y=Math.min(y,null!=g?parseInt(g):y),console.log(\"line count:\",y);let k=regular_walkers(p,y,w,d);var m=l.searchParams.get(\"steps\");parallel(p,k,Math.min(null!=m?parseInt(m):a,a));let b=[];for(let e=0;e<h;e++)b.push([]);for(walker of k){const e=to_lines(p,walker);0!==e.length&&b[walker.layer].push(e)}if(_){b=apply_style(b,curve_style(18))}let x=document.createElementNS(t,\"g\");x.setAttribute(\"transform\",\"translate(100,100)\");for(let e=0;e<h;e++){let r=b[e],o=document.createElementNS(t,\"g\");const n=e,l=layer_name(f,n),s=layer_color(f,n),i=layer_light(f,n)?.25:.7;o.setAttribute(\"class\",l),o.setAttribute(\"id\",l),o.setAttribute(\"style\",`fill:none;stroke-width:3.2;stroke-linejoin:round;stroke-linecap:round;stroke-opacity:${i};stroke:${s}`);for(let e of r)for(const r of to_svg(t,e))o.appendChild(r);x.appendChild(o)}r.appendChild(x),document.body.appendChild(r)}",
  "tokens" : [
    {
      "hash" : "0xfaf0859eea0a9179607f1c21ef0cc8bee3c180f9ddf989d116d90da63b366077",
      "id" : "4000033"
    },
    {
      "hash" : "0x9c81d44f733749b9aac5732f43deaf389e0e7c53a3e6216e4f962afd669ff380",
      "id" : "4000002"
    },
    {
      "hash" : "0x9472ba9bf0208ed454344ccaf9b1e1449f2c056e400e2565ecca748f1cebf454",
      "id" : "4000036"
    },
    {
      "hash" : "0xf3b16f1b62fa0cd22d0af3b03a0a9f1137aafaef1b4942b4f76f6f7298c3a5c2",
      "id" : "4000008"
    },
    {
      "hash" : "0x40c4b049ac053c1391dab98528eba0288347ecfe20167cd1897e210e3ced1c1a",
      "id" : "4000020"
    },
    {
      "hash" : "0x1f4dc9466638d2f35d6242ce8e9b213db9823d7d22884840304606ec205da5a3",
      "id" : "4000013"
    },
    {
      "hash" : "0xde39a08b3381878df6ef72caaf6d26a739f26fc0ce7291e635e2122a17115f4a",
      "id" : "4000004"
    },
    {
      "hash" : "0xc363b30be4984fbcc5c2c2ac667a6aad27c108aad91746e11f5c3134c3d89641",
      "id" : "4000014"
    },
    {
      "hash" : "0xfb106eaff2a130a684350d721e14b35ba6e998fb4d3bd06b018a37e49eb170e0",
      "id" : "4000012"
    },
    {
      "hash" : "0x17170851533e166fdfc1e24ec5bf2ad8b973087cd7661c00f11e5b87f8ece441",
      "id" : "4000016"
    },
    {
      "hash" : "0xcc85ae184c1fe0b65eab12d83f7d6ddb042d472d7ae7e77d940bc6f37e94c80e",
      "id" : "4000022"
    },
    {
      "hash" : "0xd87fb1eae548f14d8e392306e7acf49a88f1cc6bff5a6000cc14848220dc25b6",
      "id" : "4000024"
    },
    {
      "hash" : "0x48135bd796112f8698807d4da4848a3a0ece130a8b4dcf391aa4017a1cb04aa8",
      "id" : "4000025"
    },
    {
      "hash" : "0xdb0da0a058ebbcd49ad04f1b37981df4177bbc7d494a94e333a86d98b2f7d356",
      "id" : "4000029"
    },
    {
      "hash" : "0x4cd5ea29f38aec3361dcd1cd02a36d39150bd8c6fe1679c4480fd9f0faa51043",
      "id" : "4000030"
    },
    {
      "hash" : "0x8f713d4159c5fe29384606890514e6fe2b2e1b6987f0f4319edd0ca7e4f3251e",
      "id" : "4000037"
    },
    {
      "hash" : "0xd5f7906c463f6e717c7d44d026564d1f73337fd4201105095a49337ed65fe997",
      "id" : "4000040"
    },
    {
      "hash" : "0x029087006aff65ecb25eedcf58685278c59aacd1b416d1c96edf5ecd8e5c5613",
      "id" : "4000041"
    },
    {
      "hash" : "0x8cb97a2737b47e7173e9a3d8ebb031b984fed5625fa93cb9785e6b92a6b8bb17",
      "id" : "4000042"
    },
    {
      "hash" : "0xa6e27f4abdd9f12112763b9644e9fcf45daf681cc216942977cb9408b9f720fa",
      "id" : "4000043"
    },
    {
      "hash" : "0x4a518d9fdb1bb1bdbd75fd3eb9e7d9f9f2c4b4aaf75fb4e346ddf140059c9af6",
      "id" : "4000010"
    },
    {
      "hash" : "0xfb832f1a4b0b1bed07a901fc0b72de17b19a1bc24b950cba3c3084d9225cfdd8",
      "id" : "4000028"
    },
    {
      "hash" : "0xcaedde398a58797f413679095b3a7b4395abd31493ae83b7bc81ec025161cb83",
      "id" : "4000011"
    },
    {
      "hash" : "0xf7f0ec5633aeff34d3a303b8e52c4c5475b9163b0b212b32de6cdd3628fd0b9a",
      "id" : "4000026"
    },
    {
      "hash" : "0xdbd7b6cf903d2c47a0d68354b08cc8b184802c65177486dec073e053f9423dfa",
      "id" : "4000023"
    },
    {
      "hash" : "0xbc228aabd39e4f9583ed7a0c979ec09a7adb1d9d8fce708214008dfe86618da9",
      "id" : "4000005"
    },
    {
      "hash" : "0x14abf96e5192e12519ed36c9946e93b963dfee5b5da7e95554259b9813cbf269",
      "id" : "4000017"
    },
    {
      "hash" : "0xb299cac567a7ccb7acae9352a904cdac81f39bfbb167eea674027d2a271dc191",
      "id" : "4000035"
    },
    {
      "hash" : "0xc0a7c267e37f55820a3cab5000c73714e206dee5b9733d72eab9f7b6766910ce",
      "id" : "4000027"
    },
    {
      "hash" : "0x8da7600c31af3bccd95d11a7edd78abcb1201c6402368448a4ae9c8568a3cdda",
      "id" : "4000007"
    },
    {
      "hash" : "0x0950fcd546b5bcc027b78c3412597e7dae3963b054a0d7139b9d799aee0f6cb4",
      "id" : "4000009"
    },
    {
      "hash" : "0xa22346c9eb3089bcfd6e482eda6d02e4479a1bf93d9864965c177cdbd8522e45",
      "id" : "4000015"
    },
    {
      "hash" : "0x24364518e3aa3b7237a5bc4005a67d1c2093472b39c24aabaf2617b3830d2485",
      "id" : "4000018"
    },
    {
      "hash" : "0xe517918073cfe18cfbb4d3f9bb35f599a8aa37f9c656618cc68ef13de9119d60",
      "id" : "4000001"
    },
    {
      "hash" : "0x6bd9728d22a1736a07521ec6bfc0443bcc3de541798bfce55290bbc53c16c27d",
      "id" : "4000039"
    },
    {
      "hash" : "0x0b9c72c41b84d521c656e6aac1d39fed449529ea90964beb47809986c3f4eff6",
      "id" : "4000032"
    },
    {
      "hash" : "0xca852c249a8c5fc57b76ec83cc437d73a0f1b40ade6057196e00896ec9a10b6d",
      "id" : "4000021"
    },
    {
      "hash" : "0x9805642d6e0ce424755d421da42bd0e85904679ce45a9b976dc93afb17f9220d",
      "id" : "4000003"
    },
    {
      "hash" : "0x0e192282b38cedac908bf91bb3c68a6b6146e26603af9024f1cf988ed28a9c65",
      "id" : "4000038"
    },
    {
      "hash" : "0xf1be07b40ed8d13efd47614fa5fd15712a28bcf17cb169ab3f07fb241135b14e",
      "id" : "4000034"
    },
    {
      "hash" : "0x51ef159eeba91e861dad2360722b2e628b92d94fabfa48877e50ea64402eee43",
      "id" : "4000031"
    },
    {
      "hash" : "0xd180de0335bcaadffaf99b5405cc3df45a3a710580c36c8df4d3cad88e859ab8",
      "id" : "4000019"
    },
    {
      "hash" : "0x9e36d2016a59112b17327d34b9ea5ba13959166f9689f6f9d69538f11028fbde",
      "id" : "4000000"
    },
    {
      "hash" : "0x8eb2822664a5e04bec87d03d56ce316a4d422cd25350a4c51d191c11eb4e2208",
      "id" : "4000006"
    }
  ]
}